(function(u,m){'object'==typeof exports&&'object'==typeof module?module.exports=m(require('tui-code-snippet'),require('fabric/dist/fabric.require')):'function'==typeof define&&define.amd?define(['tui-code-snippet','fabric/dist/fabric.require'],m):'object'==typeof exports?exports.ImageEditor=m(require('tui-code-snippet'),require('fabric/dist/fabric.require')):(u.tui=u.tui||{},u.tui.ImageEditor=m(u.tui&&u.tui.util,u.fabric))})(this,function(n,u){return function(m){function _(M){if(E[M])return E[M].exports;var A=E[M]={exports:{},id:M,loaded:!1};return m[M].call(A.exports,A,A.exports,_),A.loaded=!0,A.exports}var E={};return _.m=m,_.c=E,_.p='dist',_(0)}([function(m,_,E){'use strict';E(1);var A=E(2),I=function(R){return R&&R.__esModule?R:{default:R}}(A);E(130),E(132),E(133),E(134),E(135),E(136),E(137),E(138),E(139),E(140),E(141),E(142),E(143),E(144),E(145),E(146),E(147),E(148),E(149),E(150),m.exports=I.default},function(){'use strict';Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Element.prototype.closest||(Element.prototype.closest=function(E){var M=this;if(!document.documentElement.contains(M))return null;do{if(M.matches(E))return M;M=M.parentElement||M.parentNode}while(null!==M&&1===M.nodeType);return null}),'document'in window.self&&((!('classList'in document.createElement('_'))||document.createElementNS&&!('classList'in document.createElementNS('http://www.w3.org/2000/svg','g')))&&function(E){'use strict';if('Element'in E){var M='classList',A='prototype',I=E.Element[A],R=Object,L=String[A].trim||function(){return this.replace(/^\s+|\s+$/g,'')},N=Array[A].indexOf||function(X){for(var Y=0,K=this.length;Y<K;Y++)if(Y in this&&this[Y]===X)return Y;return-1},H=function(Y,K){this.name=Y,this.code=DOMException[Y],this.message=K},z=function(Y,K){if(''===K)throw new H('SYNTAX_ERR','An invalid or illegal string was specified');if(/\s/.test(K))throw new H('INVALID_CHARACTER_ERR','String contains an invalid character');return N.call(Y,K)},U=function(Y){for(var K=L.call(Y.getAttribute('class')||''),J=K?K.split(/\s+/):[],Z=0,Q=J.length;Z<Q;Z++)this.push(J[Z]);this._updateClassName=function(){Y.setAttribute('class',this.toString())}},W=U[A]=[],V=function(){return new U(this)};if(H[A]=Error[A],W.item=function(X){return this[X]||null},W.contains=function(X){return X+='',-1!==z(this,X)},W.add=function(){var X=arguments,Y=0,K=X.length,Z=!1,J;do J=X[Y]+'',-1===z(this,J)&&(this.push(J),Z=!0);while(++Y<K);Z&&this._updateClassName()},W.remove=function(){var X=arguments,Y=0,K=X.length,Z=!1,J,Q;do for(J=X[Y]+'',Q=z(this,J);-1!==Q;)this.splice(Q,1),Z=!0,Q=z(this,J);while(++Y<K);Z&&this._updateClassName()},W.toggle=function(X,Y){X+='';var K=this.contains(X),J=K?!0!==Y&&'remove':!1!==Y&&'add';return J&&this[J](X),!0===Y||!1===Y?Y:!K},W.toString=function(){return this.join(' ')},R.defineProperty){var G={get:V,enumerable:!0,configurable:!0};try{R.defineProperty(I,M,G)}catch(X){(void 0===X.number||-2146823252===X.number)&&(G.enumerable=!1,R.defineProperty(I,M,G))}}else R[A].__defineGetter__&&I.__defineGetter__(M,V)}}(window.self),function(){'use strict';var E=document.createElement('_');if(E.classList.add('c1','c2'),!E.classList.contains('c2')){var M=function(R){var L=DOMTokenList.prototype[R];DOMTokenList.prototype[R]=function(N){var z=arguments.length,H;for(H=0;H<z;H++)N=arguments[H],L.call(this,N)}};M('add'),M('remove')}if(E.classList.toggle('c3',!1),E.classList.contains('c3')){var A=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(I,R){return 1 in arguments&&!this.contains(I)==!R?R:A.call(this,I)}}E=null}()),function(){'use strict';if('undefined'!=typeof window&&window.addEventListener){var E=Object.create(null),M,A,I=function(){clearTimeout(A),A=setTimeout(M,100)},R=function(){},L=function(){var W;window.addEventListener('resize',I,!1),window.addEventListener('orientationchange',I,!1),window.MutationObserver?(W=new MutationObserver(I),W.observe(document.documentElement,{childList:!0,subtree:!0,attributes:!0}),R=function(){try{W.disconnect(),window.removeEventListener('resize',I,!1),window.removeEventListener('orientationchange',I,!1)}catch(G){}}):(document.documentElement.addEventListener('DOMSubtreeModified',I,!1),R=function(){document.documentElement.removeEventListener('DOMSubtreeModified',I,!1),window.removeEventListener('resize',I,!1),window.removeEventListener('orientationchange',I,!1)})},N=function(W){function V(K){var J;return void 0===K.protocol?(J=document.createElement('a'),J.href=K):J=K,J.protocol.replace(/:/g,'')+J.host}var G,X,Y;return window.XMLHttpRequest&&(G=new XMLHttpRequest,X=V(location),Y=V(W),G=void 0===G.withCredentials&&''!==Y&&Y!=X?XDomainRequest||void 0:XMLHttpRequest),G},H='http://www.w3.org/1999/xlink';M=function(){function W(){ee-=1,0===ee&&(R(),L())}function V(le){return function(){!0!==E[le.base]&&(le.useEl.setAttributeNS(H,'xlink:href','#'+le.hash),le.useEl.hasAttribute('href')&&le.useEl.setAttribute('href','#'+le.hash))}}function G(le){return function(){var se=document.body,ce=document.createElement('x'),de;le.onload=null,ce.innerHTML=le.responseText,de=ce.getElementsByTagName('svg')[0],de&&(de.setAttribute('aria-hidden','true'),de.style.position='absolute',de.style.width=0,de.style.height=0,de.style.overflow='hidden',se.insertBefore(de,se.firstChild)),W()}}function X(le){return function(){le.onerror=null,le.ontimeout=null,W()}}var Y,K,Z,Q,$,ee=0,te,ae,oe,ne,ie;for(R(),ne=document.getElementsByTagName('use'),$=0;$<ne.length;$+=1){try{K=ne[$].getBoundingClientRect()}catch(le){K=!1}Q=ne[$].getAttribute('href')||ne[$].getAttributeNS(H,'href')||ne[$].getAttribute('xlink:href'),oe=Q&&Q.split?Q.split('#'):['',''],Y=oe[0],Z=oe[1],te=K&&0===K.left&&0===K.right&&0===K.top&&0===K.bottom,K&&0===K.width&&0===K.height&&!te?('',ne[$].hasAttribute('href')&&ne[$].setAttributeNS(H,'xlink:href',Q),Y.length&&(ie=E[Y],!0!==ie&&setTimeout(V({useEl:ne[$],base:Y,hash:Z}),0),ie==void 0&&(ae=N(Y),ae!=void 0&&(ie=new ae,E[Y]=ie,ie.onload=G(ie),ie.onerror=X(ie),ie.ontimeout=X(ie),ie.open('GET',Y),ie.send(),ee+=1)))):te?Y.length&&E[Y]&&setTimeout(V({useEl:ne[$],base:Y,hash:Z}),0):E[Y]===void 0?E[Y]=!0:E[Y].onload&&(E[Y].abort(),delete E[Y].onload,E[Y]=!0)}ne='',ee+=1,W()};var z;z=function(){window.removeEventListener('load',z,!1),A=setTimeout(M,0)},'complete'===document.readyState?z():window.addEventListener('load',z,!1)}}()},function(m,_,E){'use strict';function M(de){return de&&de.__esModule?de:{default:de}}function A(de,ue){if(!(de instanceof ue))throw new TypeError('Cannot call a class as a function')}var I=function(){function de(ue,pe){for(var ge=0,me;ge<pe.length;ge++)me=pe[ge],me.enumerable=me.enumerable||!1,me.configurable=!0,'value'in me&&(me.writable=!0),Object.defineProperty(ue,me.key,me)}return function(ue,pe,ge){return pe&&de(ue.prototype,pe),ge&&de(ue,ge),ue}}(),R=E(3),L=M(R),N=E(4),H=M(N),z=E(68),U=M(z),W=E(74),V=M(W),G=E(102),X=M(G),Y=E(69),K=M(Y),J=E(104),Z=M(J),Q=E(73),$=M(Q),ee=E(72),te=$.default.eventNames,ae=$.default.commandNames,oe=$.default.keyCodes,ne=$.default.rejectMessages,ie=L.default.isUndefined,le=L.default.forEach,se=L.default.CustomEvents,ce=function(){function de(ue,pe){A(this,de),pe=L.default.extend({includeUI:!1,usageStatistics:!0},pe),this.mode=null,this.activeObjectId=null,pe.includeUI&&(this.ui=new V.default(ue,pe.includeUI,this.getActions()),pe=this.ui.setUiDefaultSelectionStyle(pe)),this._invoker=new U.default,this._graphics=new Z.default(this.ui?this.ui.getEditorArea():ue,{cssMaxWidth:pe.cssMaxWidth,cssMaxHeight:pe.cssMaxHeight,useItext:!!this.ui,useDragAddIcon:!!this.ui}),this._handlers={keydown:this._onKeyDown.bind(this),mousedown:this._onMouseDown.bind(this),objectActivated:this._onObjectActivated.bind(this),objectMoved:this._onObjectMoved.bind(this),objectScaled:this._onObjectScaled.bind(this),createdPath:this._onCreatedPath,addText:this._onAddText.bind(this),addObject:this._onAddObject.bind(this),addObjectAfter:this._onAddObjectAfter.bind(this),textEditing:this._onTextEditing.bind(this),textChanged:this._onTextChanged.bind(this),iconCreateResize:this._onIconCreateResize.bind(this),iconCreateEnd:this._onIconCreateEnd.bind(this),selectionCleared:this._selectionCleared.bind(this),selectionCreated:this._selectionCreated.bind(this)},this._attachInvokerEvents(),this._attachGraphicsEvents(),this._attachDomEvents(),this._setSelectionStyle(pe.selectionStyle,{applyCropSelectionStyle:pe.applyCropSelectionStyle,applyGroupSelectionStyle:pe.applyGroupSelectionStyle}),pe.usageStatistics&&(0,ee.sendHostName)(),this.ui&&(this.ui.initCanvas(),this.setReAction())}return I(de,[{key:'_setSelectionStyle',value:function(pe,ge){var me=ge.applyCropSelectionStyle,fe=ge.applyGroupSelectionStyle;pe&&this._graphics.setSelectionStyle(pe),me&&this._graphics.setCropSelectionStyle(pe),fe&&this.on('selectionCreated',function(he){'group'===he.type&&he.set(pe)})}},{key:'_attachInvokerEvents',value:function(){var pe=te.UNDO_STACK_CHANGED,ge=te.REDO_STACK_CHANGED;this._invoker.on(pe,this.fire.bind(this,pe)),this._invoker.on(ge,this.fire.bind(this,ge))}},{key:'_attachGraphicsEvents',value:function(){this._graphics.on({mousedown:this._handlers.mousedown,objectMoved:this._handlers.objectMoved,objectScaled:this._handlers.objectScaled,objectActivated:this._handlers.objectActivated,addText:this._handlers.addText,addObject:this._handlers.addObject,textEditing:this._handlers.textEditing,textChanged:this._handlers.textChanged,iconCreateResize:this._handlers.iconCreateResize,iconCreateEnd:this._handlers.iconCreateEnd,selectionCleared:this._handlers.selectionCleared,selectionCreated:this._handlers.selectionCreated,addObjectAfter:this._handlers.addObjectAfter})}},{key:'_attachDomEvents',value:function(){document.addEventListener('keydown',this._handlers.keydown)}},{key:'_detachDomEvents',value:function(){document.removeEventListener('keydown',this._handlers.keydown)}},{key:'_onKeyDown',value:function(pe){var ge=this._graphics.getActiveObject(),me=this._graphics.getActiveGroupObject();(pe.ctrlKey||pe.metaKey)&&pe.keyCode===oe.Z&&this.undo()['catch'](function(){}),(pe.ctrlKey||pe.metaKey)&&pe.keyCode===oe.Y&&this.redo()['catch'](function(){}),(pe.keyCode===oe.BACKSPACE||pe.keyCode===oe.DEL)&&(ge||me)&&(pe.preventDefault(),this.removeActiveObject())}},{key:'removeActiveObject',value:function(){var pe=this._graphics.getActiveObject(),ge=this._graphics.getActiveGroupObject();if(ge){var me=ge.getObjects();this.discardSelection(),this._removeObjectStream(me)}else if(pe){var fe=this._graphics.getObjectId(pe);this.removeObject(fe)}}},{key:'_removeObjectStream',value:function(pe){var ge=this;if(!pe.length)return!0;var me=pe.pop();return this.removeObject(this._graphics.getObjectId(me)).then(function(){return ge._removeObjectStream(pe)})}},{key:'_onMouseDown',value:function(pe,ge){this.fire(te.MOUSE_DOWN,pe,ge)}},{key:'_pushAddObjectCommand',value:function(pe){var ge=K.default.create(ae.ADD_OBJECT,this._graphics,pe);this._invoker.pushUndoStack(ge)}},{key:'_onObjectActivated',value:function(pe){this.fire(te.OBJECT_ACTIVATED,pe)}},{key:'_onObjectMoved',value:function(pe){this.fire(te.OBJECT_MOVED,pe)}},{key:'_onObjectScaled',value:function(pe){this.fire(te.OBJECT_SCALED,pe)}},{key:'getDrawingMode',value:function(){return this._graphics.getDrawingMode()}},{key:'clearObjects',value:function(){return this.execute(ae.CLEAR_OBJECTS)}},{key:'deactivateAll',value:function(){this._graphics.deactivateAll(),this._graphics.renderAll()}},{key:'discardSelection',value:function(){this._graphics.discardSelection()}},{key:'changeSelectableAll',value:function(pe){this._graphics.changeSelectableAll(pe)}},{key:'execute',value:function(pe){for(var me=arguments.length,fe=Array(1<me?me-1:0),he=1,ge;he<me;he++)fe[he-1]=arguments[he];var ve=[this._graphics].concat(fe);return(ge=this._invoker).execute.apply(ge,[pe].concat(ve))}},{key:'undo',value:function(){return this._invoker.undo()}},{key:'redo',value:function(){return this._invoker.redo()}},{key:'loadImageFromFile',value:function(pe,ge){if(!pe)return H.default.reject(ne.invalidParameters);var me=URL.createObjectURL(pe);return ge=ge||pe.name,this.loadImageFromURL(me,ge).then(function(fe){return URL.revokeObjectURL(pe),fe})}},{key:'loadImageFromURL',value:function(pe,ge){return ge&&pe?this.execute(ae.LOAD_IMAGE,ge,pe):H.default.reject(ne.invalidParameters)}},{key:'addImageObject',value:function(pe){return pe?this.execute(ae.ADD_IMAGE_OBJECT,pe):H.default.reject(ne.invalidParameters)}},{key:'startDrawingMode',value:function(pe,ge){return this._graphics.startDrawingMode(pe,ge)}},{key:'stopDrawingMode',value:function(){this._graphics.stopDrawingMode()}},{key:'crop',value:function(pe){var ge=this._graphics.getCroppedImageData(pe);return ge?this.loadImageFromURL(ge.url,ge.imageName):H.default.reject(ne.invalidParameters)}},{key:'getCropzoneRect',value:function(){return this._graphics.getCropzoneRect()}},{key:'setCropzoneRect',value:function(pe){return this._graphics.setCropzoneRect(pe)}},{key:'_flip',value:function(pe){return this.execute(ae.FLIP_IMAGE,pe)}},{key:'flipX',value:function(){return this._flip('flipX')}},{key:'flipY',value:function(){return this._flip('flipY')}},{key:'resetFlip',value:function(){return this._flip('reset')}},{key:'_rotate',value:function(pe,ge){return this.execute(ae.ROTATE_IMAGE,pe,ge)}},{key:'rotate',value:function(pe){return this._rotate('rotate',pe)}},{key:'setAngle',value:function(pe){return this._rotate('setAngle',pe)}},{key:'setBrush',value:function(pe){this._graphics.setBrush(pe)}},{key:'setDrawingShape',value:function(pe,ge){this._graphics.setDrawingShape(pe,ge)}},{key:'addShape',value:function(pe,ge){return ge=ge||{},this._setPositions(ge),this.execute(ae.ADD_SHAPE,pe,ge)}},{key:'changeShape',value:function(pe,ge){return this.execute(ae.CHANGE_SHAPE,pe,ge)}},{key:'addText',value:function(pe,ge){return pe=pe||'',ge=ge||{},this.execute(ae.ADD_TEXT,pe,ge)}},{key:'changeText',value:function(pe,ge){return ge=ge||'',this.execute(ae.CHANGE_TEXT,pe,ge)}},{key:'changeTextStyle',value:function(pe,ge){return this.execute(ae.CHANGE_TEXT_STYLE,pe,ge)}},{key:'_changeActivateMode',value:function(pe){'ICON'!==pe&&this.getDrawingMode()!==pe&&this.startDrawingMode(pe)}},{key:'_onTextChanged',value:function(pe){this.changeText(pe.id,pe.text)}},{key:'_onIconCreateResize',value:function(pe){this.fire(te.ICON_CREATE_RESIZE,pe)}},{key:'_onIconCreateEnd',value:function(pe){this.fire(te.ICON_CREATE_END,pe)}},{key:'_onTextEditing',value:function(){this.fire(te.TEXT_EDITING)}},{key:'_onAddText',value:function(pe){this.fire(te.ADD_TEXT,{originPosition:pe.originPosition,clientPosition:pe.clientPosition})}},{key:'_onAddObject',value:function(pe){var ge=this._graphics.getObject(pe.id);this._pushAddObjectCommand(ge)}},{key:'_onAddObjectAfter',value:function(pe){this.fire(te.ADD_OBJECT_AFTER,pe)}},{key:'_selectionCleared',value:function(){this.fire(te.SELECTION_CLEARED)}},{key:'_selectionCreated',value:function(pe){this.fire(te.SELECTION_CREATED,pe)}},{key:'registerIcons',value:function(pe){this._graphics.registerPaths(pe)}},{key:'changeCursor',value:function(pe){this._graphics.changeCursor(pe)}},{key:'addIcon',value:function(pe,ge){return ge=ge||{},this._setPositions(ge),this.execute(ae.ADD_ICON,pe,ge)}},{key:'changeIconColor',value:function(pe,ge){return this.execute(ae.CHANGE_ICON_COLOR,pe,ge)}},{key:'removeObject',value:function(pe){return this.execute(ae.REMOVE_OBJECT,pe)}},{key:'hasFilter',value:function(pe){return this._graphics.hasFilter(pe)}},{key:'removeFilter',value:function(pe){return this.execute(ae.REMOVE_FILTER,pe)}},{key:'applyFilter',value:function(pe,ge){return this.execute(ae.APPLY_FILTER,pe,ge)}},{key:'toDataURL',value:function(pe){return this._graphics.toDataURL(pe)}},{key:'getImageName',value:function(){return this._graphics.getImageName()}},{key:'clearUndoStack',value:function(){this._invoker.clearUndoStack()}},{key:'clearRedoStack',value:function(){this._invoker.clearRedoStack()}},{key:'isEmptyUndoStack',value:function(){return this._invoker.isEmptyUndoStack()}},{key:'isEmptyRedoStack',value:function(){return this._invoker.isEmptyRedoStack()}},{key:'resizeCanvasDimension',value:function(pe){return pe?this.execute(ae.RESIZE_CANVAS_DIMENSION,pe):H.default.reject(ne.invalidParameters)}},{key:'destroy',value:function(){var pe=this;this.stopDrawingMode(),this._detachDomEvents(),this._graphics.destroy(),this._graphics=null,le(this,function(ge,me){pe[me]=null},this)}},{key:'_setPositions',value:function(pe){var ge=this._graphics.getCenter();ie(pe.left)&&(pe.left=ge.left),ie(pe.top)&&(pe.top=ge.top)}},{key:'setObjectProperties',value:function(pe,ge){return this.execute(ae.SET_OBJECT_PROPERTIES,pe,ge)}},{key:'setObjectPropertiesQuietly',value:function(pe,ge){this._graphics.setObjectProperties(pe,ge)}},{key:'getObjectProperties',value:function(pe,ge){var me=this._graphics.getObject(pe);return me?this._graphics.getObjectProperties(pe,ge):null}},{key:'getCanvasSize',value:function(){return this._graphics.getCanvasSize()}},{key:'getObjectPosition',value:function(pe,ge,me){return this._graphics.getObjectPosition(pe,ge,me)}},{key:'setObjectPosition',value:function(pe,ge){return this.execute(ae.SET_OBJECT_POSITION,pe,ge)}}]),de}();X.default.mixin(ce),se.mixin(ce),m.exports=ce},function(m){m.exports=n},function(m,_,E){E(5),E(6),E(50),E(54),m.exports=E(14).Promise},function(){},function(m,_,E){'use strict';var M=E(7)(!0);E(10)(String,'String',function(A){this._t=A+'',this._i=0},function(){var A=this._t,I=this._i,R;return I>=A.length?{value:void 0,done:!0}:(R=M(A,I),this._i+=R.length,{value:R,done:!1})})},function(m,_,E){var M=E(8),A=E(9);m.exports=function(I){return function(R,L){var N=A(R)+'',H=M(L),z=N.length,U,W;return 0>H||H>=z?I?'':void 0:(U=N.charCodeAt(H),55296>U||56319<U||H+1===z||56320>(W=N.charCodeAt(H+1))||57343<W?I?N.charAt(H):U:I?N.slice(H,H+2):(U-55296<<10)+(W-56320)+65536)}}},function(m){var E=Math.ceil,M=Math.floor;m.exports=function(A){return isNaN(A=+A)?0:(0<A?M:E)(A)}},function(m){m.exports=function(E){if(E==void 0)throw TypeError('Can\'t call method on  '+E);return E}},function(m,_,E){'use strict';var M=E(11),A=E(12),I=E(27),R=E(17),L=E(28),N=E(29),H=E(30),z=E(46),U=E(48),W=E(47)('iterator'),V=!([].keys&&'next'in[].keys()),X='keys',Y='values',K=function(){return this};m.exports=function(J,Z,Q,$,ee,te,ae){H(Q,Z,$);var oe=function(he){return!V&&he in se?se[he]:he===X?function(){return new Q(this,he)}:he===Y?function(){return new Q(this,he)}:function(){return new Q(this,he)}},ne=Z+' Iterator',ie=ee==Y,le=!1,se=J.prototype,ce=se[W]||se['@@iterator']||ee&&se[ee],de=ce||oe(ee),ue=ee?ie?oe('entries'):de:void 0,pe='Array'==Z?se.entries||ce:ce,ge,me,fe;if(pe&&(fe=U(pe.call(new J)),fe!==Object.prototype&&(z(fe,ne,!0),!M&&!L(fe,W)&&R(fe,W,K))),ie&&ce&&ce.name!==Y&&(le=!0,de=function(){return ce.call(this)}),(!M||ae)&&(V||le||!se[W])&&R(se,W,de),N[Z]=de,N[ne]=K,ee)if(ge={values:ie?de:oe(Y),keys:te?de:oe(X),entries:ue},ae)for(me in ge)me in se||I(se,me,ge[me]);else A(A.P+A.F*(V||le),Z,ge);return ge}},function(m){m.exports=!0},function(m,_,E){var M=E(13),A=E(14),I=E(15),R=E(17),L='prototype',N=function(H,z,U){var W=H&N.F,V=H&N.G,G=H&N.S,X=H&N.P,Y=H&N.B,K=H&N.W,J=V?A:A[z]||(A[z]={}),Z=J[L],Q=V?M:G?M[z]:(M[z]||{})[L],$,ee,te;for($ in V&&(U=z),U)ee=!W&&Q&&void 0!==Q[$],ee&&$ in J||(te=ee?Q[$]:U[$],J[$]=V&&'function'!=typeof Q[$]?U[$]:Y&&ee?I(te,M):K&&Q[$]==te?function(se){var ce=function(de,ue,pe){if(this instanceof se){switch(arguments.length){case 0:return new se;case 1:return new se(de);case 2:return new se(de,ue);}return new se(de,ue,pe)}return se.apply(this,arguments)};return ce[L]=se[L],ce}(te):X&&'function'==typeof te?I(Function.call,te):te,X&&((J.virtual||(J.virtual={}))[$]=te,H&N.R&&Z&&!Z[$]&&R(Z,$,te)))};N.F=1,N.G=2,N.S=4,N.P=8,N.B=16,N.W=32,N.U=64,N.R=128,m.exports=N},function(m){var E=m.exports='undefined'!=typeof window&&window.Math==Math?window:'undefined'!=typeof self&&self.Math==Math?self:Function('return this')();'number'==typeof __g&&(__g=E)},function(m){var E=m.exports={version:'2.4.0'};'number'==typeof __e&&(__e=E)},function(m,_,E){var M=E(16);m.exports=function(A,I,R){return(M(A),void 0===I)?A:1===R?function(L){return A.call(I,L)}:2===R?function(L,N){return A.call(I,L,N)}:3===R?function(L,N,H){return A.call(I,L,N,H)}:function(){return A.apply(I,arguments)}}},function(m){m.exports=function(E){if('function'!=typeof E)throw TypeError(E+' is not a function!');return E}},function(m,_,E){var M=E(18),A=E(26);m.exports=E(22)?function(I,R,L){return M.f(I,R,A(1,L))}:function(I,R,L){return I[R]=L,I}},function(m,_,E){var M=E(19),A=E(21),I=E(25),R=Object.defineProperty;_.f=E(22)?Object.defineProperty:function(N,H,z){if(M(N),H=I(H,!0),M(z),A)try{return R(N,H,z)}catch(U){}if('get'in z||'set'in z)throw TypeError('Accessors not supported!');return'value'in z&&(N[H]=z.value),N}},function(m,_,E){var M=E(20);m.exports=function(A){if(!M(A))throw TypeError(A+' is not an object!');return A}},function(m){m.exports=function(E){return'object'==typeof E?null!==E:'function'==typeof E}},function(m,_,E){m.exports=!E(22)&&!E(23)(function(){return 7!=Object.defineProperty(E(24)('div'),'a',{get:function(){return 7}}).a})},function(m,_,E){m.exports=!E(23)(function(){return 7!=Object.defineProperty({},'a',{get:function(){return 7}}).a})},function(m){m.exports=function(E){try{return!!E()}catch(M){return!0}}},function(m,_,E){var M=E(20),A=E(13).document,I=M(A)&&M(A.createElement);m.exports=function(R){return I?A.createElement(R):{}}},function(m,_,E){var M=E(20);m.exports=function(A,I){if(!M(A))return A;var R,L;if(I&&'function'==typeof(R=A.toString)&&!M(L=R.call(A)))return L;if('function'==typeof(R=A.valueOf)&&!M(L=R.call(A)))return L;if(!I&&'function'==typeof(R=A.toString)&&!M(L=R.call(A)))return L;throw TypeError('Can\'t convert object to primitive value')}},function(m){m.exports=function(E,M){return{enumerable:!(1&E),configurable:!(2&E),writable:!(4&E),value:M}}},function(m,_,E){m.exports=E(17)},function(m){var E={}.hasOwnProperty;m.exports=function(M,A){return E.call(M,A)}},function(m){m.exports={}},function(m,_,E){'use strict';var M=E(31),A=E(26),I=E(46),R={};E(17)(R,E(47)('iterator'),function(){return this}),m.exports=function(L,N,H){L.prototype=M(R,{next:A(1,H)}),I(L,N+' Iterator')}},function(m,_,E){var M=E(19),A=E(32),I=E(44),R=E(41)('IE_PROTO'),L=function(){},N='prototype',H=function(){var z=E(24)('iframe'),U=I.length,W='<',V='>',G;for(z.style.display='none',E(45).appendChild(z),z.src='javascript:',G=z.contentWindow.document,G.open(),G.write(W+'script'+V+'document.F=Object'+W+'/script'+V),G.close(),H=G.F;U--;)delete H[N][I[U]];return H()};m.exports=Object.create||function(U,W){var V;return null===U?V=H():(L[N]=M(U),V=new L,L[N]=null,V[R]=U),void 0===W?V:A(V,W)}},function(m,_,E){var M=E(18),A=E(19),I=E(33);m.exports=E(22)?Object.defineProperties:function(L,N){A(L);for(var H=I(N),z=H.length,U=0,W;z>U;)M.f(L,W=H[U++],N[W]);return L}},function(m,_,E){var M=E(34),A=E(44);m.exports=Object.keys||function(R){return M(R,A)}},function(m,_,E){var M=E(28),A=E(35),I=E(38)(!1),R=E(41)('IE_PROTO');m.exports=function(L,N){var H=A(L),z=0,U=[],W;for(W in H)W!=R&&M(H,W)&&U.push(W);for(;N.length>z;)M(H,W=N[z++])&&(~I(U,W)||U.push(W));return U}},function(m,_,E){var M=E(36),A=E(9);m.exports=function(I){return M(A(I))}},function(m,_,E){var M=E(37);m.exports=Object('z').propertyIsEnumerable(0)?Object:function(A){return'String'==M(A)?A.split(''):Object(A)}},function(m){var E={}.toString;m.exports=function(M){return E.call(M).slice(8,-1)}},function(m,_,E){var M=E(35),A=E(39),I=E(40);m.exports=function(R){return function(L,N,H){var z=M(L),U=A(z.length),W=I(H,U),V;if(R&&N!=N){for(;U>W;)if(V=z[W++],V!=V)return!0;}else for(;U>W;W++)if((R||W in z)&&z[W]===N)return R||W||0;return!R&&-1}}},function(m,_,E){var M=E(8),A=Math.min;m.exports=function(I){return 0<I?A(M(I),9007199254740991):0}},function(m,_,E){var M=E(8),A=Math.max,I=Math.min;m.exports=function(R,L){return R=M(R),0>R?A(R+L,0):I(R,L)}},function(m,_,E){var M=E(42)('keys'),A=E(43);m.exports=function(I){return M[I]||(M[I]=A(I))}},function(m,_,E){var M=E(13),A='__core-js_shared__',I=M[A]||(M[A]={});m.exports=function(R){return I[R]||(I[R]={})}},function(m){var E=0,M=Math.random();m.exports=function(A){return'Symbol('.concat(A===void 0?'':A,')_',(++E+M).toString(36))}},function(m){m.exports='constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'.split(',')},function(m,_,E){m.exports=E(13).document&&document.documentElement},function(m,_,E){var M=E(18).f,A=E(28),I=E(47)('toStringTag');m.exports=function(R,L,N){R&&!A(R=N?R:R.prototype,I)&&M(R,I,{configurable:!0,value:L})}},function(m,_,E){var M=E(42)('wks'),A=E(43),I=E(13).Symbol,R='function'==typeof I,L=m.exports=function(N){return M[N]||(M[N]=R&&I[N]||(R?I:A)('Symbol.'+N))};L.store=M},function(m,_,E){var M=E(28),A=E(49),I=E(41)('IE_PROTO'),R=Object.prototype;m.exports=Object.getPrototypeOf||function(L){return L=A(L),M(L,I)?L[I]:'function'==typeof L.constructor&&L instanceof L.constructor?L.constructor.prototype:L instanceof Object?R:null}},function(m,_,E){var M=E(9);m.exports=function(A){return Object(M(A))}},function(m,_,E){E(51);for(var M=E(13),A=E(17),I=E(29),R=E(47)('toStringTag'),L=['NodeList','DOMTokenList','MediaList','StyleSheetList','CSSRuleList'],N=0;5>N;N++){var H=L[N],z=M[H],U=z&&z.prototype;U&&!U[R]&&A(U,R,H),I[H]=I.Array}},function(m,_,E){'use strict';var M=E(52),A=E(53),I=E(29),R=E(35);m.exports=E(10)(Array,'Array',function(L,N){this._t=R(L),this._i=0,this._k=N},function(){var L=this._t,N=this._k,H=this._i++;return!L||H>=L.length?(this._t=void 0,A(1)):'keys'==N?A(0,H):'values'==N?A(0,L[H]):A(0,[H,L[H]])},'values'),I.Arguments=I.Array,M('keys'),M('values'),M('entries')},function(m){m.exports=function(){}},function(m){m.exports=function(E,M){return{value:M,done:!!E}}},function(m,_,E){'use strict';var M=E(11),A=E(13),I=E(15),R=E(55),L=E(12),N=E(20),H=E(16),z=E(56),U=E(57),W=E(61),V=E(62).set,G=E(64)(),X='Promise',Y=A.TypeError,K=A.process,J=A[X],K=A.process,Z='process'==R(K),Q=function(){},$,ee,te,ae=!!function(){try{var fe=J.resolve(1),he=(fe.constructor={})[E(47)('species')]=function(ve){ve(Q,Q)};return(Z||'function'==typeof PromiseRejectionEvent)&&fe.then(Q)instanceof he}catch(ve){}}(),oe=function(fe,he){return fe===he||fe===J&&he===te},ne=function(fe){var he;return N(fe)&&'function'==typeof(he=fe.then)&&he},ie=function(fe){return oe(J,fe)?new le(fe):new ee(fe)},le=ee=function(fe){var he,ve;this.promise=new fe(function(be,ye){if(he!=void 0||ve!=void 0)throw Y('Bad Promise constructor');he=be,ve=ye}),this.resolve=H(he),this.reject=H(ve)},se=function(fe){try{fe()}catch(he){return{error:he}}},ce=function(fe,he){if(!fe._n){fe._n=!0;var ve=fe._c;G(function(){for(var be=fe._v,ye=1==fe._s,_e=0,ke=function(xe){var Ce=ye?xe.ok:xe.fail,Ee=xe.resolve,Se=xe.reject,we=xe.domain,Oe,Pe;try{Ce?(!ye&&(2==fe._h&&pe(fe),fe._h=1),!0===Ce?Oe=be:(we&&we.enter(),Oe=Ce(be),we&&we.exit()),Oe===xe.promise?Se(Y('Promise-chain cycle')):(Pe=ne(Oe))?Pe.call(Oe,Ee,Se):Ee(Oe)):Se(be)}catch(Te){Se(Te)}};ve.length>_e;)ke(ve[_e++]);fe._c=[],fe._n=!1,he&&!fe._h&&de(fe)})}},de=function(fe){V.call(A,function(){var he=fe._v,ve,be,ye;if(ue(fe)&&(ve=se(function(){Z?K.emit('unhandledRejection',he,fe):(be=A.onunhandledrejection)?be({promise:fe,reason:he}):(ye=A.console)&&ye.error&&ye.error('Unhandled promise rejection',he)}),fe._h=Z||ue(fe)?2:1),fe._a=void 0,ve)throw ve.error})},ue=function(fe){if(1==fe._h)return!1;for(var he=fe._a||fe._c,ve=0,be;he.length>ve;)if(be=he[ve++],be.fail||!ue(be.promise))return!1;return!0},pe=function(fe){V.call(A,function(){var he;Z?K.emit('rejectionHandled',fe):(he=A.onrejectionhandled)&&he({promise:fe,reason:fe._v})})},ge=function(fe){var he=this;he._d||(he._d=!0,he=he._w||he,he._v=fe,he._s=2,!he._a&&(he._a=he._c.slice()),ce(he,!0))},me=function(fe){var he=this,ve;if(!he._d){he._d=!0,he=he._w||he;try{if(he===fe)throw Y('Promise can\'t be resolved itself');(ve=ne(fe))?G(function(){var be={_w:he,_d:!1};try{ve.call(fe,I(me,be,1),I(ge,be,1))}catch(ye){ge.call(be,ye)}}):(he._v=fe,he._s=1,ce(he,!1))}catch(be){ge.call({_w:he,_d:!1},be)}}};ae||(J=function(he){z(this,J,X,'_h'),H(he),$.call(this);try{he(I(me,this,1),I(ge,this,1))}catch(ve){ge.call(this,ve)}},$=function(){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},$.prototype=E(65)(J.prototype,{then:function(he,ve){var be=ie(W(this,J));return be.ok='function'!=typeof he||he,be.fail='function'==typeof ve&&ve,be.domain=Z?K.domain:void 0,this._c.push(be),this._a&&this._a.push(be),this._s&&ce(this,!1),be.promise},'catch':function(fe){return this.then(void 0,fe)}}),le=function(){var fe=new $;this.promise=fe,this.resolve=I(me,fe,1),this.reject=I(ge,fe,1)}),L(L.G+L.W+L.F*!ae,{Promise:J}),E(46)(J,X),E(66)(X),te=E(14)[X],L(L.S+L.F*!ae,X,{reject:function(he){var ve=ie(this),be=ve.reject;return be(he),ve.promise}}),L(L.S+L.F*(M||!ae),X,{resolve:function(he){if(he instanceof J&&oe(he.constructor,this))return he;var ve=ie(this),be=ve.resolve;return be(he),ve.promise}}),L(L.S+L.F*!(ae&&E(67)(function(fe){J.all(fe)['catch'](Q)})),X,{all:function(he){var ve=this,be=ie(ve),ye=be.resolve,_e=be.reject,ke=se(function(){var xe=[],Ce=0,Ee=1;U(he,!1,function(Se){var we=Ce++,Oe=!1;xe.push(void 0),Ee++,ve.resolve(Se).then(function(Pe){Oe||(Oe=!0,xe[we]=Pe,--Ee||ye(xe))},_e)}),--Ee||ye(xe)});return ke&&_e(ke.error),be.promise},race:function(he){var ve=this,be=ie(ve),ye=be.reject,_e=se(function(){U(he,!1,function(ke){ve.resolve(ke).then(be.resolve,ye)})});return _e&&ye(_e.error),be.promise}})},function(m,_,E){var M=E(37),A=E(47)('toStringTag'),I='Arguments'==M(function(){return arguments}()),R=function(L,N){try{return L[N]}catch(H){}};m.exports=function(L){var N,H,z;return L===void 0?'Undefined':null===L?'Null':'string'==typeof(H=R(N=Object(L),A))?H:I?M(N):'Object'==(z=M(N))&&'function'==typeof N.callee?'Arguments':z}},function(m){m.exports=function(E,M,A,I){if(!(E instanceof M)||I!==void 0&&I in E)throw TypeError(A+': incorrect invocation!');return E}},function(m,_,E){var M=E(15),A=E(58),I=E(59),R=E(19),L=E(39),N=E(60),H={},z={},_=m.exports=function(U,W,V,G,X){var Y=X?function(){return U}:N(U),K=M(V,G,W?2:1),J=0,Z,Q,$,ee;if('function'!=typeof Y)throw TypeError(U+' is not iterable!');if(I(Y)){for(Z=L(U.length);Z>J;J++)if(ee=W?K(R(Q=U[J])[0],Q[1]):K(U[J]),ee===H||ee===z)return ee;}else for($=Y.call(U);!(Q=$.next()).done;)if(ee=A($,K,Q.value,W),ee===H||ee===z)return ee};_.BREAK=H,_.RETURN=z},function(m,_,E){var M=E(19);m.exports=function(A,I,R,L){try{return L?I(M(R)[0],R[1]):I(R)}catch(H){var N=A['return'];throw void 0!==N&&M(N.call(A)),H}}},function(m,_,E){var M=E(29),A=E(47)('iterator'),I=Array.prototype;m.exports=function(R){return R!==void 0&&(M.Array===R||I[A]===R)}},function(m,_,E){var M=E(55),A=E(47)('iterator'),I=E(29);m.exports=E(14).getIteratorMethod=function(R){if(R!=void 0)return R[A]||R['@@iterator']||I[M(R)]}},function(m,_,E){var M=E(19),A=E(16),I=E(47)('species');m.exports=function(R,L){var N=M(R).constructor,H;return N===void 0||(H=M(N)[I])==void 0?L:A(H)}},function(m,_,E){var M=E(15),A=E(63),I=E(45),R=E(24),L=E(13),N=L.process,H=L.setImmediate,z=L.clearImmediate,U=L.MessageChannel,W=0,V={},G='onreadystatechange',X,Y,K,J=function(){var Q=+this;if(V.hasOwnProperty(Q)){var $=V[Q];delete V[Q],$()}},Z=function(Q){J.call(Q.data)};H&&z||(H=function($){for(var ee=[],te=1;arguments.length>te;)ee.push(arguments[te++]);return V[++W]=function(){A('function'==typeof $?$:Function($),ee)},X(W),W},z=function($){delete V[$]},'process'==E(37)(N)?X=function(Q){N.nextTick(M(J,Q,1))}:U?(Y=new U,K=Y.port2,Y.port1.onmessage=Z,X=M(K.postMessage,K,1)):L.addEventListener&&'function'==typeof postMessage&&!L.importScripts?(X=function(Q){L.postMessage(Q+'','*')},L.addEventListener('message',Z,!1)):G in R('script')?X=function(Q){I.appendChild(R('script'))[G]=function(){I.removeChild(this),J.call(Q)}}:X=function(Q){setTimeout(M(J,Q,1),0)}),m.exports={set:H,clear:z}},function(m){m.exports=function(E,M,A){var I=A===void 0;switch(M.length){case 0:return I?E():E.call(A);case 1:return I?E(M[0]):E.call(A,M[0]);case 2:return I?E(M[0],M[1]):E.call(A,M[0],M[1]);case 3:return I?E(M[0],M[1],M[2]):E.call(A,M[0],M[1],M[2]);case 4:return I?E(M[0],M[1],M[2],M[3]):E.call(A,M[0],M[1],M[2],M[3]);}return E.apply(A,M)}},function(m,_,E){var M=E(13),A=E(62).set,I=M.MutationObserver||M.WebKitMutationObserver,R=M.process,L=M.Promise,N='process'==E(37)(R);m.exports=function(){var H,z,U,W=function(){var Y,K;for(N&&(Y=R.domain)&&Y.exit();H;){K=H.fn,H=H.next;try{K()}catch(J){throw H?U():z=void 0,J}}z=void 0,Y&&Y.enter()};if(N)U=function(){R.nextTick(W)};else if(I){var V=!0,G=document.createTextNode('');new I(W).observe(G,{characterData:!0}),U=function(){G.data=V=!V}}else if(L&&L.resolve){var X=L.resolve();U=function(){X.then(W)}}else U=function(){A.call(M,W)};return function(Y){var K={fn:Y,next:void 0};z&&(z.next=K),H||(H=K,U()),z=K}}},function(m,_,E){var M=E(17);m.exports=function(A,I,R){for(var L in I)R&&A[L]?A[L]=I[L]:M(A,L,I[L]);return A}},function(m,_,E){'use strict';var M=E(13),A=E(14),I=E(18),R=E(22),L=E(47)('species');m.exports=function(N){var H='function'==typeof A[N]?A[N]:M[N];R&&H&&!H[L]&&I.f(H,L,{configurable:!0,get:function(){return this}})}},function(m,_,E){var M=E(47)('iterator'),A=!1;try{var I=[7][M]();I['return']=function(){A=!0},Array.from(I,function(){throw 2})}catch(R){}m.exports=function(R,L){if(!L&&!A)return!1;var N=!1;try{var H=[7],z=H[M]();z.next=function(){return{done:N=!0}},H[M]=function(){return z},R(H)}catch(U){}return N}},function(m,_,E){'use strict';function M(Q){return Q&&Q.__esModule?Q:{default:Q}}function A(Q,$){if(!(Q instanceof $))throw new TypeError('Cannot call a class as a function')}var I=function(){function Q($,ee){for(var te=0,ae;te<ee.length;te++)ae=ee[te],ae.enumerable=ae.enumerable||!1,ae.configurable=!0,'value'in ae&&(ae.writable=!0),Object.defineProperty($,ae.key,ae)}return function($,ee,te){return ee&&Q($.prototype,ee),te&&Q($,te),$}}(),R=E(3),L=M(R),N=E(4),H=M(N),z=E(69),U=M(z),W=E(73),V=M(W),G=V.default.eventNames,X=V.default.rejectMessages,Y=L.default.isFunction,K=L.default.isString,J=L.default.CustomEvents,Z=function(){function Q(){A(this,Q),this._undoStack=[],this._redoStack=[],this._isLocked=!1}return I(Q,[{key:'_invokeExecution',value:function(ee){var te=this;this.lock();var ae=ee.args;return ae||(ae=[]),ee.execute.apply(ee,ae).then(function(oe){return te.pushUndoStack(ee),te.unlock(),Y(ee.executeCallback)&&ee.executeCallback(oe),oe})['catch'](function(oe){return te.unlock(),H.default.reject(oe)})}},{key:'_invokeUndo',value:function(ee){var te=this;this.lock();var ae=ee.args;return ae||(ae=[]),ee.undo.apply(ee,ae).then(function(oe){return te.pushRedoStack(ee),te.unlock(),Y(ee.undoCallback)&&ee.undoCallback(oe),oe})['catch'](function(oe){return te.unlock(),H.default.reject(oe)})}},{key:'_fireRedoStackChanged',value:function(){this.fire(G.REDO_STACK_CHANGED,this._redoStack.length)}},{key:'_fireUndoStackChanged',value:function(){this.fire(G.UNDO_STACK_CHANGED,this._undoStack.length)}},{key:'lock',value:function(){this._isLocked=!0}},{key:'unlock',value:function(){this._isLocked=!1}},{key:'execute',value:function(){var ee=this;if(this._isLocked)return H.default.reject(X.isLock);for(var te=arguments.length,ae=Array(te),oe=0;oe<te;oe++)ae[oe]=arguments[oe];var ne=ae[0];return K(ne)&&(ne=U.default.create.apply(U.default,ae)),this._invokeExecution(ne).then(function(ie){return ee.clearRedoStack(),ie})}},{key:'undo',value:function(){var ee=this._undoStack.pop(),ae='',te;return ee&&this._isLocked&&(this.pushUndoStack(ee,!0),ee=null),ee?(this.isEmptyUndoStack()&&this._fireUndoStackChanged(),te=this._invokeUndo(ee)):(ae=X.undo,this._isLocked&&(ae=ae+' Because '+X.isLock),te=H.default.reject(ae)),te}},{key:'redo',value:function(){var ee=this._redoStack.pop(),ae='',te;return ee&&this._isLocked&&(this.pushRedoStack(ee,!0),ee=null),ee?(this.isEmptyRedoStack()&&this._fireRedoStackChanged(),te=this._invokeExecution(ee)):(ae=X.redo,this._isLocked&&(ae=ae+' Because '+X.isLock),te=H.default.reject(ae)),te}},{key:'pushUndoStack',value:function(ee,te){this._undoStack.push(ee),te||this._fireUndoStackChanged()}},{key:'pushRedoStack',value:function(ee,te){this._redoStack.push(ee),te||this._fireRedoStackChanged()}},{key:'isEmptyRedoStack',value:function(){return 0===this._redoStack.length}},{key:'isEmptyUndoStack',value:function(){return 0===this._undoStack.length}},{key:'clearUndoStack',value:function(){this.isEmptyUndoStack()||(this._undoStack=[],this._fireUndoStackChanged())}},{key:'clearRedoStack',value:function(){this.isEmptyRedoStack()||(this._redoStack=[],this._fireRedoStackChanged())}}]),Q}();J.mixin(Z),m.exports=Z},function(m,_,E){'use strict';var R=E(70),L=function(H){return H&&H.__esModule?H:{default:H}}(R),N={};m.exports={create:function(H){var z=N[H];if(z){for(var U=arguments.length,W=Array(1<U?U-1:0),V=1;V<U;V++)W[V-1]=arguments[V];return new L.default(z,W)}return null},register:function(H){N[H.name]=H}}},function(m,_,E){'use strict';function A(U,W){if(!(U instanceof W))throw new TypeError('Cannot call a class as a function')}var I=function(){function U(W,V){for(var G=0,X;G<V.length;G++)X=V[G],X.enumerable=X.enumerable||!1,X.configurable=!0,'value'in X&&(X.writable=!0),Object.defineProperty(W,X.key,X)}return function(W,V,G){return V&&U(W.prototype,V),G&&U(W,G),W}}(),R=E(71),L=function(U){return U&&U.__esModule?U:{default:U}}(R),N=L.default.create,H=L.default.types,z=function(){function U(W,V){A(this,U),this.name=W.name,this.args=V,this.execute=W.execute,this.undo=W.undo,this.executeCallback=W.executeCallback||null,this.undoCallback=W.undoCallback||null,this.undoData={}}return I(U,[{key:'execute',value:function(){throw new Error(N(H.UN_IMPLEMENTATION,'execute'))}},{key:'undo',value:function(){throw new Error(N(H.UN_IMPLEMENTATION,'undo'))}},{key:'setExecuteCallback',value:function(V){return this.executeCallback=V,this}},{key:'setUndoCallback',value:function(V){return this.undoCallback=V,this}}]),U}();m.exports=z},function(m,_,E){'use strict';var A=E(3),I=function(z){return z&&z.__esModule?z:{default:z}}(A),R=E(72),L=(0,R.keyMirror)('UN_IMPLEMENTATION','NO_COMPONENT_NAME'),N={UN_IMPLEMENTATION:'Should implement a method: ',NO_COMPONENT_NAME:'Should set a component name'},H={UN_IMPLEMENTATION:function(U){return N.UN_IMPLEMENTATION+U},NO_COMPONENT_NAME:function(){return N.NO_COMPONENT_NAME}};m.exports={types:I.default.extend({},L),create:function(U){U=U.toLowerCase();for(var W=H[U],V=arguments.length,G=Array(1<V?V-1:0),X=1;X<V;X++)G[X-1]=arguments[X];return W.apply(void 0,G)}}},function(m,_,E){'use strict';var M=E(3),A=Math.min,I=Math.max,R=!1;m.exports={clamp:function(N,H,z){var U;return H>z&&(U=H,H=z,z=U),I(H,A(N,z))},keyMirror:function(){for(var N={},H=arguments.length,z=Array(H),U=0;U<H;U++)z[U]=arguments[U];return(0,M.forEach)(z,function(W){N[W]=W}),N},makeStyleText:function(N){var H='';return(0,M.forEach)(N,function(z,U){H+=U+': '+z+';'}),H},getProperties:function(N,H){var z={},U=H.length,W=0,V;for(W=0;W<U;W+=1)V=H[W],z[V]=N[V];return z},toInteger:function(N){return parseInt(N,10)},toCamelCase:function(N){return N.replace(/-([a-z])/g,function(H,z){return z.toUpperCase()})},isSupportFileApi:function(){return!!(window.File&&window.FileList&&window.FileReader)},getRgb:function(N,H){4===N.length&&(N=''+N+N.slice(1,4));var z=parseInt(N.slice(1,3),16),U=parseInt(N.slice(3,5),16),W=parseInt(N.slice(5,7),16);return'rgba('+z+', '+U+', '+W+', '+(H||1)+')'},sendHostName:function(){R||(R=!0,(0,M.sendHostname)('image-editor','UA-129999381-1'))},styleLoad:function(N,H){var z=document.getElementsByTagName('head'),U=z[0],W=document.createElement('link'),V=encodeURIComponent(N);H&&(W.id=H),W.setAttribute('rel','stylesheet'),W.setAttribute('type','text/css'),W.setAttribute('href','data:text/css;charset=UTF-8,'+V),U.appendChild(W)},getSelector:function(N){return function(H){return N.querySelector(H)}},base64ToBlob:function(N){var H=/data:(image\/.+);base64,/,z='',U,W,V;U=N.replace(H,function(X,Y){return z=Y,''}),U=atob(U);var G=U.length;for(W=new Uint8Array(G),V=0;V<G;V+=1)W[V]=U.charCodeAt(V);return new Blob([W],{type:z})}}},function(m,_,E){'use strict';var A=E(72),I=function(R){return R&&R.__esModule?R:{default:R}}(A);m.exports={componentNames:I.default.keyMirror('IMAGE_LOADER','CROPPER','FLIP','ROTATION','FREE_DRAWING','LINE','TEXT','ICON','FILTER','SHAPE'),commandNames:{CLEAR_OBJECTS:'clearObjects',LOAD_IMAGE:'loadImage',FLIP_IMAGE:'flip',ROTATE_IMAGE:'rotate',ADD_OBJECT:'addObject',REMOVE_OBJECT:'removeObject',APPLY_FILTER:'applyFilter',REMOVE_FILTER:'removeFilter',ADD_ICON:'addIcon',CHANGE_ICON_COLOR:'changeIconColor',ADD_SHAPE:'addShape',CHANGE_SHAPE:'changeShape',ADD_TEXT:'addText',CHANGE_TEXT:'changeText',CHANGE_TEXT_STYLE:'changeTextStyle',ADD_IMAGE_OBJECT:'addImageObject',RESIZE_CANVAS_DIMENSION:'resizeCanvasDimension',SET_OBJECT_PROPERTIES:'setObjectProperties',SET_OBJECT_POSITION:'setObjectPosition'},eventNames:{OBJECT_ACTIVATED:'objectActivated',OBJECT_MOVED:'objectMoved',OBJECT_SCALED:'objectScaled',OBJECT_CREATED:'objectCreated',TEXT_EDITING:'textEditing',TEXT_CHANGED:'textChanged',ICON_CREATE_RESIZE:'iconCreateResize',ICON_CREATE_END:'iconCreateEnd',ADD_TEXT:'addText',ADD_OBJECT:'addObject',ADD_OBJECT_AFTER:'addObjectAfter',MOUSE_DOWN:'mousedown',MOUSE_UP:'mouseup',MOUSE_MOVE:'mousemove',REDO_STACK_CHANGED:'redoStackChanged',UNDO_STACK_CHANGED:'undoStackChanged',SELECTION_CLEARED:'selectionCleared',SELECTION_CREATED:'selectionCreated'},drawingModes:I.default.keyMirror('NORMAL','CROPPER','FREE_DRAWING','LINE_DRAWING','TEXT','SHAPE'),keyCodes:{Z:90,Y:89,SHIFT:16,BACKSPACE:8,DEL:46},fObjectOptions:{SELECTION_STYLE:{borderColor:'red',cornerColor:'green',cornerSize:10,originX:'center',originY:'center',transparentCorners:!1}},rejectMessages:{flip:'The flipX and flipY setting values are not changed.',rotation:'The current angle is same the old angle.',loadImage:'The background image is empty.',isLock:'The executing command state is locked.',undo:'The promise of undo command is reject.',redo:'The promise of redo command is reject.',invalidDrawingMode:'This operation is not supported in the drawing mode',invalidParameters:'Invalid parameters',noActiveObject:'There is no active object.',unsupportedType:'Unsupported object type',noObject:'The object is not in canvas.',addedObject:'The object is already added.'},defaultIconPath:{'icon-arrow':'M40 12V0l24 24-24 24V36H0V12h40z','icon-arrow-2':'M49,32 H3 V22 h46 l-18,-18 h12 l23,23 L43,50 h-12 l18,-18  z ','icon-arrow-3':'M43.349998,27 L17.354,53 H1.949999 l25.996,-26 L1.949999,1 h15.404 L43.349998,27  z ','icon-star':'M35,54.557999 l-19.912001,10.468 l3.804,-22.172001 l-16.108,-15.7 l22.26,-3.236 L35,3.746 l9.956,20.172001 l22.26,3.236 l-16.108,15.7 l3.804,22.172001  z ','icon-star-2':'M17,31.212 l-7.194,4.08 l-4.728,-6.83 l-8.234,0.524 l-1.328,-8.226 l-7.644,-3.14 l2.338,-7.992 l-5.54,-6.18 l5.54,-6.176 l-2.338,-7.994 l7.644,-3.138 l1.328,-8.226 l8.234,0.522 l4.728,-6.83 L17,-24.312 l7.194,-4.08 l4.728,6.83 l8.234,-0.522 l1.328,8.226 l7.644,3.14 l-2.338,7.992 l5.54,6.178 l-5.54,6.178 l2.338,7.992 l-7.644,3.14 l-1.328,8.226 l-8.234,-0.524 l-4.728,6.83  z ','icon-polygon':'M3,31 L19,3 h32 l16,28 l-16,28 H19  z ','icon-location':'M24 62C8 45.503 0 32.837 0 24 0 10.745 10.745 0 24 0s24 10.745 24 24c0 8.837-8 21.503-24 38zm0-28c5.523 0 10-4.477 10-10s-4.477-10-10-10-10 4.477-10 10 4.477 10 10 10z','icon-heart':'M49.994999,91.349998 l-6.96,-6.333 C18.324001,62.606995 2.01,47.829002 2.01,29.690998 C2.01,14.912998 13.619999,3.299999 28.401001,3.299999 c8.349,0 16.362,5.859 21.594,12 c5.229,-6.141 13.242001,-12 21.591,-12 c14.778,0 26.390999,11.61 26.390999,26.390999 c0,18.138 -16.314001,32.916 -41.025002,55.374001 l-6.96,6.285  z ','icon-bubble':'M44 48L34 58V48H12C5.373 48 0 42.627 0 36V12C0 5.373 5.373 0 12 0h40c6.627 0 12 5.373 12 12v24c0 6.627-5.373 12-12 12h-8z'},defaultRotateRangeValus:{realTimeEvent:!0,min:-360,max:360,value:0},defaultDrawRangeValus:{min:5,max:30,value:12},defaultShapeStrokeValus:{realTimeEvent:!1,min:2,max:300,value:3},defaultTextRangeValus:{realTimeEvent:!0,min:10,max:100,value:50},defaultFilterRangeValus:{tintOpacityRange:{min:0,max:1,value:0.7},removewhiteThresholdRange:{min:0,max:255,value:60},removewhiteDistanceRange:{min:0,max:255,value:10},gradientTransparencyRange:{min:0,max:255,value:100},brightnessRange:{min:-255,max:255,value:100},noiseRange:{min:0,max:1e3,value:100},pixelateRange:{min:2,max:20,value:4},colorfilterThresholeRange:{min:0,max:255,value:45}}}},function(m,_,E){'use strict';function M(he){return he&&he.__esModule?he:{default:he}}function A(he,ve){if(!(he instanceof ve))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(_,'__esModule',{value:!0});var I=function(){function he(ve,be){for(var ye=0,_e;ye<be.length;ye++)_e=be[ye],_e.enumerable=_e.enumerable||!1,_e.configurable=!0,'value'in _e&&(_e.writable=!0),Object.defineProperty(ve,_e.key,_e)}return function(ve,be,ye){return be&&he(ve.prototype,be),ye&&he(ve,ye),ve}}(),R=E(3),L=M(R),N=E(72),H=M(N),z=E(75),U=M(z),W=E(76),V=M(W),G=E(77),X=M(G),Y=E(80),K=M(Y),J=E(86),Z=M(J),Q=E(88),$=M(Q),ee=E(90),te=M(ee),ae=E(92),oe=M(ae),ne=E(94),ie=M(ne),le=E(96),se=M(le),ce=E(98),de=M(ce),ue=E(100),pe=M(ue),ge={Shape:K.default,Crop:Z.default,Flip:$.default,Rotate:te.default,Text:oe.default,Mask:ie.default,Icon:se.default,Draw:de.default,Filter:pe.default},fe=function(){function he(ve,be,ye){A(this,he),this.options=this._initializeOption(be),this._actions=ye,this.submenu=!1,this.imageSize={},this.uiSize={},this.theme=new X.default(this.options.theme),this._submenuChangeTransection=!1,this._selectedElement=null,this._mainElement=null,this._editorElementWrap=null,this._editorElement=null,this._menuElement=null,this._subMenuElement=null,this._makeUiElement(ve),this._setUiSize(),this._initMenuEvent=!1,this._els={undo:this._menuElement.querySelector('#tie-btn-undo'),redo:this._menuElement.querySelector('#tie-btn-redo'),reset:this._menuElement.querySelector('#tie-btn-reset'),'delete':this._menuElement.querySelector('#tie-btn-delete'),deleteAll:this._menuElement.querySelector('#tie-btn-delete-all'),download:this._selectedElement.querySelectorAll('.tui-image-editor-download-btn'),load:this._selectedElement.querySelectorAll('.tui-image-editor-load-btn')},this._makeSubMenu()}return I(he,[{key:'setUiDefaultSelectionStyle',value:function(be){return L.default.extend({applyCropSelectionStyle:!0,applyGroupSelectionStyle:!0,selectionStyle:{cornerStyle:'circle',cornerSize:16,cornerColor:'#fff',cornerStrokeColor:'#fff',transparentCorners:!1,lineWidth:2,borderColor:'#fff'}},be)}},{key:'resizeEditor',value:function(){var be=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},ye=be.uiSize,_e=be.imageSize,ke=void 0===_e?this.imageSize:_e;ke!==this.imageSize&&(this.imageSize=ke),ye&&this._setUiSize(ye);var xe=this._getEditorDimension(),Ce=xe.width,Ee=xe.height,Se=this._editorElement.style,we=this.options.menuBarPosition;Se.height=Ee+'px',Se.width=Ce+'px',this._setEditorPosition(we),this._editorElementWrap.style.bottom='0px',this._editorElementWrap.style.top='0px',this._editorElementWrap.style.left='0px',this._editorElementWrap.style.width='100%';var Oe=this._selectedElement.classList;'top'===we&&this._selectedElement.offsetWidth<'1300'?Oe.add('tui-image-editor-top-optimization'):Oe.remove('tui-image-editor-top-optimization')}},{key:'changeUndoButtonStatus',value:function(be){be?this._els.undo.classList.add('enabled'):this._els.undo.classList.remove('enabled')}},{key:'changeRedoButtonStatus',value:function(be){be?this._els.redo.classList.add('enabled'):this._els.redo.classList.remove('enabled')}},{key:'changeResetButtonStatus',value:function(be){be?this._els.reset.classList.add('enabled'):this._els.reset.classList.remove('enabled')}},{key:'changeDeleteAllButtonEnabled',value:function(be){be?this._els.deleteAll.classList.add('enabled'):this._els.deleteAll.classList.remove('enabled')}},{key:'changeDeleteButtonEnabled',value:function(be){be?this._els['delete'].classList.add('enabled'):this._els['delete'].classList.remove('enabled')}},{key:'_initializeOption',value:function(be){return L.default.extend({loadImage:{path:'',name:''},menuIconPath:'',menu:['crop','flip','rotate','draw','shape','icon','text','mask','filter'],initMenu:!1,uiSize:{width:'100%',height:'100%'},menuBarPosition:'bottom'},be)}},{key:'_setUiSize',value:function(){var be=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.options.uiSize,ye=this._selectedElement.style;ye.width=be.width,ye.height=be.height}},{key:'_makeSubMenu',value:function(){var be=this;L.default.forEach(this.options.menu,function(ye){var _e=ge[ye.replace(/^[a-z]/,function(ke){return ke.toUpperCase()})];be._makeMenuElement(ye),be._els[ye]=be._menuElement.querySelector('#tie-btn-'+ye),be[ye]=new _e(be._subMenuElement,{iconStyle:be.theme.getStyle('submenu.icon'),menuBarPosition:be.options.menuBarPosition})})}},{key:'_makeUiElement',value:function(be){var ye;window.snippet=L.default,ye=be.jquery?be[0]:be.nodeType?be:document.querySelector(be);var _e=H.default.getSelector(ye);ye.classList.add('tui-image-editor-container'),ye.innerHTML=(0,V.default)({biImage:this.theme.getStyle('common.bi'),iconStyle:this.theme.getStyle('menu.icon'),loadButtonStyle:this.theme.getStyle('loadButton'),downloadButtonStyle:this.theme.getStyle('downloadButton')})+(0,U.default)({biImage:this.theme.getStyle('common.bi'),commonStyle:this.theme.getStyle('common'),headerStyle:this.theme.getStyle('header'),loadButtonStyle:this.theme.getStyle('loadButton'),downloadButtonStyle:this.theme.getStyle('downloadButton'),submenuStyle:this.theme.getStyle('submenu')}),this._selectedElement=ye,this._selectedElement.classList.add(this.options.menuBarPosition),this._mainElement=_e('.tui-image-editor-main'),this._editorElementWrap=_e('.tui-image-editor-wrap'),this._editorElement=_e('.tui-image-editor'),this._menuElement=_e('.tui-image-editor-menu'),this._subMenuElement=_e('.tui-image-editor-submenu')}},{key:'_makeMenuElement',value:function(be){var ye=document.createElement('li'),_e=this.theme.getStyle('menu.icon'),ke=_e.normal,xe=_e.active,Ce=_e.hover,Ee='\n            <svg class="svg_ic-menu">\n                <use xlink:href="'+ke.path+'#'+ke.name+'-ic-'+be+'" class="normal"/>\n                <use xlink:href="'+xe.path+'#'+xe.name+'-ic-'+be+'" class="active"/>\n                <use xlink:href="'+Ce.path+'#'+Ce.name+'-ic-'+be+'" class="hover"/>\n            </svg>\n        ';ye.id='tie-btn-'+be,ye.className='tui-image-editor-item normal',ye.title=be.replace(/^[a-z]/g,function(Se){return Se.toUpperCase()}),ye.innerHTML=Ee,this._menuElement.appendChild(ye)}},{key:'_addHelpActionEvent',value:function(be){var ye=this;this._els[be].addEventListener('click',function(){ye._actions.main[be]()})}},{key:'_addDownloadEvent',value:function(){var be=this;L.default.forEach(this._els.download,function(ye){ye.addEventListener('click',function(){be._actions.main.download()})})}},{key:'_addLoadEvent',value:function(){var be=this;L.default.forEach(this._els.load,function(ye){ye.addEventListener('change',function(_e){be._actions.main.load(_e.target.files[0])})})}},{key:'_addMenuEvent',value:function(be){var ye=this;this._els[be].addEventListener('click',function(){ye.changeMenu(be)})}},{key:'_addSubMenuEvent',value:function(be){this[be].addEvent(this._actions[be])}},{key:'getEditorArea',value:function(){return this._editorElement}},{key:'activeMenuEvent',value:function(){var be=this;this._initMenuEvent||(this._addHelpActionEvent('undo'),this._addHelpActionEvent('redo'),this._addHelpActionEvent('reset'),this._addHelpActionEvent('delete'),this._addHelpActionEvent('deleteAll'),this._addDownloadEvent(),L.default.forEach(this.options.menu,function(ye){be._addMenuEvent(ye),be._addSubMenuEvent(ye)}),this._initMenu(),this._initMenuEvent=!0)}},{key:'initCanvas',value:function(){var be=this,ye=this._getLoadImage();ye.path&&this._actions.main.initLoadImage(ye.path,ye.name).then(function(){be.activeMenuEvent()}),this._addLoadEvent();var _e=document.createElement('div');_e.className='tui-image-editor-grid-visual';_e.innerHTML='<table>\n           <tr><td class="dot left-top"></td><td></td><td class="dot right-top"></td></tr>\n           <tr><td></td><td></td><td></td></tr>\n           <tr><td class="dot left-bottom"></td><td></td><td class="dot right-bottom"></td></tr>\n         </table>',this._editorContainerElement=this._editorElement.querySelector('.tui-image-editor-canvas-container'),this._editorContainerElement.appendChild(_e)}},{key:'_getLoadImage',value:function(){return this.options.loadImage}},{key:'changeMenu',value:function(be){var ye=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0,_e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!0;this._submenuChangeTransection||(this._submenuChangeTransection=!0,this._changeMenu(be,ye,_e),this._submenuChangeTransection=!1)}},{key:'_changeMenu',value:function(be,ye,_e){this.submenu&&(this._els[this.submenu].classList.remove('active'),this._mainElement.classList.remove('tui-image-editor-menu-'+this.submenu),_e&&this._actions.main.discardSelection(),this._actions.main.changeSelectableAll(!0),this[this.submenu].changeStandbyMode()),this.submenu===be&&ye?this.submenu=null:(this._els[be].classList.add('active'),this._mainElement.classList.add('tui-image-editor-menu-'+be),this.submenu=be,this[this.submenu].changeStartMode()),this.resizeEditor()}},{key:'_initMenu',value:function(){if(this.options.initMenu){var be=document.createEvent('MouseEvents');be.initEvent('click',!0,!1),this._els[this.options.initMenu].dispatchEvent(be),this.icon&&this.icon.registDefaultIcon()}}},{key:'_getEditorDimension',value:function(){var be=parseFloat(this._editorContainerElement.style.maxHeight),ye=this.imageSize.newHeight>be?be:this.imageSize.newHeight,_e=parseFloat(this._editorContainerElement.style.maxWidth),ke=this.imageSize.newWidth>_e?_e:this.imageSize.newWidth;return{width:ke,height:ye}}},{key:'_setEditorPosition',value:function(be){var ye=this._getEditorDimension(),_e=ye.width,ke=ye.height,xe=this._editorElement.style,Ce=0,Ee=0;this.submenu&&('bottom'===be?ke>this._editorElementWrap.scrollHeight-150?Ce=(ke-this._editorElementWrap.scrollHeight)/2:Ce=-75:'top'===be?ke>this._editorElementWrap.offsetHeight-150?Ce=75-(ke-(this._editorElementWrap.offsetHeight-150))/2:Ce=75:'left'===be?_e>this._editorElementWrap.offsetWidth-248?Ee=124-(_e-(this._editorElementWrap.offsetWidth-248))/2:Ee=124:'right'==be&&(_e>this._editorElementWrap.scrollWidth-248?Ee=(_e-this._editorElementWrap.scrollWidth)/2:Ee=-124)),xe.top=Ce+'px',xe.left=Ee+'px'}}]),he}();_.default=fe},function(m,_){'use strict';Object.defineProperty(_,'__esModule',{value:!0}),_.default=function(E){var M=E.biImage,A=E.commonStyle,I=E.headerStyle,R=E.loadButtonStyle,L=E.downloadButtonStyle,N=E.submenuStyle;return'\n    <div class="tui-image-editor-main-container" style="'+A+'">\n        <div class="tui-image-editor-header" style="'+I+'">\n            <div class="tui-image-editor-header-logo">\n                <img src="'+M+'" />\n            </div>\n            <div class="tui-image-editor-header-buttons">\n                <button style="'+R+'">\n                    Load\n                </button><input type="file" class="tui-image-editor-load-btn" />\n                <button class="tui-image-editor-download-btn" style="'+L+'">\n                    Download\n                </button>\n            </div>\n        </div>\n        <div class="tui-image-editor-main">\n            <div class="tui-image-editor-submenu">\n                <div class="tui-image-editor-submenu-style" style="'+N+'"></div>\n            </div>\n            <div class="tui-image-editor-wrap">\n                <div class="tui-image-editor-size-wrap">\n                    <div class="tui-image-editor-align-wrap">\n                        <div class="tui-image-editor"></div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n'}},function(m,_){'use strict';Object.defineProperty(_,'__esModule',{value:!0}),_.default=function(E){var M=E.biImage,A=E.iconStyle,I=A.normal,R=A.hover,L=A.disabled,N=E.loadButtonStyle,H=E.downloadButtonStyle;return'\n    <div class="tui-image-editor-controls">\n        <div class="tui-image-editor-controls-logo">\n            <img src="'+M+'" />\n        </div>\n        <ul class="tui-image-editor-menu">\n            <li id="tie-btn-undo" class="tui-image-editor-item" title="Undo">\n                <svg class="svg_ic-menu">\n                    <use xlink:href="'+I.path+'#'+I.name+'-ic-undo" class="enabled"/>\n                    <use xlink:href="'+L.path+'#'+L.name+'-ic-undo" class="normal"/>\n                    <use xlink:href="'+R.path+'#'+R.name+'-ic-undo" class="hover"/>\n                </svg>\n            </li>\n            <li id="tie-btn-redo" class="tui-image-editor-item" title="Redo">\n                <svg class="svg_ic-menu">\n                    <use xlink:href="'+I.path+'#'+I.name+'-ic-redo" class="enabled"/>\n                    <use xlink:href="'+L.path+'#'+L.name+'-ic-redo" class="normal"/>\n                    <use xlink:href="'+R.path+'#'+R.name+'-ic-redo" class="hover"/>\n                </svg>\n            </li>\n            <li id="tie-btn-reset" class="tui-image-editor-item" title="Reset">\n                <svg class="svg_ic-menu">\n                    <use xlink:href="'+I.path+'#'+I.name+'-ic-reset" class="enabled"/>\n                    <use xlink:href="'+L.path+'#'+L.name+'-ic-reset" class="normal"/>\n                    <use xlink:href="'+R.path+'#'+R.name+'-ic-reset" class="hover"/>\n                </svg>\n            </li>\n            <li class="tui-image-editor-item">\n                <div class="tui-image-editor-icpartition"></div>\n            </li>\n            <li id="tie-btn-delete" class="tui-image-editor-item" title="Delete">\n                <svg class="svg_ic-menu">\n                    <use xlink:href="'+I.path+'#'+I.name+'-ic-delete" class="enabled"/>\n                    <use xlink:href="'+L.path+'#'+L.name+'-ic-delete" class="normal"/>\n                    <use xlink:href="'+R.path+'#'+R.name+'-ic-delete" class="hover"/>\n                </svg>\n            </li>\n            <li id="tie-btn-delete-all" class="tui-image-editor-item" title="Delete-all">\n                <svg class="svg_ic-menu">\n                    <use xlink:href="'+I.path+'#'+I.name+'-ic-delete-all" class="enabled"/>\n                    <use xlink:href="'+L.path+'#'+L.name+'-ic-delete-all" class="normal"/>\n                    <use xlink:href="'+R.path+'#'+R.name+'-ic-delete-all" class="hover"/>\n                </svg>\n            </li>\n            <li class="tui-image-editor-item">\n                <div class="tui-image-editor-icpartition"></div>\n            </li>\n        </ul>\n\n        <div class="tui-image-editor-controls-buttons">\n            <button style="'+N+'">\n                Load\n            </button><input type="file" class="tui-image-editor-load-btn" />\n            <button class="tui-image-editor-download-btn" style="'+H+'">\n                Download\n            </button>\n        </div>\n    </div>\n'}},function(m,_,E){'use strict';function M(V){return V&&V.__esModule?V:{default:V}}function A(V,G){if(!(V instanceof G))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(_,'__esModule',{value:!0});var I=function(){function V(G,X){for(var Y=0,K;Y<X.length;Y++)K=X[Y],K.enumerable=K.enumerable||!1,K.configurable=!0,'value'in K&&(K.writable=!0),Object.defineProperty(G,K.key,K)}return function(G,X,Y){return X&&V(G.prototype,X),Y&&V(G,Y),G}}(),R=E(3),L=E(72),N=E(78),H=M(N),z=E(79),U=M(z),W=function(){function V(G){A(this,V),this.styles=this._changeToObject((0,R.extend)(U.default,G)),(0,L.styleLoad)(this._styleMaker())}return I(V,[{key:'getStyle',value:function(X){var Y=null,K=X.replace(/\..+$/,''),J=this.styles[X];return'common.bi'===X?Y=this.styles[X].image:'menu.icon'===X||'submenu.icon'===X?Y={active:this.styles[K+'.activeIcon'],normal:this.styles[K+'.normalIcon'],hover:this.styles[K+'.hoverIcon'],disabled:this.styles[K+'.disabledIcon']}:'submenu.label'===X?Y={active:this._makeCssText(this.styles[K+'.activeLabel']),normal:this._makeCssText(this.styles[K+'.normalLabel'])}:'submenu.partition'===X?Y={vertical:this._makeCssText((0,R.extend)({},J,{borderLeft:'1px solid '+J.color})),horizontal:this._makeCssText((0,R.extend)({},J,{borderBottom:'1px solid '+J.color}))}:'range.disabledPointer'===X||'range.disabledBar'===X||'range.disabledSubbar'===X||'range.pointer'===X||'range.bar'===X||'range.subbar'===X?(J.backgroundColor=J.color,Y=this._makeCssText(J)):Y=this._makeCssText(J),Y}},{key:'_styleMaker',value:function(){var X=this.getStyle('submenu.label'),Y=this.getStyle('submenu.partition');return(0,H.default)({subMenuLabelActive:X.active,subMenuLabelNormal:X.normal,submenuPartitionVertical:Y.vertical,submenuPartitionHorizontal:Y.horizontal,biSize:this.getStyle('common.bisize'),subMenuRangeTitle:this.getStyle('range.title'),submenuRangePointer:this.getStyle('range.pointer'),submenuRangeBar:this.getStyle('range.bar'),submenuRangeSubbar:this.getStyle('range.subbar'),submenuDisabledRangePointer:this.getStyle('range.disabledPointer'),submenuDisabledRangeBar:this.getStyle('range.disabledBar'),submenuDisabledRangeSubbar:this.getStyle('range.disabledSubbar'),submenuRangeValue:this.getStyle('range.value'),submenuColorpickerTitle:this.getStyle('colorpicker.title'),submenuColorpickerButton:this.getStyle('colorpicker.button'),submenuCheckbox:this.getStyle('checkbox'),menuIconSize:this.getStyle('menu.iconSize'),submenuIconSize:this.getStyle('submenu.iconSize')})}},{key:'_changeToObject',value:function(X){var Y={};return(0,R.forEach)(X,function(K,J){var Z=J.match(/^(.+)\.([a-z]+)$/i),Q=Z[1],$=Z[2];Y[Q]||(Y[Q]={}),Y[Q][$]=K}),Y}},{key:'_makeCssText',value:function(X){var Y=this,K=[];return(0,R.forEach)(X,function(J,Z){-1<['backgroundImage'].indexOf(Z)&&'none'!==J&&(J='url('+J+')'),K.push(Y._toUnderScore(Z)+': '+J)}),K.join(';')}},{key:'_toUnderScore',value:function(X){return X.replace(/([A-Z])/g,function(Y,K){return'-'+K.toLowerCase()})}}]),V}();_.default=W},function(m,_){'use strict';Object.defineProperty(_,'__esModule',{value:!0}),_.default=function(E){var M=E.subMenuLabelActive,A=E.subMenuLabelNormal,I=E.subMenuRangeTitle,R=E.submenuPartitionVertical,L=E.submenuPartitionHorizontal,N=E.submenuCheckbox,H=E.submenuRangePointer,z=E.submenuRangeValue,U=E.submenuColorpickerTitle,W=E.submenuColorpickerButton,V=E.submenuRangeBar,G=E.submenuRangeSubbar,X=E.submenuDisabledRangePointer,Y=E.submenuDisabledRangeBar,K=E.submenuDisabledRangeSubbar,J=E.submenuIconSize,Z=E.menuIconSize,Q=E.biSize;return'\n    #tie-icon-add-button.icon-bubble .tui-image-editor-button[data-icontype="icon-bubble"] label,\n    #tie-icon-add-button.icon-heart .tui-image-editor-button[data-icontype="icon-heart"] label,\n    #tie-icon-add-button.icon-location .tui-image-editor-button[data-icontype="icon-location"] label,\n    #tie-icon-add-button.icon-polygon .tui-image-editor-button[data-icontype="icon-polygon"] label,\n    #tie-icon-add-button.icon-star .tui-image-editor-button[data-icontype="icon-star"] label,\n    #tie-icon-add-button.icon-arrow-3 .tui-image-editor-button[data-icontype="icon-arrow-3"] label,\n    #tie-icon-add-button.icon-arrow-2 .tui-image-editor-button[data-icontype="icon-arrow-2"] label,\n    #tie-icon-add-button.icon-arrow .tui-image-editor-button[data-icontype="icon-arrow"] label,\n    #tie-icon-add-button.icon-bubble .tui-image-editor-button[data-icontype="icon-bubble"] label,\n    #tie-draw-line-select-button.line .tui-image-editor-button.line label,\n    #tie-draw-line-select-button.free .tui-image-editor-button.free label,\n    #tie-flip-button.flipX .tui-image-editor-button.flipX label,\n    #tie-flip-button.flipY .tui-image-editor-button.flipY label,\n    #tie-flip-button.resetFlip .tui-image-editor-button.resetFlip label,\n    #tie-crop-button .tui-image-editor-button.apply.active label,\n    #tie-crop-preset-button .tui-image-editor-button.preset.active label,\n    #tie-shape-button.rect .tui-image-editor-button.rect label,\n    #tie-shape-button.circle .tui-image-editor-button.circle label,\n    #tie-shape-button.triangle .tui-image-editor-button.triangle label,\n    #tie-text-effect-button .tui-image-editor-button.active label,\n    #tie-text-align-button.left .tui-image-editor-button.left label,\n    #tie-text-align-button.center .tui-image-editor-button.center label,\n    #tie-text-align-button.right .tui-image-editor-button.right label,\n    #tie-mask-apply.apply.active .tui-image-editor-button.apply label,\n    .tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-button:hover > label,\n    .tui-image-editor-container .tui-image-editor-checkbox input + label {\n        '+M+'\n    }\n    .tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-button > label,\n    .tui-image-editor-container .tui-image-editor-range-wrap.tui-image-editor-newline.short label {\n        '+A+'\n    }\n    .tui-image-editor-container .tui-image-editor-range-wrap label {\n        '+I+'\n    }\n    .tui-image-editor-container .tui-image-editor-partition > div {\n        '+R+'\n    }\n    .tui-image-editor-container.left .tui-image-editor-submenu .tui-image-editor-partition > div,\n    .tui-image-editor-container.right .tui-image-editor-submenu .tui-image-editor-partition > div {\n        '+L+'\n    }\n    .tui-image-editor-container .tui-image-editor-checkbox input + label:before {\n        '+N+'\n    }\n    .tui-image-editor-container .tui-image-editor-checkbox input:checked + label:before {\n        border: 0;\n    }\n    .tui-image-editor-container .tui-image-editor-virtual-range-pointer {\n        '+H+'\n    }\n    .tui-image-editor-container .tui-image-editor-virtual-range-bar {\n        '+V+'\n    }\n    .tui-image-editor-container .tui-image-editor-virtual-range-subbar {\n        '+G+'\n    }\n    .tui-image-editor-container .tui-image-editor-disabled .tui-image-editor-virtual-range-pointer {\n        '+X+'\n    }\n    .tui-image-editor-container .tui-image-editor-disabled .tui-image-editor-virtual-range-subbar {\n        '+K+'\n    }\n    .tui-image-editor-container .tui-image-editor-disabled .tui-image-editor-virtual-range-bar {\n        '+Y+'\n    }\n    .tui-image-editor-container .tui-image-editor-range-value {\n        '+z+'\n    }\n    .tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-button .color-picker-value + label {\n        '+U+'\n    }\n    .tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-button .color-picker-value {\n        '+W+'\n    }\n    .tui-image-editor-container .svg_ic-menu {\n        '+Z+'\n    }\n    .tui-image-editor-container .svg_ic-submenu {\n        '+J+'\n    }\n    .tui-image-editor-container .tui-image-editor-controls-logo > img,\n    .tui-image-editor-container .tui-image-editor-header-logo > img {\n        '+Q+'\n    }\n\n'}},function(m,_){'use strict';Object.defineProperty(_,'__esModule',{value:!0}),_.default={'common.bi.image':'https://uicdn.toast.com/toastui/img/tui-image-editor-bi.png','common.bisize.width':'251px','common.bisize.height':'21px','common.backgroundImage':'none','common.backgroundColor':'#1e1e1e','common.border':'0px','header.backgroundImage':'none','header.backgroundColor':'transparent','header.border':'0px','loadButton.backgroundColor':'#fff','loadButton.border':'1px solid #ddd','loadButton.color':'#222','loadButton.fontFamily':'\'Noto Sans\', sans-serif','loadButton.fontSize':'12px','downloadButton.backgroundColor':'#fdba3b','downloadButton.border':'1px solid #fdba3b','downloadButton.color':'#fff','downloadButton.fontFamily':'\'Noto Sans\', sans-serif','downloadButton.fontSize':'12px','menu.normalIcon.path':'icon-d.svg','menu.normalIcon.name':'icon-d','menu.activeIcon.path':'icon-b.svg','menu.activeIcon.name':'icon-b','menu.disabledIcon.path':'icon-a.svg','menu.disabledIcon.name':'icon-a','menu.hoverIcon.path':'icon-c.svg','menu.hoverIcon.name':'icon-c','menu.iconSize.width':'24px','menu.iconSize.height':'24px','submenu.backgroundColor':'#1e1e1e','submenu.partition.color':'#3c3c3c','submenu.normalIcon.path':'icon-d.svg','submenu.normalIcon.name':'icon-d','submenu.activeIcon.path':'icon-c.svg','submenu.activeIcon.name':'icon-c','submenu.iconSize.width':'32px','submenu.iconSize.height':'32px','submenu.normalLabel.color':'#8a8a8a','submenu.normalLabel.fontWeight':'lighter','submenu.activeLabel.color':'#fff','submenu.activeLabel.fontWeight':'lighter','checkbox.border':'0px','checkbox.backgroundColor':'#fff','range.pointer.color':'#fff','range.bar.color':'#666','range.subbar.color':'#d1d1d1','range.disabledPointer.color':'#414141','range.disabledBar.color':'#282828','range.disabledSubbar.color':'#414141','range.value.color':'#fff','range.value.fontWeight':'lighter','range.value.fontSize':'11px','range.value.border':'1px solid #353535','range.value.backgroundColor':'#151515','range.title.color':'#fff','range.title.fontWeight':'lighter','colorpicker.button.border':'1px solid #1e1e1e','colorpicker.title.color':'#fff'}},function(m,_,E){'use strict';function M(Q){return Q&&Q.__esModule?Q:{default:Q}}function A(Q,$){if(!(Q instanceof $))throw new TypeError('Cannot call a class as a function')}function I(Q,$){if(!Q)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return $&&('object'==typeof $||'function'==typeof $)?$:Q}function R(Q,$){if('function'!=typeof $&&null!==$)throw new TypeError('Super expression must either be null or a function, not '+typeof $);Q.prototype=Object.create($&&$.prototype,{constructor:{value:Q,enumerable:!1,writable:!0,configurable:!0}}),$&&(Object.setPrototypeOf?Object.setPrototypeOf(Q,$):Q.__proto__=$)}Object.defineProperty(_,'__esModule',{value:!0});var L=function(){function Q($,ee){for(var te=0,ae;te<ee.length;te++)ae=ee[te],ae.enumerable=ae.enumerable||!1,ae.configurable=!0,'value'in ae&&(ae.writable=!0),Object.defineProperty($,ae.key,ae)}return function($,ee,te){return ee&&Q($.prototype,ee),te&&Q($,te),$}}(),N=E(81),H=M(N),z=E(83),U=M(z),W=E(84),V=M(W),G=E(85),X=M(G),Y=E(72),K=E(73),J={stroke:'#ffbb3b',fill:'',strokeWidth:3},Z=function(Q){function $(ee,te){var ae=te.iconStyle,oe=te.menuBarPosition;A(this,$);var ne=I(this,($.__proto__||Object.getPrototypeOf($)).call(this,ee,{name:'shape',iconStyle:ae,menuBarPosition:oe,templateHtml:X.default}));return ne.type=null,ne.options=J,ne._els={shapeSelectButton:ne.selector('#tie-shape-button'),shapeColorButton:ne.selector('#tie-shape-color-button'),strokeRange:new U.default(ne.selector('#tie-stroke-range'),K.defaultShapeStrokeValus),strokeRangeValue:ne.selector('#tie-stroke-range-value'),fillColorpicker:new H.default(ne.selector('#tie-color-fill'),'',ne.toggleDirection),strokeColorpicker:new H.default(ne.selector('#tie-color-stroke'),'#ffbb3b',ne.toggleDirection)},ne.colorPickerControls.push(ne._els.fillColorpicker),ne.colorPickerControls.push(ne._els.strokeColorpicker),ne}return R($,Q),L($,[{key:'addEvent',value:function(te){this.actions=te,this._els.shapeSelectButton.addEventListener('click',this._changeShapeHandler.bind(this)),this._els.strokeRange.on('change',this._changeStrokeRangeHandler.bind(this)),this._els.fillColorpicker.on('change',this._changeFillColorHandler.bind(this)),this._els.strokeColorpicker.on('change',this._changeStrokeColorHandler.bind(this)),this._els.fillColorpicker.on('changeShow',this.colorPickerChangeShow.bind(this)),this._els.strokeColorpicker.on('changeShow',this.colorPickerChangeShow.bind(this)),this._els.strokeRangeValue.value=this._els.strokeRange.value,this._els.strokeRangeValue.setAttribute('readonly',!0)}},{key:'setShapeStatus',value:function(te){var ae=te.strokeWidth,oe=te.strokeColor,ne=te.fillColor;this._els.strokeRange.value=ae,this._els.strokeRange.trigger('change'),this._els.strokeColorpicker.color=oe,this._els.fillColorpicker.color=ne,this.options.stroke=oe,this.options.fill=ne,this.options.strokeWidth=ae}},{key:'changeStartMode',value:function(){this.actions.stopDrawingMode()}},{key:'changeStandbyMode',value:function(){this.type=null,this.actions.changeSelectableAll(!0),this._els.shapeSelectButton.classList.remove('circle'),this._els.shapeSelectButton.classList.remove('triangle'),this._els.shapeSelectButton.classList.remove('rect')}},{key:'setMaxStrokeValue',value:function(te){var ae=te;0>=ae&&(ae=K.defaultShapeStrokeValus.max),this._els.strokeRange.max=ae}},{key:'setStrokeValue',value:function(te){this._els.strokeRange.value=te,this._els.strokeRange.trigger('change')}},{key:'getStrokeValue',value:function(){return this._els.strokeRange.value}},{key:'_changeShapeHandler',value:function(te){var ae=te.target.closest('.tui-image-editor-button');if(ae){this.actions.stopDrawingMode(),this.actions.discardSelection();var oe=this.getButtonType(ae,['circle','triangle','rect']);if(this.type===oe)return void this.changeStandbyMode();this.changeStandbyMode(),this.type=oe,te.currentTarget.classList.add(oe),this.actions.changeSelectableAll(!1),this.actions.modeChange('shape')}}},{key:'_changeStrokeRangeHandler',value:function(te){this.options.strokeWidth=(0,Y.toInteger)(te),this._els.strokeRangeValue.value=(0,Y.toInteger)(te),this.actions.changeShape({strokeWidth:te}),this.actions.setDrawingShape(this.type,this.options)}},{key:'_changeFillColorHandler',value:function(te){te=te||'transparent',this.options.fill=te,this.actions.changeShape({fill:te})}},{key:'_changeStrokeColorHandler',value:function(te){te=te||'transparent',this.options.stroke=te,this.actions.changeShape({stroke:te})}}]),$}(V.default);_.default=Z},function(m,_,E){'use strict';function M(W){return W&&W.__esModule?W:{default:W}}function A(W,V){if(!(W instanceof V))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(_,'__esModule',{value:!0});var I=function(){function W(V,G){for(var X=0,Y;X<G.length;X++)Y=G[X],Y.enumerable=Y.enumerable||!1,Y.configurable=!0,'value'in Y&&(Y.writable=!0),Object.defineProperty(V,Y.key,Y)}return function(V,G,X){return G&&W(V.prototype,G),X&&W(V,X),V}}(),R=E(3),L=M(R),N=E(82),H=M(N),z=['#000000','#2a2a2a','#545454','#7e7e7e','#a8a8a8','#d2d2d2','#ffffff','','#ff4040','#ff6518','#ffbb3b','#03bd9e','#00a9ff','#515ce6','#9e5fff','#ff5583'],U=function(){function W(V){var G=1<arguments.length&&void 0!==arguments[1]?arguments[1]:'#7e7e7e',X=2<arguments.length&&void 0!==arguments[2]?arguments[2]:'up';A(this,W);var Y=V.getAttribute('title');this._show=!1,this._colorpickerElement=V,this._toggleDirection=X,this._makePickerButtonElement(V,G),this._makePickerLayerElement(V,Y),this._color=G,this.picker=H.default.create({container:this.pickerElement,preset:z,color:G}),this._addEvent(V)}return I(W,[{key:'_changeColorElement',value:function(G){G?(this.colorElement.classList.remove('transparent'),this.colorElement.style.backgroundColor=G):(this.colorElement.style.backgroundColor='#fff',this.colorElement.classList.add('transparent'))}},{key:'_makePickerButtonElement',value:function(G,X){G.classList.add('tui-image-editor-button'),this.colorElement=document.createElement('div'),this.colorElement.className='color-picker-value',X?this.colorElement.style.backgroundColor=X:this.colorElement.classList.add('transparent')}},{key:'_makePickerLayerElement',value:function(G,X){var Y=document.createElement('label'),K=document.createElement('div');this.pickerControl=document.createElement('div'),this.pickerControl.className='color-picker-control',this.pickerElement=document.createElement('div'),this.pickerElement.className='color-picker',Y.innerHTML=X,K.className='triangle',this.pickerControl.appendChild(this.pickerElement),this.pickerControl.appendChild(K),G.appendChild(this.pickerControl),G.appendChild(this.colorElement),G.appendChild(Y)}},{key:'_addEvent',value:function(G){var X=this;this.picker.on('selectColor',function(Y){X._changeColorElement(Y.color),X._color=Y.color,X.fire('change',Y.color)}),G.addEventListener('click',function(Y){X._show=!X._show,X.pickerControl.style.display=X._show?'block':'none',X._setPickerControlPosition(),X.fire('changeShow',X),Y.stopPropagation()}),document.body.addEventListener('click',function(){X.hide()})}},{key:'hide',value:function(){this._show=!1,this.pickerControl.style.display='none'}},{key:'_setPickerControlPosition',value:function(){var G=this.pickerControl.style,X=this._colorpickerElement.clientWidth/2+2,Y=this.pickerControl.offsetWidth/2-X,K=-1*(this.pickerControl.offsetHeight+10);'down'===this._toggleDirection&&(K=30),G.top=K+'px',G.left='-'+Y+'px'}},{key:'color',get:function(){return this._color},set:function(G){this._color=G,this._changeColorElement(G)}}]),W}();L.default.CustomEvents.mixin(U),_.default=U},function(m,_,E){(function(A,I){m.exports=I(E(3))})(this,function(M){return function(A){function I(L){if(R[L])return R[L].exports;var N=R[L]={exports:{},id:L,loaded:!1};return A[L].call(N.exports,N,N.exports,I),N.loaded=!0,N.exports}var R={};return I.m=A,I.c=R,I.p='dist',I(0)}([function(A,I,R){R(1),A.exports=R(6)},function(){},,,,,function(A,I,R){'use strict';var L=R(7),N=R(9),H=R(10),z=R(11),U=R(12),W=R(13),V=R(16),G=R(18),X=R(14),Y=R(19);A.exports={domutil:L,domevent:N,Collection:H,View:z,Drag:U,create:W,Palette:V,Slider:G,colorutil:X,svgvml:Y}},function(A,I,R){'use strict';function L(J){return J.replace(/^\s\s*/,'').replace(/\s\s*$/,'')}var N=R(8),H=R(9),z=R(10),U=N,W='_pos',V='onselectstart'in document,G='',X,Y,K=/^auto$|^$|%/;X={appendHTMLElement:function(J,Z,Q){var $;return Q=Q||'',$=document.createElement(J),$.className=Q,Z?Z.appendChild($):document.body.appendChild($),$},remove:function(J){J&&J.parentNode&&J.parentNode.removeChild(J)},get:function(J){return document.getElementById(J)},_matcher:function(J,Z){var Q=/^\./,$=/^#/;if(Q.test(Z))return X.hasClass(J,Z.replace('.',''));return $.test(Z)?J.id===Z.replace('#',''):J.nodeName.toLowerCase()===Z.toLowerCase()},find:function(J,Z,Q){function $(ne,ie){for(var le=ne.childNodes,se=0,ce=le.length,de;se<ce;se+=1)if(de=le[se],'#text'!==de.nodeName)if(X._matcher(de,ie)){if((oe&&Q(de)||!oe)&&ee.push(de),ae){te=!0;break}}else if(0<de.childNodes.length&&($(de,ie),te))break}var ee=[],te=!1,ae=U.isUndefined(Q)||!1===Q,oe=U.isFunction(Q);return U.isString(Z)&&(Z=X.get(Z)),Z=Z||window.document.body,$(Z,J),ae?ee[0]||null:ee},closest:function(J,Z){var Q=J.parentNode;if(X._matcher(J,Z))return J;for(;Q&&Q!==window.document.body;){if(X._matcher(Q,Z))return Q;Q=Q.parentNode}},text:function(J){var Z='',Q=0,$=J.nodeType;if(!$)for(;J[Q];Q+=1)Z+=X.text(J[Q]);else if(1===$||9===$||11===$){if('string'==typeof J.textContent)return J.textContent;for(J=J.firstChild;J;J=J.nextSibling)Z+=X.text(J)}else if(3===$||4===$)return J.nodeValue;return Z},setData:function(J,Z,Q){return'dataset'in J?void(J.dataset[Z]=Q):void J.setAttribute('data-'+Z,Q)},getData:function(J,Z){return'dataset'in J?J.dataset[Z]:J.getAttribute('data-'+Z)},hasClass:function(J,Z){var Q;return U.isUndefined(J.classList)?(Q=X.getClass(J),0<Q.length&&new RegExp('(^|\\s)'+Z+'(\\s|$)').test(Q)):J.classList.contains(Z)},addClass:function(J,Z){var Q;U.isUndefined(J.classList)?!X.hasClass(J,Z)&&(Q=X.getClass(J),X.setClass(J,(Q?Q+' ':'')+Z)):U.forEachArray(Z.split(' '),function($){J.classList.add($)})},setClass:function(J,Z){U.isUndefined(J.className.baseVal)?J.className=Z:J.className.baseVal=Z},removeClass:function(J,Z){var Q='';U.isUndefined(J.classList)?(Q=(' '+X.getClass(J)+' ').replace(' '+Z+' ',' '),X.setClass(J,L(Q))):J.classList.remove(Z)},getClass:function(J){return J&&J.className?U.isUndefined(J.className.baseVal)?J.className:J.className.baseVal:''},getStyle:function(J,Z){var Q=J.style[Z]||J.currentStyle&&J.currentStyle[Z],$;return(!Q||'auto'===Q)&&document.defaultView&&($=document.defaultView.getComputedStyle(J,null),Q=$?$[Z]:null),'auto'===Q?null:Q},getComputedStyle:function(J){var Z=document.defaultView;return Z&&Z.getComputedStyle?document.defaultView.getComputedStyle(J):{getPropertyValue:function(Q){var $=/(\-([a-z]){1})/g;return'float'===Q&&(Q='styleFloat'),$.test(Q)&&(Q=Q.replace($,function(){return arguments[2].toUpperCase()})),J.currentStyle[Q]?J.currentStyle[Q]:null}}},setPosition:function(J,Z,Q){Z=U.isUndefined(Z)?0:Z,Q=U.isUndefined(Q)?0:Q,J[W]=[Z,Q],J.style.left=Z+'px',J.style.top=Q+'px'},getPosition:function(J,Z){var Q,$,ee;return(Z&&(J[W]=null),J[W])?J[W]:(Q=0,$=0,(K.test(J.style.left)||K.test(J.style.top))&&'getBoundingClientRect'in J?(ee=J.getBoundingClientRect(),Q=ee.left,$=ee.top):(Q=parseFloat(J.style.left||0),$=parseFloat(J.style.top||0)),[Q,$])},getSize:function(J){var Q=X.getStyle(J,'width'),$=X.getStyle(J,'height'),Z;return(K.test(Q)||K.test($))&&'getBoundingClientRect'in J?(Z=J.getBoundingClientRect(),Q=Z.width,$=Z.height):(Q=parseFloat(Q||0),$=parseFloat($||0)),[Q,$]},testProp:function(J){for(var Z=document.documentElement.style,Q=0,$=J.length;Q<$;Q+=1)if(J[Q]in Z)return J[Q];return!1},getFormData:function(J){var Z=new z(function(){return this.length}),Q=function(ee){return!ee.disabled},$={};return Z.add.apply(Z,X.find('input',J,Q).concat(X.find('select',J,Q)).concat(X.find('textarea',J,Q))),Z=Z.groupBy(function(ee){return ee&&ee.getAttribute('name')||'_other'}),U.forEach(Z,function(ee,te){'_other'===te||ee.each(function(ae){var oe=ae.nodeName.toLowerCase(),ne=ae.type,ie=[];'radio'===ne?ie=[ee.find(function(le){return le.checked}).toArray().pop()]:'checkbox'===ne?ie=ee.find(function(le){return le.checked}).toArray():'select'===oe?ee.find(function(le){return!!le.childNodes.length}).each(function(le){ie=ie.concat(X.find('option',le,function(se){return se.selected}))}):ie=ee.find(function(le){return''!==le.value}).toArray(),ie=U.map(ie,function(le){return le.value}),ie.length?1===ie.length&&(ie=ie[0]):ie='',$[te]=ie})}),$}},Y=X.testProp(['userSelect','WebkitUserSelect','OUserSelect','MozUserSelect','msUserSelect']),X.disableTextSelection=function(){return V?function(){H.on(window,'selectstart',H.preventDefault)}:function(){var J=document.documentElement.style;G=J[Y],J[Y]='none'}}(),X.enableTextSelection=function(){return V?function(){H.off(window,'selectstart',H.preventDefault)}:function(){document.documentElement.style[Y]=G}}(),X.disableImageDrag=function(){H.on(window,'dragstart',H.preventDefault)},X.enableImageDrag=function(){H.off(window,'dragstart',H.preventDefault)},X.applyTemplate=function(J,Z){var Q=J.replace(/\{\{(\w*)\}\}/g,function($,ee){return Z.hasOwnProperty(ee)?Z[ee]:''});return Q},A.exports=X},function(A){A.exports=M},function(A,I,R){'use strict';var L=R(8),N=L,H=N.browser,z='_evt',U={START:['touchstart','mousedown'],END:{mousedown:'mouseup',touchstart:'touchend',pointerdown:'touchend',MSPointerDown:'touchend'},MOVE:{mousedown:'mousemove',touchstart:'touchmove',pointerdown:'touchmove',MSPointerDown:'touchmove'}},W={on:function(V,G,X,Y){return N.isString(G)?void N.forEach(G.split(' '),function(K){W._on(V,K,X,Y)}):void N.forEachOwnProperties(G,function(K,J){W._on(V,J,K,X)})},_on:function(V,G,X,Y){var K,J,Z;K=G+N.stamp(X)+(Y?'_'+N.stamp(Y):'');V[z]&&V[z][K]||(J=function(Q){X.call(Y||V,Q||window.event)},Z=J,'addEventListener'in V?'mouseenter'===G||'mouseleave'===G?(J=function(Q){Q=Q||window.event;W._checkMouse(V,Q)&&Z(Q)},V.addEventListener('mouseenter'===G?'mouseover':'mouseout',J,!1)):('mousewheel'==G&&V.addEventListener('DOMMouseScroll',J,!1),V.addEventListener(G,J,!1)):'attachEvent'in V&&V.attachEvent('on'+G,J),V[z]=V[z]||{},V[z][K]=J)},off:function(V,G,X,Y){return N.isString(G)?void N.forEach(G.split(' '),function(K){W._off(V,K,X,Y)}):void N.forEachOwnProperties(G,function(K,J){W._off(V,J,K,X)})},_off:function(V,G,X,Y){var K=G+N.stamp(X)+(Y?'_'+N.stamp(Y):''),J=V[z]&&V[z][K];if(J){if('removeEventListener'in V)'mouseenter'===G||'mouseleave'===G?V.removeEventListener('mouseenter'===G?'mouseover':'mouseout',J,!1):('mousewheel'==G&&V.removeEventListener('DOMMouseScroll',J,!1),V.removeEventListener(G,J,!1));else if('detachEvent'in V)try{V.detachEvent('on'+G,J)}catch(Z){}return delete V[z][K],N.keys(V[z]).length?void 0:N.browser.msie&&9>N.browser.version?void(V[z]=null):void delete V[z]}},once:function(V,G,X,Y){function K(){X.apply(Y||V,arguments),J._off(V,G,K,Y)}var J=this;return N.isObject(G)?void N.forEachOwnProperties(G,function(Z,Q){W.once(V,Q,Z,X)}):void W.on(V,G,K,Y)},stopPropagation:function(V){V.stopPropagation?V.stopPropagation():V.cancelBubble=!0},preventDefault:function(V){V.preventDefault?V.preventDefault():V.returnValue=!1},stop:function(V){W.preventDefault(V),W.stopPropagation(V)},disableScrollPropagation:function(V){W.on(V,'mousewheel MozMousePixelScroll',W.stopPropagation)},disableClickPropagation:function(V){W.on(V,U.START.join(' ')+' click dblclick',W.stopPropagation)},getMousePosition:function(V,G){var X;return G?(X=G.getBoundingClientRect(),[V.clientX-X.left-G.clientLeft,V.clientY-X.top-G.clientTop]):[V.clientX,V.clientY]},getWheelDelta:function(V){var G=0;return V.wheelDelta&&(G=V.wheelDelta/120),V.detail&&(G=-V.detail/3),G},_checkMouse:function(V,G){var X=G.relatedTarget;if(!X)return!0;try{for(;X&&X!==V;)X=X.parentNode}catch(Y){return!1}return X!==V},trigger:function(V,G,X){var Y=/(mouse|click)/;N.isUndefined(X)&&Y.exec(G)&&(X=W.mouseEvent(G)),V.dispatchEvent?V.dispatchEvent(X):V.fireEvent&&V.fireEvent('on'+G,X)},mouseEvent:function(V,G){var X,Y;return Y=N.extend({bubbles:!0,cancelable:'mousemove'!==V,view:window,wheelDelta:0,detail:0,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:void 0},G),H.msie&&9>H.version&&delete Y.wheelDelta,'function'==typeof document.createEvent?(X=document.createEvent('MouseEvents'),X.initMouseEvent(V,Y.bubbles,Y.cancelable,Y.view,Y.detail,Y.screenX,Y.screenY,Y.clientX,Y.clientY,Y.ctrlKey,Y.altKey,Y.shiftKey,Y.metaKey,Y.button,document.body.parentNode)):document.createEventObject&&(X=document.createEventObject(),N.forEach(Y,function(K,J){X[J]=K},this),X.button={0:1,1:4,2:2}[X.button]||X.button),X},getMouseButton:function(V){var G;return document.implementation.hasFeature('MouseEvents','2.0')?V.button:(G=V.button+'',~'0,1,3,5,7'.indexOf(G))?0:~'2,6'.indexOf(G)?2:~'4'.indexOf(G)?1:void 0}};A.exports=W},function(A,I,R){'use strict';function L(X){this.items={},this.length=0,W(X)&&(this.getItemID=X)}var N=R(8),H=N,z=H.forEachOwnProperties,U=H.forEachArray,W=H.isFunction,V=H.isObject,G=Array.prototype.slice;L.and=function(X){var Y;return X=G.call(arguments),Y=X.length,function(K){for(var J=0;J<Y;J+=1)if(!X[J].call(null,K))return!1;return!0}},L.or=function(X){var Y;return X=G.call(arguments),Y=X.length,function(K){for(var J=1,Z=X[0].call(null,K);J<Y;J+=1)Z=Z||X[J].call(null,K);return Z}},L.merge=function(){var Y=G.call(arguments),K={},J=new L(Y[0].getItemID),Z=H.extend;return U(Y,function(Q){Z(K,Q.items)}),J.items=K,J.length=H.keys(J.items).length,J},L.prototype.getItemID=function(X){return X._id+''},L.prototype.add=function(X){var Y,K;return 1<arguments.length?void U(G.call(arguments),function(J){this.add(J)},this):void(Y=this.getItemID(X),K=this.items,!K[Y]&&(this.length+=1),K[Y]=X)},L.prototype.remove=function(X){var Y=[],K,J;return this.length?1<arguments.length?(Y=H.map(G.call(arguments),function(Z){return this.remove(Z)},this),Y):(K=this.items,V(X)&&(X=this.getItemID(X)),!K[X])?Y:(this.length-=1,J=K[X],delete K[X],J):Y},L.prototype.clear=function(){this.items={},this.length=0},L.prototype.has=function(X){var Y,K;return!!this.length&&(Y=W(X),K=!1,Y?this.each(function(J){return!0!==X(J)||(K=!0,!1)}):(X=V(X)?this.getItemID(X):X,K=H.isExisty(this.items[X])),K)},L.prototype.doWhenHas=function(X,Y,K){var J=this.items[X];H.isExisty(J)&&Y.call(K||this,J)},L.prototype.find=function(X){var Y=new L;return this.hasOwnProperty('getItemID')&&(Y.getItemID=this.getItemID),this.each(function(K){!0===X(K)&&Y.add(K)}),Y},L.prototype.groupBy=function(X,Y){var K={},Q=W(X),$=this.getItemID,J,Z;if(H.isArray(X)){if(H.forEachArray(X,function(ee){K[ee+'']=new L($)}),!Y)return K;X=Y,Q=!0}return this.each(function(ee){Q?Z=X(ee):(Z=ee[X],W(Z)&&(Z=Z.apply(ee))),J=K[Z],J||(J=K[Z]=new L($)),J.add(ee)}),K},L.prototype.single=function(){var X;return this.each(function(Y){return X=Y,!1},this),X},L.prototype.sort=function(X){var Y=[];return this.each(function(K){Y.push(K)}),W(X)&&(Y=Y.sort(X)),Y},L.prototype.each=function(X,Y){z(this.items,X,Y||this)},L.prototype.toArray=function(){return this.length?H.map(this.items,function(X){return X}):[]},A.exports=L},function(A,I,R){'use strict';function L(U,W){var V=N.stamp(this);U=U||{},N.isUndefined(W)&&(W=H.appendHTMLElement('div')),H.addClass(W,'tui-view-'+V),this.id=V,this.container=W,this.childs=new z(function(G){return N.stamp(G)}),this.parent=null}var N=R(8),H=R(7),z=R(10);L.prototype.addChild=function(U,W){W&&W.call(U,this),U.parent=this,this.childs.add(U)},L.prototype.removeChild=function(U,W){var V=N.isNumber(U)?this.childs.items[U]:U;U=N.stamp(V),W&&W.call(V,this),this.childs.remove(U)},L.prototype.render=function(){this.childs.each(function(U){U.render()})},L.prototype.recursive=function(U,W){N.isFunction(U)&&(!W&&U(this),this.childs.each(function(V){V.recursive(U)}))},L.prototype.resize=function(){for(var U=Array.prototype.slice.call(arguments),W=this.parent;W;)N.isFunction(W._onResize)&&W._onResize.apply(W,U),W=W.parent},L.prototype._beforeDestroy=function(){},L.prototype._destroy=function(){this._beforeDestroy(),this.childs.clear(),this.container.innerHTML='',this.id=this.parent=this.childs=this.container=null},L.prototype.destroy=function(U){this.childs.each(function(W){W.destroy(!0),W._destroy()});U||this._destroy()},L.prototype.getViewBound=function(){var U=this.container,W=H.getPosition(U),V=H.getSize(U);return{x:W[0],y:W[1],width:V[0],height:V[1]}},A.exports=L},function(A,I,R){(function(L){'use strict';function N(W,V){U.on(V,'mousedown',this._onMouseDown,this),this.options=H.extend({distance:10},W),this.container=V,this._isMoved=!1,this._distance=0,this._dragStartFired=!1,this._dragStartEventData=null}var H=R(8),z=R(7),U=R(9);N.prototype.destroy=function(){U.off(this.container,'mousedown',this._onMouseDown,this),this.options=this.container=this._isMoved=this._distance=this._dragStartFired=this._dragStartEventData=null},N.prototype._toggleDragEvent=function(W){var V=this.container,G,X;W?(G='on',X='disable'):(G='off',X='enable'),z[X+'TextSelection'](V),z[X+'ImageDrag'](V),U[G](L.document,{mousemove:this._onMouseMove,mouseup:this._onMouseUp},this)},N.prototype._getEventData=function(W){return{target:W.target||W.srcElement,originEvent:W}},N.prototype._onMouseDown=function(W){0!==U.getMouseButton(W)||(this._distance=0,this._dragStartFired=!1,this._dragStartEventData=this._getEventData(W),this._toggleDragEvent(!0))},N.prototype._onMouseMove=function(W){var V=this.options.distance;return U.preventDefault(W),this._isMoved=!0,this._distance<V?void(this._distance+=1):!this._dragStartFired&&(this._dragStartFired=!0,!this.invoke('dragStart',this._dragStartEventData))?void this._toggleDragEvent(!1):void this.fire('drag',this._getEventData(W))},N.prototype._onMouseUp=function(W){return this._toggleDragEvent(!1),this._isMoved?(this._isMoved=!1,void this.fire('dragEnd',this._getEventData(W))):void this.fire('click',this._getEventData(W))},H.CustomEvents.mixin(N),A.exports=N}).call(I,function(){return this}())},function(A,I,R){'use strict';function L(){location.hostname;G||(G=!0)}function N(X){var Y;if(!(this instanceof N))return new N(X);if(X=this.options=H.extend({container:null,color:'#f8f8f8',preset:['#181818','#282828','#383838','#585858','#b8b8b8','#d8d8d8','#e8e8e8','#f8f8f8','#ab4642','#dc9656','#f7ca88','#a1b56c','#86c1b9','#7cafc2','#ba8baf','#a16946'],cssPrefix:'tui-colorpicker-',detailTxt:'Detail',usageStatistics:!0},X),!X.container)throw new Error('ColorPicker(): need container option.');Y=this.layout=new U(X,X.container),this.palette=new W(X,Y.container),this.palette.on({_selectColor:this._onSelectColorInPalette,_toggleSlider:this._onToggleSlider},this),this.slider=new V(X,Y.container),this.slider.on('_selectColor',this._onSelectColorInSlider,this),Y.addChild(this.palette),Y.addChild(this.slider),this.render(X.color),X.usageStatistics&&L()}var H=R(8),z=R(14),U=R(15),W=R(16),V=R(18),G=!1;N.prototype._onSelectColorInPalette=function(X){var Y=X.color,K=this.options;if(!z.isValidRGB(Y)&&''!==Y)return void this.render();this.fire('selectColor',{color:Y,origin:'palette'});K.color===Y||(K.color=Y,this.render(Y))},N.prototype._onToggleSlider=function(){this.slider.toggle(!this.slider.isVisible())},N.prototype._onSelectColorInSlider=function(X){var Y=X.color,K=this.options;this.fire('selectColor',{color:Y,origin:'slider'});K.color===Y||(K.color=Y,this.palette.render(Y))},N.prototype.setColor=function(X){if(!z.isValidRGB(X))throw new Error('ColorPicker#setColor(): need valid hex string color value');this.options.color=X,this.render(X)},N.prototype.getColor=function(){return this.options.color},N.prototype.toggle=function(X){this.layout.container.style.display=!X?'none':'block'},N.prototype.render=function(X){this.layout.render(X||this.options.color)},N.prototype.destroy=function(){this.layout.destroy(),this.options.container.innerHTML='',this.layout=this.slider=this.palette=this.options=null},H.CustomEvents.mixin(N),A.exports=N},function(A){'use strict';var R=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i,L={leadingZero:function(N,H){var z='',U=0;if((N+'').length>H)return N+'';for(;U<H-1;U+=1)z+='0';return(z+N).slice(-1*H)},isValidRGB:function(N){return R.test(N)},hexToRGB:function(N){var H,z,U;return!!L.isValidRGB(N)&&(N=N.substring(1),H=parseInt(N.substr(0,2),16),z=parseInt(N.substr(2,2),16),U=parseInt(N.substr(4,2),16),[H,z,U])},rgbToHEX:function(N,H,z){var U='#'+L.leadingZero(N.toString(16),2)+L.leadingZero(H.toString(16),2)+L.leadingZero(z.toString(16),2);return!!L.isValidRGB(U)&&U},rgbToHSV:function(N,H,z){var U,W,V,G,X,Y;return N/=255,H/=255,z/=255,U=Math.max(N,H,z),W=Math.min(N,H,z),X=U,Y=U-W,G=0===U?0:Y/U,(U==W?V=0:(U===N?V=(H-z)/Y+(H<z?6:0):U===H?V=(z-N)/Y+2:U===z?V=(N-H)/Y+4:void 0,V/=6),[Math.round(360*V),Math.round(100*G),Math.round(100*X)])},hsvToRGB:function(N,H,z){var U,W,V,G,X,Y,K,J;if(N=Math.max(0,Math.min(360,N)),H=Math.max(0,Math.min(100,H)),z=Math.max(0,Math.min(100,z)),H/=100,z/=100,0===H)return U=W=V=z,[Math.round(255*U),Math.round(255*W),Math.round(255*V)];switch(N/=60,G=Math.floor(N),X=N-G,Y=z*(1-H),K=z*(1-H*X),J=z*(1-H*(1-X)),G){case 0:U=z,W=J,V=Y;break;case 1:U=K,W=z,V=Y;break;case 2:U=Y,W=z,V=J;break;case 3:U=Y,W=K,V=z;break;case 4:U=J,W=Y,V=z;break;default:U=z,W=Y,V=K;}return[Math.round(255*U),Math.round(255*W),Math.round(255*V)]}};A.exports=L},function(A,I,R){'use strict';function L(U,W){this.options=N.extend({cssPrefix:'tui-colorpicker-'},U),W=H.appendHTMLElement('div',W,this.options.cssPrefix+'container'),z.call(this,U,W),this.render()}var N=R(8),H=R(7),z=R(11);N.inherit(L,z),L.prototype.render=function(U){this.recursive(function(W){W.render(U)},!0)},A.exports=L},function(A,I,R){'use strict';function L(G,X){this.options=N.extend({cssPrefix:'tui-colorpicker-',preset:['#181818','#282828','#383838','#585858','#B8B8B8','#D8D8D8','#E8E8E8','#F8F8F8','#AB4642','#DC9656','#F7CA88','#A1B56C','#86C1B9','#7CAFC2','#BA8BAF','#A16946'],detailTxt:'Detail'},G),X=H.appendHTMLElement('div',X,this.options.cssPrefix+'palette-container'),W.call(this,G,X)}var N=R(8),H=R(7),z=R(14),U=R(9),W=R(11),V=R(17);N.inherit(L,W),L.prototype._onClick=function(G){var X=this.options,Y=G.srcElement||G.target,K={};return H.hasClass(Y,X.cssPrefix+'palette-button')?(K.color=Y.value,void this.fire('_selectColor',K)):void(H.hasClass(Y,X.cssPrefix+'palette-toggle-slider')&&this.fire('_toggleSlider'))},L.prototype._onChange=function(G){var X=this.options,Y=G.srcElement||G.target,K={};H.hasClass(Y,X.cssPrefix+'palette-hex')&&(K.color=Y.value,this.fire('_selectColor',K))},L.prototype._beforeDestroy=function(){this._toggleEvent(!1)},L.prototype._toggleEvent=function(G){var X=this.options,Y=this.container,K=U[!G?'off':'on'],J;K(Y,'click',this._onClick,this),J=H.find('.'+X.cssPrefix+'palette-hex',Y),J&&K(J,'change',this._onChange,this)},L.prototype.render=function(G){var X=this.options,Y='';this._toggleEvent(!1),Y=V.layout.replace('{{colorList}}',N.map(X.preset,function(K){var J='',Z='';return z.isValidRGB(K)&&(Z=H.applyTemplate(V.itemStyle,{color:K})),J=H.applyTemplate(V.item,{itemStyle:Z,itemClass:K?'':' '+X.cssPrefix+'color-transparent',color:K,cssPrefix:X.cssPrefix,selected:K===G?' '+X.cssPrefix+'selected':''}),J}).join('')),Y=H.applyTemplate(Y,{cssPrefix:X.cssPrefix,detailTxt:X.detailTxt,color:G}),this.container.innerHTML=Y,this._toggleEvent(!0)},N.CustomEvents.mixin(L),A.exports=L},function(A){'use strict';var R=['<ul class="{{cssPrefix}}clearfix">{{colorList}}</ul>','<div class="{{cssPrefix}}clearfix" style="overflow:hidden">','<input type="button" class="{{cssPrefix}}palette-toggle-slider" value="{{detailTxt}}" />','<input type="text" class="{{cssPrefix}}palette-hex" value="{{color}}" maxlength="7" />','<span class="{{cssPrefix}}palette-preview" style="background-color:{{color}};color:{{color}}">{{color}}</span>','</div>'].join('\n');A.exports={layout:R,item:'<li><input class="{{cssPrefix}}palette-button{{selected}}{{itemClass}}" type="button" style="{{itemStyle}}" title="{{color}}" value="{{color}}" /></li>',itemStyle:'background-color:{{color}};color:{{color}}'}},function(A,I,R){'use strict';function L(Z,Q){Q=H.appendHTMLElement('div',Q,Z.cssPrefix+'slider-container'),Q.style.display='none',V.call(this,Z,Q),this.options=N.extend({color:'#f8f8f8',cssPrefix:'tui-colorpicker-'},Z),this._dragDataCache={},this.sliderHandleElement=null,this.huebarHandleElement=null,this.baseColorElement=null,this.drag=new G({distance:0},Q),this.drag.on({dragStart:this._onDragStart,drag:this._onDrag,dragEnd:this._onDragEnd,click:this._onClick},this)}var N=R(8),H=R(7),z=R(9),U=R(19),W=R(14),V=R(11),G=R(12),X=R(20),Y=[-7,112],K=[-3,115],J=359.99;N.inherit(L,V),L.prototype._beforeDestroy=function(){this.drag.off(),this.drag=this.options=this._dragDataCache=this.sliderHandleElement=this.huebarHandleElement=this.baseColorElement=null},L.prototype.toggle=function(Z){this.container.style.display=!Z?'none':'block'},L.prototype.isVisible=function(){return'block'===this.container.style.display},L.prototype.render=function(Z){var Q=this,$=Q.container,ee=Q.options,te=X.layout,ae,oe;W.isValidRGB(Z)&&(te=te.replace(/{{slider}}/,X.slider),te=te.replace(/{{huebar}}/,X.huebar),te=te.replace(/{{cssPrefix}}/g,ee.cssPrefix),Q.container.innerHTML=te,Q.sliderHandleElement=H.find('.'+ee.cssPrefix+'slider-handle',$),Q.huebarHandleElement=H.find('.'+ee.cssPrefix+'huebar-handle',$),Q.baseColorElement=H.find('.'+ee.cssPrefix+'slider-basecolor',$),ae=W.hexToRGB(Z),oe=W.rgbToHSV.apply(null,ae),this.moveHue(oe[0],!0),this.moveSaturationAndValue(oe[1],oe[2],!0))},L.prototype._moveColorSliderHandle=function(Z,Q,$){var ee=this.sliderHandleElement,te;Q=Math.max(Y[0],Q),Q=Math.min(Y[1],Q),Z=Math.max(Y[0],Z),Z=Math.min(Y[1],Z),U.setTranslateXY(ee,Z,Q),te=50<Q?'white':'black',U.setStrokeColor(ee,te),$||this.fire('_selectColor',{color:W.rgbToHEX.apply(null,this.getRGB())})},L.prototype.moveSaturationAndValue=function(Z,Q,$){var ee,te,ae,oe;Z=Z||0,Q=Q||0,ee=Math.abs(Y[0]),te=Y[1],ae=Z*te/100-ee,oe=te-Q*te/100-ee,this._moveColorSliderHandle(ae,oe,$)},L.prototype._moveColorSliderByPosition=function(Z,Q){var $=Y[0];this._moveColorSliderHandle(Z+$,Q+$)},L.prototype.getSaturationAndValue=function(){var Z=Math.abs(Y[0]),Q=Z+Y[1],$=U.getTranslateXY(this.sliderHandleElement),ee,te;return ee=100*(($[1]+Z)/Q),te=100-100*(($[0]+Z)/Q),[ee,te]},L.prototype._moveHueHandle=function(Z,Q){var $=this.huebarHandleElement,ee=this.baseColorElement,te,ae;Z=Math.max(K[0],Z),Z=Math.min(K[1],Z),U.setTranslateY($,Z),te=W.hsvToRGB(this.getHue(),100,100),ae=W.rgbToHEX.apply(null,te),U.setGradientColorStop(ee,ae),Q||this.fire('_selectColor',{color:W.rgbToHEX.apply(null,this.getRGB())})},L.prototype.moveHue=function(Z,Q){var $=0,ee,te;ee=Math.abs(K[0]),te=ee+K[1],Z=Z||0,$=te*Z/J-ee,this._moveHueHandle($,Q)},L.prototype._moveHueByPosition=function(Z){var Q=K[0];this._moveHueHandle(Z+Q)},L.prototype.getHue=function(){var Z=this.huebarHandleElement,Q=U.getTranslateXY(Z),$,ee;return $=Math.abs(K[0]),ee=$+K[1],(Q[0]+$)*J/ee},L.prototype.getHSV=function(){var Z=this.getSaturationAndValue(),Q=this.getHue();return[Q].concat(Z)},L.prototype.getRGB=function(){return W.hsvToRGB.apply(null,this.getHSV())},L.prototype._prepareColorSliderForMouseEvent=function(Z){var Q=this.options,$=H.closest(Z.target,'.'+Q.cssPrefix+'slider-part'),ee;return ee=this._dragDataCache={isColorSlider:H.hasClass($,Q.cssPrefix+'slider-left'),parentElement:$},ee},L.prototype._onClick=function(Z){var Q=this._prepareColorSliderForMouseEvent(Z),$=z.getMousePosition(Z.originEvent,Q.parentElement);Q.isColorSlider?this._moveColorSliderByPosition($[0],$[1]):this._moveHueByPosition($[1]),this._dragDataCache=null},L.prototype._onDragStart=function(Z){this._prepareColorSliderForMouseEvent(Z)},L.prototype._onDrag=function(Z){var Q=this._dragDataCache,$=z.getMousePosition(Z.originEvent,Q.parentElement);Q.isColorSlider?this._moveColorSliderByPosition($[0],$[1]):this._moveHueByPosition($[1])},L.prototype._onDragEnd=function(){this._dragDataCache=null},N.CustomEvents.mixin(L),A.exports=L},function(A,I,R){'use strict';var L=R(8),N=/[\.\-0-9]+/g,z={isOldBrowser:function(){var U=z._isOldBrowser;return L.isExisty(U)||(z._isOldBrowser=U=L.browser.msie&&9>L.browser.version),U},getTranslateXY:function(U){var W;return z.isOldBrowser()?(W=U.style,[parseFloat(W.top),parseFloat(W.left)]):(W=U.getAttribute('transform'),!W)?[0,0]:(W=W.match(N),[parseFloat(W[1]),parseFloat(W[0])])},setTranslateXY:function(U,W,V){z.isOldBrowser()?(U.style.left=W+'px',U.style.top=V+'px'):U.setAttribute('transform','translate('+W+','+V+')')},setTranslateY:function(U,W){z.isOldBrowser()?U.style.top=W+'px':U.setAttribute('transform','translate('+-6+','+W+')')},setStrokeColor:function(U,W){z.isOldBrowser()?U.strokecolor=W:U.setAttribute('stroke',W)},setGradientColorStop:function(U,W){z.isOldBrowser()?U.color=W:U.setAttribute('stop-color',W)}};A.exports=z},function(A,I,R){(function(L){'use strict';var N=R(8),H=['<div class="{{cssPrefix}}slider-left {{cssPrefix}}slider-part">{{slider}}</div>','<div class="{{cssPrefix}}slider-right {{cssPrefix}}slider-part">{{huebar}}</div>'].join('\n'),z=['<svg class="{{cssPrefix}}svg {{cssPrefix}}svg-slider">','<defs>','<linearGradient id="{{cssPrefix}}svg-fill-color" x1="0%" y1="0%" x2="100%" y2="0%">','<stop offset="0%" stop-color="rgb(255,255,255)" />','<stop class="{{cssPrefix}}slider-basecolor" offset="100%" stop-color="rgb(255,0,0)" />','</linearGradient>','<linearGradient id="{{cssPrefix}}svn-fill-black" x1="0%" y1="0%" x2="0%" y2="100%">','<stop offset="0%" style="stop-color:rgb(0,0,0);stop-opacity:0" />','<stop offset="100%" style="stop-color:rgb(0,0,0);stop-opacity:1" />','</linearGradient>','</defs>','<rect width="100%" height="100%" fill="url(#{{cssPrefix}}svg-fill-color)"></rect>','<rect width="100%" height="100%" fill="url(#{{cssPrefix}}svn-fill-black)"></rect>','<path transform="translate(0,0)" class="{{cssPrefix}}slider-handle" d="M0 7.5 L15 7.5 M7.5 15 L7.5 0 M2 7 a5.5 5.5 0 1 1 0 1 Z" stroke="black" stroke-width="0.75" fill="none" />','</svg>'].join('\n'),U=['<div class="{{cssPrefix}}vml-slider">','<v:rect strokecolor="none" class="{{cssPrefix}}vml {{cssPrefix}}vml-slider-bg">','<v:fill class="{{cssPrefix}}vml {{cssPrefix}}slider-basecolor" type="gradient" method="none" color="#ff0000" color2="#fff" angle="90" />','</v:rect>','<v:rect strokecolor="#ccc" class="{{cssPrefix}}vml {{cssPrefix}}vml-slider-bg">','<v:fill type="gradient" method="none" color="black" color2="white" o:opacity2="0%" class="{{cssPrefix}}vml" />','</v:rect>','<v:shape class="{{cssPrefix}}vml {{cssPrefix}}slider-handle" coordsize="1 1" style="width:1px;height:1px;"path="m 0,7 l 14,7 m 7,14 l 7,0 ar 12,12 2,2 z" filled="false" stroked="true" />','</div>'].join('\n'),W=['<svg class="{{cssPrefix}}svg {{cssPrefix}}svg-huebar">','<defs>','<linearGradient id="g" x1="0%" y1="0%" x2="0%" y2="100%">','<stop offset="0%" stop-color="rgb(255,0,0)" />','<stop offset="16.666%" stop-color="rgb(255,255,0)" />','<stop offset="33.333%" stop-color="rgb(0,255,0)" />','<stop offset="50%" stop-color="rgb(0,255,255)" />','<stop offset="66.666%" stop-color="rgb(0,0,255)" />','<stop offset="83.333%" stop-color="rgb(255,0,255)" />','<stop offset="100%" stop-color="rgb(255,0,0)" />','</linearGradient>','</defs>','<rect width="18px" height="100%" fill="url(#g)"></rect>','<path transform="translate(-6,-3)" class="{{cssPrefix}}huebar-handle" d="M0 0 L4 4 L0 8 L0 0 Z" fill="black" stroke="none" />','</svg>'].join('\n'),V=['<div class="{{cssPrefix}}vml-huebar">','<v:rect strokecolor="#ccc" class="{{cssPrefix}}vml {{cssPrefix}}vml-huebar-bg">','<v:fill type="gradient" method="none" colors="0% rgb(255,0,0), 16.666% rgb(255,255,0), 33.333% rgb(0,255,0), 50% rgb(0,255,255), 66.666% rgb(0,0,255), 83.333% rgb(255,0,255), 100% rgb(255,0,0)" angle="180" class="{{cssPrefix}}vml" />','</v:rect>','<v:shape class="{{cssPrefix}}vml {{cssPrefix}}huebar-handle" coordsize="1 1" style="width:1px;height:1px;position:absolute;z-index:1;right:22px;top:-3px;"path="m 0,0 l 4,4 l 0,8 l 0,0 z" filled="true" fillcolor="black" stroked="false" />','</div>'].join('\n'),G=N.browser.msie&&9>N.browser.version;G&&L.document.namespaces.add('v','urn:schemas-microsoft-com:vml'),A.exports={layout:H,slider:G?U:z,huebar:G?V:W}}).call(I,function(){return this}())}])})},function(m,_,E){'use strict';function A(z,U){if(!(z instanceof U))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(_,'__esModule',{value:!0});var I=function(){function z(U,W){for(var V=0,G;V<W.length;V++)G=W[V],G.enumerable=G.enumerable||!1,G.configurable=!0,'value'in G&&(G.writable=!0),Object.defineProperty(U,G.key,G)}return function(U,W,V){return W&&z(U.prototype,W),V&&z(U,V),U}}(),R=E(3),L=function(z){return z&&z.__esModule?z:{default:z}}(R),N=E(72),H=function(){function z(U){var W=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};A(this,z),this._value=W.value||0,this.rangeElement=U,this._drawRangeElement(),this.rangeWidth=(0,N.toInteger)(window.getComputedStyle(U,null).width)-12,this._min=W.min||0,this._max=W.max||100,this._absMax=-1*this._min+this._max,this.realTimeEvent=W.realTimeEvent||!1,this._addClickEvent(),this._addDragEvent(),this.value=W.value,this.trigger('change')}return I(z,[{key:'trigger',value:function(W){this.fire(W,this._value)}},{key:'_drawRangeElement',value:function(){this.rangeElement.classList.add('tui-image-editor-range'),this.bar=document.createElement('div'),this.bar.className='tui-image-editor-virtual-range-bar',this.subbar=document.createElement('div'),this.subbar.className='tui-image-editor-virtual-range-subbar',this.pointer=document.createElement('div'),this.pointer.className='tui-image-editor-virtual-range-pointer',this.bar.appendChild(this.subbar),this.bar.appendChild(this.pointer),this.rangeElement.appendChild(this.bar)}},{key:'_addClickEvent',value:function(){var W=this;this.rangeElement.addEventListener('click',function(V){if(V.stopPropagation(),'tui-image-editor-range'===V.target.className){var G=V.offsetX,X=G/W.rangeWidth,Y=W._absMax*X+W._min;W.pointer.style.left=X*W.rangeWidth+'px',W.subbar.style.right=(1-X)*W.rangeWidth+'px',W._value=Y,W.fire('change',Y)}})}},{key:'_addDragEvent',value:function(){var W=this;this.pointer.addEventListener('mousedown',function(V){W.firstPosition=V.screenX,W.firstLeft=(0,N.toInteger)(W.pointer.style.left)||0,W.dragEventHandler={changeAngle:W._changeAngle.bind(W),stopChangingAngle:W._stopChangingAngle.bind(W)},document.addEventListener('mousemove',W.dragEventHandler.changeAngle),document.addEventListener('mouseup',W.dragEventHandler.stopChangingAngle)})}},{key:'_changeAngle',value:function(W){var V=W.screenX,G=V-this.firstPosition,X=this.firstLeft+G;X=X>this.rangeWidth?this.rangeWidth:X,X=0>X?0:X,this.pointer.style.left=X+'px',this.subbar.style.right=this.rangeWidth-X+'px';var Y=X/this.rangeWidth,K=this._absMax*Y+this._min;this._value=K,this.realTimeEvent&&this.fire('change',K)}},{key:'_stopChangingAngle',value:function(){this.fire('change',this._value),document.removeEventListener('mousemove',this.dragEventHandler.changeAngle),document.removeEventListener('mouseup',this.dragEventHandler.stopChangingAngle)}},{key:'max',set:function(W){this._max=W,this._absMax=-1*this._min+this._max,this.value=this._value},get:function(){return this._max}},{key:'value',get:function(){return this._value},set:function(W){var V=W-this._min,G=V*this.rangeWidth/this._absMax;this.rangeWidth<G&&(G=this.rangeWidth),this.pointer.style.left=G+'px',this.subbar.style.right=this.rangeWidth-G+'px',this._value=W}}]),z}();L.default.CustomEvents.mixin(H),_.default=H},function(m,_){'use strict';function E(I,R){if(!(I instanceof R))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(_,'__esModule',{value:!0});var M=function(){function I(R,L){for(var N=0,H;N<L.length;N++)H=L[N],H.enumerable=H.enumerable||!1,H.configurable=!0,'value'in H&&(H.writable=!0),Object.defineProperty(R,H.key,H)}return function(R,L,N){return L&&I(R.prototype,L),N&&I(R,N),R}}(),A=function(){function I(R,L){var N=L.name,H=L.iconStyle,z=L.menuBarPosition,U=L.templateHtml;E(this,I),this.selector=function(W){return R.querySelector(W)},this.menuBarPosition=z,this.toggleDirection='top'===z?'down':'up',this.colorPickerControls=[],this._makeSubMenuElement(R,{name:N,iconStyle:H,templateHtml:U})}return M(I,[{key:'colorPickerChangeShow',value:function(L){this.colorPickerControls.forEach(function(N){L!==N&&N.hide()})}},{key:'getButtonType',value:function(L,N){return L.className.match(RegExp('('+N.join('|')+')'))[0]}},{key:'changeClass',value:function(L,N,H){L.classList.remove(N),L.classList.add(H)}},{key:'changeStandbyMode',value:function(){}},{key:'changeStartMode',value:function(){}},{key:'_makeSubMenuElement',value:function(L,N){var H=N.name,z=N.iconStyle,U=N.templateHtml,W=document.createElement('div');W.className='tui-image-editor-menu-'+H,W.innerHTML=U({iconStyle:z}),L.appendChild(W)}}]),I}();_.default=A},function(m,_){'use strict';Object.defineProperty(_,'__esModule',{value:!0}),_.default=function(E){var M=E.iconStyle,A=M.normal,I=M.active;return'\n    <ul class="tui-image-editor-submenu-item">\n        <li id="tie-shape-button">\n            <div class="tui-image-editor-button rect">\n                <div>\n                    <svg class="svg_ic-submenu">\n                        <use xlink:href="'+A.path+'#'+A.name+'-ic-shape-rectangle"\n                            class="normal"/>\n                        <use xlink:href="'+I.path+'#'+I.name+'-ic-shape-rectangle"\n                            class="active"/>\n                    </svg>\n                </div>\n                <label> Rectangle </label>\n            </div>\n            <div class="tui-image-editor-button circle">\n                <div>\n                    <svg class="svg_ic-submenu">\n                        <use xlink:href="'+A.path+'#'+A.name+'-ic-shape-circle"\n                            class="normal"/>\n                        <use xlink:href="'+I.path+'#'+I.name+'-ic-shape-circle"\n                            class="active"/>\n                    </svg>\n                </div>\n                <label> Circle </label>\n            </div>\n            <div class="tui-image-editor-button triangle">\n                <div>\n                    <svg class="svg_ic-submenu">\n                        <use xlink:href="'+A.path+'#'+A.name+'-ic-shape-triangle"\n                            class="normal"/>\n                        <use xlink:href="'+I.path+'#'+I.name+'-ic-shape-triangle"\n                            class="active"/>\n                    </svg>\n                </div>\n                <label> Triangle </label>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition">\n            <div></div>\n        </li>\n        <li id="tie-shape-color-button">\n            <div id="tie-color-fill" title="Fill"></div>\n            <div id="tie-color-stroke" title="Stroke"></div>\n        </li>\n        <li class="tui-image-editor-partition only-left-right">\n            <div></div>\n        </li>\n        <li class="tui-image-editor-newline tui-image-editor-range-wrap">\n            <label class="range">Stroke</label>\n            <div id="tie-stroke-range"></div>\n            <input id="tie-stroke-range-value" class="tui-image-editor-range-value" value="0" />\n        </li>\n    </ul>\n'}},function(m,_,E){'use strict';function M(X){return X&&X.__esModule?X:{default:X}}function A(X,Y){if(!(X instanceof Y))throw new TypeError('Cannot call a class as a function')}function I(X,Y){if(!X)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return Y&&('object'==typeof Y||'function'==typeof Y)?Y:X}function R(X,Y){if('function'!=typeof Y&&null!==Y)throw new TypeError('Super expression must either be null or a function, not '+typeof Y);X.prototype=Object.create(Y&&Y.prototype,{constructor:{value:X,enumerable:!1,writable:!0,configurable:!0}}),Y&&(Object.setPrototypeOf?Object.setPrototypeOf(X,Y):X.__proto__=Y)}Object.defineProperty(_,'__esModule',{value:!0});var L=function(){function X(Y,K){for(var J=0,Z;J<K.length;J++)Z=K[J],Z.enumerable=Z.enumerable||!1,Z.configurable=!0,'value'in Z&&(Z.writable=!0),Object.defineProperty(Y,Z.key,Z)}return function(Y,K,J){return K&&X(Y.prototype,K),J&&X(Y,J),Y}}(),N=E(3),H=M(N),z=E(84),U=M(z),W=E(87),V=M(W),G=function(X){function Y(K,J){var Z=J.iconStyle,Q=J.menuBarPosition;A(this,Y);var $=I(this,(Y.__proto__||Object.getPrototypeOf(Y)).call(this,K,{name:'crop',iconStyle:Z,menuBarPosition:Q,templateHtml:V.default}));return $.status='active',$._els={apply:$.selector('#tie-crop-button .apply'),cancel:$.selector('#tie-crop-button .cancel'),preset:$.selector('#tie-crop-preset-button')},$.defaultPresetButton=$._els.preset.querySelector('.preset-none'),$}return R(Y,X),L(Y,[{key:'addEvent',value:function(J){var Z=this;this.actions=J,this._els.apply.addEventListener('click',function(){Z.actions.crop(),Z._els.apply.classList.remove('active')}),this._els.cancel.addEventListener('click',function(){Z.actions.cancel(),Z._els.apply.classList.remove('active')}),this._els.preset.addEventListener('click',function(Q){var $=Q.target.closest('.tui-image-editor-button.preset');if($){var ee=$.className.match(/preset-[^\s]+/),te=ee[0];Z._setPresetButtonActive($),Z.actions.preset(te)}})}},{key:'changeStartMode',value:function(){this.actions.modeChange('crop')}},{key:'changeStandbyMode',value:function(){this.actions.stopDrawingMode(),this._setPresetButtonActive()}},{key:'changeApplyButtonStatus',value:function(J){J?this._els.apply.classList.add('active'):this._els.apply.classList.remove('active')}},{key:'_setPresetButtonActive',value:function(){var J=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.defaultPresetButton;H.default.forEach([].slice.call(this._els.preset.querySelectorAll('.preset')),function(Z){Z.classList.remove('active')}),J&&J.classList.add('active')}}]),Y}(U.default);_.default=G},function(m,_){'use strict';Object.defineProperty(_,'__esModule',{value:!0}),_.default=function(E){var M=E.iconStyle,A=M.normal,I=M.active;return'\n    <ul class="tui-image-editor-submenu-item">\n        <li id="tie-crop-preset-button">\n            <div class="tui-image-editor-button preset preset-none active">\n                <div>\n                    <svg class="svg_ic-submenu">\n                        <use xlink:href="'+A.path+'#'+A.name+'-ic-shape-rectangle"\n                            class="normal"/>\n                        <use xlink:href="'+I.path+'#'+I.name+'-ic-shape-rectangle"\n                            class="active"/>\n                    </svg>\n                </div>\n                <label> Custom </label>\n            </div>\n            <div class="tui-image-editor-button preset preset-square">\n                <div>\n                    <svg class="svg_ic-submenu">\n                        <use xlink:href="'+A.path+'#'+A.name+'-ic-crop"\n                            class="normal"/>\n                        <use xlink:href="'+I.path+'#'+I.name+'-ic-crop"\n                            class="active"/>\n                    </svg>\n                </div>\n                <label> Square </label>\n            </div>\n            <div class="tui-image-editor-button preset preset-3-2">\n                <div>\n                    <svg class="svg_ic-submenu">\n                        <use xlink:href="'+A.path+'#'+A.name+'-ic-crop"\n                            class="normal"/>\n                        <use xlink:href="'+I.path+'#'+I.name+'-ic-crop"\n                            class="active"/>\n                    </svg>\n                </div>\n                <label> 3:2 </label>\n            </div>\n            <div class="tui-image-editor-button preset preset-4-3">\n                <div>\n                    <svg class="svg_ic-submenu">\n                        <use xlink:href="'+A.path+'#'+A.name+'-ic-crop"\n                            class="normal"/>\n                        <use xlink:href="'+I.path+'#'+I.name+'-ic-crop"\n                            class="active"/>\n                    </svg>\n                </div>\n                <label> 4:3 </label>\n            </div>\n            <div class="tui-image-editor-button preset preset-5-4">\n                <div>\n                    <svg class="svg_ic-submenu">\n                        <use xlink:href="'+A.path+'#'+A.name+'-ic-crop"\n                            class="normal"/>\n                        <use xlink:href="'+I.path+'#'+I.name+'-ic-crop"\n                            class="active"/>\n                    </svg>\n                </div>\n                <label> 5:4 </label>\n            </div>\n            <div class="tui-image-editor-button preset preset-7-5">\n                <div>\n                    <svg class="svg_ic-submenu">\n                        <use xlink:href="'+A.path+'#'+A.name+'-ic-crop"\n                            class="normal"/>\n                        <use xlink:href="'+I.path+'#'+I.name+'-ic-crop"\n                            class="active"/>\n                    </svg>\n                </div>\n                <label> 7:5 </label>\n            </div>\n            <div class="tui-image-editor-button preset preset-16-9">\n                <div>\n                    <svg class="svg_ic-submenu">\n                        <use xlink:href="'+A.path+'#'+A.name+'-ic-crop"\n                            class="normal"/>\n                        <use xlink:href="'+I.path+'#'+I.name+'-ic-crop"\n                            class="active"/>\n                    </svg>\n                </div>\n                <label> 16:9 </label>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition tui-image-editor-newline">\n        </li>\n        <li class="tui-image-editor-partition only-left-right">\n            <div></div>\n        </li>\n        <li id="tie-crop-button" class="action">\n            <div class="tui-image-editor-button apply">\n                <svg class="svg_ic-menu">\n                    <use xlink:href="'+A.path+'#'+A.name+'-ic-apply" class="normal"/>\n                    <use xlink:href="'+I.path+'#'+I.name+'-ic-apply" class="active"/>\n                </svg>\n                <label>\n                    Apply\n                </label>\n            </div>\n            <div class="tui-image-editor-button cancel">\n                <svg class="svg_ic-menu">\n                    <use xlink:href="'+A.path+'#'+A.name+'-ic-cancel" class="normal"/>\n                    <use xlink:href="'+I.path+'#'+I.name+'-ic-cancel" class="active"/>\n                </svg>\n                <label>\n                    Cancel\n                </label>\n            </div>\n        </li>\n    </ul>\n'}},function(m,_,E){'use strict';function M(X){return X&&X.__esModule?X:{default:X}}function A(X,Y){if(!(X instanceof Y))throw new TypeError('Cannot call a class as a function')}function I(X,Y){if(!X)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return Y&&('object'==typeof Y||'function'==typeof Y)?Y:X}function R(X,Y){if('function'!=typeof Y&&null!==Y)throw new TypeError('Super expression must either be null or a function, not '+typeof Y);X.prototype=Object.create(Y&&Y.prototype,{constructor:{value:X,enumerable:!1,writable:!0,configurable:!0}}),Y&&(Object.setPrototypeOf?Object.setPrototypeOf(X,Y):X.__proto__=Y)}Object.defineProperty(_,'__esModule',{value:!0});var L=function(){function X(Y,K){for(var J=0,Z;J<K.length;J++)Z=K[J],Z.enumerable=Z.enumerable||!1,Z.configurable=!0,'value'in Z&&(Z.writable=!0),Object.defineProperty(Y,Z.key,Z)}return function(Y,K,J){return K&&X(Y.prototype,K),J&&X(Y,J),Y}}(),N=E(3),H=M(N),z=E(84),U=M(z),W=E(89),V=M(W),G=function(X){function Y(K,J){var Z=J.iconStyle,Q=J.menuBarPosition;A(this,Y);var $=I(this,(Y.__proto__||Object.getPrototypeOf(Y)).call(this,K,{name:'flip',iconStyle:Z,menuBarPosition:Q,templateHtml:V.default}));return $.flipStatus=!1,$._els={flipButton:$.selector('#tie-flip-button')},$}return R(Y,X),L(Y,[{key:'addEvent',value:function(J){this._actions=J,this._els.flipButton.addEventListener('click',this._changeFlip.bind(this))}},{key:'_changeFlip',value:function(J){var Z=this,Q=J.target.closest('.tui-image-editor-button');if(Q){var $=this.getButtonType(Q,['flipX','flipY','resetFlip']);if(!this.flipStatus&&'resetFlip'===$)return;this._actions.flip($).then(function(ee){var te=Z._els.flipButton.classList;Z.flipStatus=!1,te.remove('resetFlip'),H.default.forEach(['flipX','flipY'],function(ae){te.remove(ae),ee[ae]&&(te.add(ae),te.add('resetFlip'),Z.flipStatus=!0)})})}}}]),Y}(U.default);_.default=G},function(m,_){'use strict';Object.defineProperty(_,'__esModule',{value:!0}),_.default=function(E){var M=E.iconStyle,A=M.normal,I=M.active;return'\n    <ul id="tie-flip-button" class="tui-image-editor-submenu-item">\n        <li>\n            <div class="tui-image-editor-button flipX">\n                <div>\n                    <svg class="svg_ic-submenu">\n                        <use xlink:href="'+A.path+'#'+A.name+'-ic-flip-x" class="normal"/>\n                        <use xlink:href="'+I.path+'#'+I.name+'-ic-flip-x" class="active"/>\n                    </svg>\n                </div>\n                <label>\n                    Flip X\n                </label>\n            </div>\n            <div class="tui-image-editor-button flipY">\n                <div>\n                    <svg class="svg_ic-submenu">\n                        <use xlink:href="'+A.path+'#'+A.name+'-ic-flip-y" class="normal"/>\n                        <use xlink:href="'+I.path+'#'+I.name+'-ic-flip-y" class="active"/>\n                    </svg>\n                </div>\n                <label>\n                    Flip Y\n                </label>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition">\n            <div></div>\n        </li>\n        <li>\n            <div class="tui-image-editor-button resetFlip">\n                <div>\n                    <svg class="svg_ic-submenu">\n                        <use xlink:href="'+A.path+'#'+A.name+'-ic-flip-reset"\n                            class="normal"/>\n                        <use xlink:href="'+I.path+'#'+I.name+'-ic-flip-reset"\n                            class="active"/>\n                    </svg>\n                </div>\n                <label>\n                    Reset\n                </label>\n            </div>\n        </li>\n    </ul>\n'}},function(m,_,E){'use strict';function M(Z){return Z&&Z.__esModule?Z:{default:Z}}function A(Z,Q){if(!(Z instanceof Q))throw new TypeError('Cannot call a class as a function')}function I(Z,Q){if(!Z)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return Q&&('object'==typeof Q||'function'==typeof Q)?Q:Z}function R(Z,Q){if('function'!=typeof Q&&null!==Q)throw new TypeError('Super expression must either be null or a function, not '+typeof Q);Z.prototype=Object.create(Q&&Q.prototype,{constructor:{value:Z,enumerable:!1,writable:!0,configurable:!0}}),Q&&(Object.setPrototypeOf?Object.setPrototypeOf(Z,Q):Z.__proto__=Q)}Object.defineProperty(_,'__esModule',{value:!0});var L=function(){function Z(Q,$){for(var ee=0,te;ee<$.length;ee++)te=$[ee],te.enumerable=te.enumerable||!1,te.configurable=!0,'value'in te&&(te.writable=!0),Object.defineProperty(Q,te.key,te)}return function(Q,$,ee){return $&&Z(Q.prototype,$),ee&&Z(Q,ee),Q}}(),N=E(83),H=M(N),z=E(84),U=M(z),W=E(91),V=M(W),G=E(72),X=E(73),J=function(Z){function Q($,ee){var te=ee.iconStyle,ae=ee.menuBarPosition;A(this,Q);var oe=I(this,(Q.__proto__||Object.getPrototypeOf(Q)).call(this,$,{name:'rotate',iconStyle:te,menuBarPosition:ae,templateHtml:V.default}));return oe._els={rotateButton:oe.selector('#tie-retate-button'),rotateRange:new H.default(oe.selector('#tie-rotate-range'),X.defaultRotateRangeValus),rotateRangeValue:oe.selector('#tie-ratate-range-value')},oe}return R(Q,Z),L(Q,[{key:'addEvent',value:function(ee){this.actions=ee,this._els.rotateButton.addEventListener('click',this._changeRotateForButton.bind(this)),this._els.rotateRange.on('change',this._changeRotateForRange.bind(this)),this._els.rotateRangeValue.setAttribute('readonly',!0)}},{key:'_changeRotateForRange',value:function(ee){var te=(0,G.toInteger)(ee);this._els.rotateRangeValue.value=te,this.actions.setAngle(te)}},{key:'_changeRotateForButton',value:function(ee){var te=ee.target.closest('.tui-image-editor-button');if(te){var ae=this.getButtonType(te,['counterclockwise','clockwise']),oe={clockwise:30,counterclockwise:-30}[ae];this.actions.rotate(oe)}}}]),Q}(U.default);_.default=J},function(m,_){'use strict';Object.defineProperty(_,'__esModule',{value:!0}),_.default=function(E){var M=E.iconStyle,A=M.normal,I=M.active;return'\n    <ul class="tui-image-editor-submenu-item">\n        <li id="tie-retate-button">\n            <div class="tui-image-editor-button clockwise">\n                <div>\n                    <svg class="svg_ic-submenu">\n                        <use xlink:href="'+A.path+'#'+A.name+'-ic-rotate-clockwise"\n                            class="normal"/>\n                        <use xlink:href="'+I.path+'#'+I.name+'-ic-rotate-clockwise"\n                            class="active"/>\n                    </svg>\n                </div>\n                <label> 30 </label>\n            </div>\n            <div class="tui-image-editor-button counterclockwise">\n                <div>\n                    <svg class="svg_ic-submenu">\n                        <use xlink:href="'+A.path+'#'+A.name+'-ic-rotate-counterclockwise"\n                            class="normal"/>\n                        <use xlink:href="'+I.path+'#'+I.name+'-ic-rotate-counterclockwise"\n                            class="active"/>\n                    </svg>\n                </div>\n                <label> -30 </label>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition only-left-right">\n            <div></div>\n        </li>\n        <li class="tui-image-editor-newline tui-image-editor-range-wrap">\n            <label class="range">Range</label>\n            <div id="tie-rotate-range"></div>\n            <input id="tie-ratate-range-value" class="tui-image-editor-range-value" value="0" />\n        </li>\n    </ul>\n'}},function(m,_,E){'use strict';function M(Z){return Z&&Z.__esModule?Z:{default:Z}}function A(Z,Q){if(!(Z instanceof Q))throw new TypeError('Cannot call a class as a function')}function I(Z,Q){if(!Z)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return Q&&('object'==typeof Q||'function'==typeof Q)?Q:Z}function R(Z,Q){if('function'!=typeof Q&&null!==Q)throw new TypeError('Super expression must either be null or a function, not '+typeof Q);Z.prototype=Object.create(Q&&Q.prototype,{constructor:{value:Z,enumerable:!1,writable:!0,configurable:!0}}),Q&&(Object.setPrototypeOf?Object.setPrototypeOf(Z,Q):Z.__proto__=Q)}Object.defineProperty(_,'__esModule',{value:!0});var L=function(){function Z(Q,$){for(var ee=0,te;ee<$.length;ee++)te=$[ee],te.enumerable=te.enumerable||!1,te.configurable=!0,'value'in te&&(te.writable=!0),Object.defineProperty(Q,te.key,te)}return function(Q,$,ee){return $&&Z(Q.prototype,$),ee&&Z(Q,ee),Q}}(),N=E(83),H=M(N),z=E(81),U=M(z),W=E(84),V=M(W),G=E(93),X=M(G),Y=E(72),K=E(73),J=function(Z){function Q($,ee){var te=ee.iconStyle,ae=ee.menuBarPosition;A(this,Q);var oe=I(this,(Q.__proto__||Object.getPrototypeOf(Q)).call(this,$,{name:'text',iconStyle:te,menuBarPosition:ae,templateHtml:X.default}));return oe.effect={bold:!1,italic:!1,underline:!1},oe.align='left',oe._els={textEffectButton:oe.selector('#tie-text-effect-button'),textAlignButton:oe.selector('#tie-text-align-button'),textColorpicker:new U.default(oe.selector('#tie-text-color'),'#ffbb3b',oe.toggleDirection),textRange:new H.default(oe.selector('#tie-text-range'),K.defaultTextRangeValus),textRangeValue:oe.selector('#tie-text-range-value')},oe}return R(Q,Z),L(Q,[{key:'addEvent',value:function(ee){this.actions=ee,this._els.textEffectButton.addEventListener('click',this._setTextEffectHandler.bind(this)),this._els.textAlignButton.addEventListener('click',this._setTextAlignHandler.bind(this)),this._els.textRange.on('change',this._changeTextRnageHandler.bind(this)),this._els.textRangeValue.value=this._els.textRange.value,this._els.textRangeValue.setAttribute('readonly',!0),this._els.textColorpicker.on('change',this._changeColorHandler.bind(this))}},{key:'changeStandbyMode',value:function(){this.actions.stopDrawingMode()}},{key:'changeStartMode',value:function(){this.actions.modeChange('text')}},{key:'_setTextEffectHandler',value:function(ee){var te=ee.target.closest('.tui-image-editor-button'),ae=te.className.match(/(bold|italic|underline)/),oe=ae[0],ne={bold:{fontWeight:'bold'},italic:{fontStyle:'italic'},underline:{textDecoration:'underline'}}[oe];this.effect[oe]=!this.effect[oe],te.classList.toggle('active'),this.actions.changeTextStyle(ne)}},{key:'_setTextAlignHandler',value:function(ee){var te=ee.target.closest('.tui-image-editor-button');if(te){var ae=this.getButtonType(te,['left','center','right']);ee.currentTarget.classList.remove(this.align),this.align!==ae&&ee.currentTarget.classList.add(ae),this.actions.changeTextStyle({textAlign:ae}),this.align=ae}}},{key:'_changeTextRnageHandler',value:function(ee){ee=(0,Y.toInteger)(ee),(0,Y.toInteger)(this._els.textRangeValue.value)!==ee&&(this.actions.changeTextStyle({fontSize:ee}),this._els.textRangeValue.value=ee)}},{key:'_changeColorHandler',value:function(ee){ee=ee||'transparent',this.actions.changeTextStyle({fill:ee})}},{key:'textColor',get:function(){return this._els.textColorpicker.color}},{key:'fontSize',get:function(){return this._els.textRange.value},set:function(ee){this._els.textRange.value=ee,this._els.textRangeValue.value=ee}}]),Q}(V.default);_.default=J},function(m,_){'use strict';Object.defineProperty(_,'__esModule',{value:!0}),_.default=function(E){var M=E.iconStyle,A=M.normal,I=M.active;return'\n    <ul class="tui-image-editor-submenu-item">\n        <li id="tie-text-effect-button">\n            <div class="tui-image-editor-button bold">\n                <div>\n                    <svg class="svg_ic-submenu">\n                    <use xlink:href="'+A.path+'#'+A.name+'-ic-text-bold" class="normal"/>\n                    <use xlink:href="'+I.path+'#'+I.name+'-ic-text-bold" class="active"/>\n                    </svg>\n                </div>\n                <label> Bold </label>\n            </div>\n            <div class="tui-image-editor-button italic">\n                <div>\n                    <svg class="svg_ic-submenu">\n                    <use xlink:href="'+A.path+'#'+A.name+'-ic-text-italic" class="normal"/>\n                    <use xlink:href="'+I.path+'#'+I.name+'-ic-text-italic" class="active"/>\n                    </svg>\n                </div>\n                <label> Italic </label>\n            </div>\n            <div class="tui-image-editor-button underline">\n                <div>\n                    <svg class="svg_ic-submenu">\n                        <use xlink:href="'+A.path+'#'+A.name+'-ic-text-underline"\n                            class="normal"/>\n                        <use xlink:href="'+I.path+'#'+I.name+'-ic-text-underline"\n                            class="active"/>\n                    </svg>\n                </div>\n                <label> Underline </label>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition">\n            <div></div>\n        </li>\n        <li id="tie-text-align-button">\n            <div class="tui-image-editor-button left">\n                <div>\n                    <svg class="svg_ic-submenu">\n                     <use xlink:href="'+A.path+'#'+A.name+'-ic-text-align-left"\n                        class="normal"/>\n                     <use xlink:href="'+I.path+'#'+I.name+'-ic-text-align-left"\n                        class="active"/>\n                    </svg>\n                </div>\n                <label> Left </label>\n            </div>\n            <div class="tui-image-editor-button center">\n                <div>\n                    <svg class="svg_ic-submenu">\n                     <use xlink:href="'+A.path+'#'+A.name+'-ic-text-align-center"\n                        class="normal"/>\n                     <use xlink:href="'+I.path+'#'+I.name+'-ic-text-align-center"\n                        class="active"/>\n                    </svg>\n                </div>\n                <label> Center </label>\n            </div>\n            <div class="tui-image-editor-button right">\n                <div>\n                    <svg class="svg_ic-submenu">\n                     <use xlink:href="'+A.path+'#'+A.name+'-ic-text-align-right"\n                        class="normal"/>\n                     <use xlink:href="'+I.path+'#'+I.name+'-ic-text-align-right"\n                        class="active"/>\n                    </svg>\n                </div>\n                <label> Right </label>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition">\n            <div></div>\n        </li>\n        <li>\n            <div id="tie-text-color" title="Color"></div>\n        </li>\n        <li class="tui-image-editor-partition only-left-right">\n            <div></div>\n        </li>\n        <li class="tui-image-editor-newline tui-image-editor-range-wrap">\n            <label class="range">Text size</label>\n            <div id="tie-text-range"></div>\n            <input id="tie-text-range-value" class="tui-image-editor-range-value" value="0" />\n        </li>\n    </ul>\n'}},function(m,_,E){'use strict';function M(X){return X&&X.__esModule?X:{default:X}}function A(X,Y){if(!(X instanceof Y))throw new TypeError('Cannot call a class as a function')}function I(X,Y){if(!X)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return Y&&('object'==typeof Y||'function'==typeof Y)?Y:X}function R(X,Y){if('function'!=typeof Y&&null!==Y)throw new TypeError('Super expression must either be null or a function, not '+typeof Y);X.prototype=Object.create(Y&&Y.prototype,{constructor:{value:X,enumerable:!1,writable:!0,configurable:!0}}),Y&&(Object.setPrototypeOf?Object.setPrototypeOf(X,Y):X.__proto__=Y)}Object.defineProperty(_,'__esModule',{value:!0});var L=function(){function X(Y,K){for(var J=0,Z;J<K.length;J++)Z=K[J],Z.enumerable=Z.enumerable||!1,Z.configurable=!0,'value'in Z&&(Z.writable=!0),Object.defineProperty(Y,Z.key,Z)}return function(Y,K,J){return K&&X(Y.prototype,K),J&&X(Y,J),Y}}(),N=E(84),H=M(N),z=E(72),U=M(z),W=E(95),V=M(W),G=function(X){function Y(K,J){var Z=J.iconStyle,Q=J.menuBarPosition;A(this,Y);var $=I(this,(Y.__proto__||Object.getPrototypeOf(Y)).call(this,K,{name:'mask',iconStyle:Z,menuBarPosition:Q,templateHtml:V.default}));return $._els={applyButton:$.selector('#tie-mask-apply'),maskImageButton:$.selector('#tie-mask-image-file')},$}return R(Y,X),L(Y,[{key:'addEvent',value:function(J){this.actions=J,this._els.maskImageButton.addEventListener('change',this._loadMaskFile.bind(this)),this._els.applyButton.addEventListener('click',this._applyMask.bind(this))}},{key:'_applyMask',value:function(){this.actions.applyFilter(),this._els.applyButton.classList.remove('active')}},{key:'_loadMaskFile',value:function(J){var Z;U.default.isSupportFileApi()||alert('This browser does not support file-api');var Q=J.target.files,$=Q[0];$&&(Z=URL.createObjectURL($),this.actions.loadImageFromURL(Z,$),this._els.applyButton.classList.add('active'))}}]),Y}(H.default);_.default=G},function(m,_){'use strict';Object.defineProperty(_,'__esModule',{value:!0}),_.default=function(E){var M=E.iconStyle,A=M.normal,I=M.active;return'\n    <ul class="tui-image-editor-submenu-item">\n        <li>\n            <div class="tui-image-editor-button">\n                <div>\n                    <input type="file" accept="image/*" id="tie-mask-image-file">\n                    <svg class="svg_ic-submenu">\n                        <use xlink:href="'+A.path+'#'+A.name+'-ic-mask-load" class="normal"/>\n                        <use xlink:href="'+I.path+'#'+I.name+'-ic-mask-load" class="active"/>\n                    </svg>\n                </div>\n                <label> Load Mask Image </label>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition only-left-right">\n            <div></div>\n        </li>\n        <li id="tie-mask-apply" class="tui-image-editor-newline apply" style="margin-top: 22px;margin-bottom: 5px">\n            <div class="tui-image-editor-button apply">\n                <svg class="svg_ic-menu">\n                    <use xlink:href="'+A.path+'#'+A.name+'-ic-apply" class="normal"/>\n                    <use xlink:href="'+I.path+'#'+I.name+'-ic-apply" class="active"/>\n                </svg>\n                <label>\n                    Apply\n                </label>\n            </div>\n        </li>\n    </ul>\n'}},function(m,_,E){'use strict';function M(Z){return Z&&Z.__esModule?Z:{default:Z}}function A(Z,Q){if(!(Z instanceof Q))throw new TypeError('Cannot call a class as a function')}function I(Z,Q){if(!Z)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return Q&&('object'==typeof Q||'function'==typeof Q)?Q:Z}function R(Z,Q){if('function'!=typeof Q&&null!==Q)throw new TypeError('Super expression must either be null or a function, not '+typeof Q);Z.prototype=Object.create(Q&&Q.prototype,{constructor:{value:Z,enumerable:!1,writable:!0,configurable:!0}}),Q&&(Object.setPrototypeOf?Object.setPrototypeOf(Z,Q):Z.__proto__=Q)}Object.defineProperty(_,'__esModule',{value:!0});var L=function(){function Z(Q,$){for(var ee=0,te;ee<$.length;ee++)te=$[ee],te.enumerable=te.enumerable||!1,te.configurable=!0,'value'in te&&(te.writable=!0),Object.defineProperty(Q,te.key,te)}return function(Q,$,ee){return $&&Z(Q.prototype,$),ee&&Z(Q,ee),Q}}(),N=E(3),H=M(N),z=E(81),U=M(z),W=E(84),V=M(W),G=E(97),X=M(G),Y=E(72),K=E(73),J=function(Z){function Q($,ee){var te=ee.iconStyle,ae=ee.menuBarPosition;A(this,Q);var oe=I(this,(Q.__proto__||Object.getPrototypeOf(Q)).call(this,$,{name:'icon',iconStyle:te,menuBarPosition:ae,templateHtml:X.default}));return oe.iconType=null,oe._iconMap={},oe._els={registIconButton:oe.selector('#tie-icon-image-file'),addIconButton:oe.selector('#tie-icon-add-button'),iconColorpicker:new U.default(oe.selector('#tie-icon-color'),'#ffbb3b',oe.toggleDirection)},oe}return R(Q,Z),L(Q,[{key:'addEvent',value:function(ee){this.actions=ee,this._els.iconColorpicker.on('change',this._changeColorHandler.bind(this)),this._els.registIconButton.addEventListener('change',this._registeIconHandler.bind(this)),this._els.addIconButton.addEventListener('click',this._addIconHandler.bind(this))}},{key:'clearIconType',value:function(){this._els.addIconButton.classList.remove(this.iconType),this.iconType=null}},{key:'registDefaultIcon',value:function(){var ee=this;H.default.forEach(K.defaultIconPath,function(te,ae){ee.actions.registDefalutIcons(ae,te)})}},{key:'setIconPickerColor',value:function(ee){this._els.iconColorpicker.color=ee}},{key:'changeStandbyMode',value:function(){this.clearIconType(),this.actions.cancelAddIcon()}},{key:'_changeColorHandler',value:function(ee){ee=ee||'transparent',this.actions.changeColor(ee)}},{key:'_addIconHandler',value:function(ee){var te=ee.target.closest('.tui-image-editor-button');if(te){var ae=te.getAttribute('data-icontype'),oe=this._els.iconColorpicker.color;this.actions.discardSelection(),this.actions.changeSelectableAll(!1),this._els.addIconButton.classList.remove(this.iconType),this._els.addIconButton.classList.add(ae),this.iconType===ae?this.changeStandbyMode():(this.actions.addIcon(ae,oe),this.iconType=ae)}}},{key:'_registeIconHandler',value:function(ee){var te;Y.isSupportFileApi||alert('This browser does not support file-api');var ae=ee.target.files,oe=ae[0];oe&&(te=URL.createObjectURL(oe),this.actions.registCustomIcon(te,oe))}}]),Q}(V.default);_.default=J},function(m,_){'use strict';Object.defineProperty(_,'__esModule',{value:!0}),_.default=function(E){var M=E.iconStyle,A=M.normal,I=M.active;return'\n    <ul class="tui-image-editor-submenu-item">\n        <li id="tie-icon-add-button">\n            <div class="tui-image-editor-button" data-icontype="icon-arrow">\n                <div>\n                    <svg class="svg_ic-submenu">\n                        <use xlink:href="'+A.path+'#'+A.name+'-ic-icon-arrow"\n                            class="normal"/>\n                        <use xlink:href="'+I.path+'#'+I.name+'-ic-icon-arrow"\n                            class="active"/>\n                    </svg>\n                </div>\n                <label>\n                    Arrow\n                </label>\n            </div>\n            <div class="tui-image-editor-button" data-icontype="icon-arrow-2">\n                <div>\n                    <svg class="svg_ic-submenu">\n                        <use xlink:href="'+A.path+'#'+A.name+'-ic-icon-arrow-2"\n                            class="normal"/>\n                        <use xlink:href="'+I.path+'#'+I.name+'-ic-icon-arrow-2"\n                            class="active"/>\n                    </svg>\n                </div>\n                <label>\n                    Arrow-2\n                </label>\n            </div>\n            <div class="tui-image-editor-button" data-icontype="icon-arrow-3">\n                <div>\n                    <svg class="svg_ic-submenu">\n                        <use xlink:href="'+A.path+'#'+A.name+'-ic-icon-arrow-3"\n                            class="normal"/>\n                        <use xlink:href="'+I.path+'#'+I.name+'-ic-icon-arrow-3"\n                            class="active"/>\n                    </svg>\n                </div>\n                <label>\n                    Arrow-3\n                </label>\n            </div>\n            <div class="tui-image-editor-button" data-icontype="icon-star">\n                <div>\n                    <svg class="svg_ic-submenu">\n                        <use xlink:href="'+A.path+'#'+A.name+'-ic-icon-star" class="normal"/>\n                        <use xlink:href="'+I.path+'#'+I.name+'-ic-icon-star" class="active"/>\n                    </svg>\n                </div>\n                <label>\n                    Star-1\n                </label>\n            </div>\n            <div class="tui-image-editor-button" data-icontype="icon-star-2">\n                <div>\n                    <svg class="svg_ic-submenu">\n                        <use xlink:href="'+A.path+'#'+A.name+'-ic-icon-star-2"\n                            class="normal"/>\n                        <use xlink:href="'+I.path+'#'+I.name+'-ic-icon-star-2"\n                            class="active"/>\n                    </svg>\n                </div>\n                <label>\n                    Star-2\n                </label>\n            </div>\n\n            <div class="tui-image-editor-button" data-icontype="icon-polygon">\n                <div>\n                    <svg class="svg_ic-submenu">\n                        <use xlink:href="'+A.path+'#'+A.name+'-ic-icon-polygon"\n                            class="normal"/>\n                        <use xlink:href="'+A.path+'#'+A.name+'-ic-icon-polygon"\n                            class="active"/>\n                    </svg>\n                </div>\n                <label>\n                    Polygon\n                </label>\n            </div>\n\n            <div class="tui-image-editor-button" data-icontype="icon-location">\n                <div>\n                    <svg class="svg_ic-submenu">\n                        <use xlink:href="'+A.path+'#'+A.name+'-ic-icon-location"\n                            class="normal"/>\n                        <use xlink:href="'+I.path+'#'+I.name+'-ic-icon-location"\n                            class="active"/>\n                    </svg>\n                </div>\n                <label>\n                    Location\n                </label>\n            </div>\n\n            <div class="tui-image-editor-button" data-icontype="icon-heart">\n                <div>\n                    <svg class="svg_ic-submenu">\n                        <use xlink:href="'+A.path+'#'+A.name+'-ic-icon-heart"\n                            class="normal"/>\n                        <use xlink:href="'+I.path+'#'+I.name+'-ic-icon-heart"\n                            class="active"/>\n                    </svg>\n                </div>\n                <label>\n                    Heart\n                </label>\n            </div>\n\n            <div class="tui-image-editor-button" data-icontype="icon-bubble">\n                <div>\n                    <svg class="svg_ic-submenu">\n                        <use xlink:href="'+A.path+'#'+A.name+'-ic-icon-bubble"\n                            class="normal"/>\n                        <use xlink:href="'+I.path+'#'+I.name+'-ic-icon-bubble"\n                            class="active"/>\n                    </svg>\n                </div>\n                <label>\n                    Bubble\n                </label>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition">\n            <div></div>\n        </li>\n        <li id="tie-icon-add-button">\n            <div class="tui-image-editor-button" style="margin:0">\n                <div>\n                    <input type="file" accept="image/*" id="tie-icon-image-file">\n                    <svg class="svg_ic-submenu">\n                        <use xlink:href="'+A.path+'#'+A.name+'-ic-icon-load" class="normal"/>\n                        <use xlink:href="'+I.path+'#'+I.name+'-ic-icon-load" class="active"/>\n                    </svg>\n                </div>\n                <label>\n                    Custom icon\n                </label>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition">\n            <div></div>\n        </li>\n        <li>\n            <div id="tie-icon-color" title="Color"></div>\n        </li>\n    </ul>\n'}},function(m,_,E){'use strict';function M($){return $&&$.__esModule?$:{default:$}}function A($,ee){if(!($ instanceof ee))throw new TypeError('Cannot call a class as a function')}function I($,ee){if(!$)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return ee&&('object'==typeof ee||'function'==typeof ee)?ee:$}function R($,ee){if('function'!=typeof ee&&null!==ee)throw new TypeError('Super expression must either be null or a function, not '+typeof ee);$.prototype=Object.create(ee&&ee.prototype,{constructor:{value:$,enumerable:!1,writable:!0,configurable:!0}}),ee&&(Object.setPrototypeOf?Object.setPrototypeOf($,ee):$.__proto__=ee)}Object.defineProperty(_,'__esModule',{value:!0});var L=function(){function $(ee,te){for(var ae=0,oe;ae<te.length;ae++)oe=te[ae],oe.enumerable=oe.enumerable||!1,oe.configurable=!0,'value'in oe&&(oe.writable=!0),Object.defineProperty(ee,oe.key,oe)}return function(ee,te,ae){return te&&$(ee.prototype,te),ae&&$(ee,ae),ee}}(),N=E(72),H=M(N),z=E(81),U=M(z),W=E(83),V=M(W),G=E(84),X=M(G),Y=E(99),K=M(Y),J=E(73),Q=function($){function ee(te,ae){var oe=ae.iconStyle,ne=ae.menuBarPosition;A(this,ee);var ie=I(this,(ee.__proto__||Object.getPrototypeOf(ee)).call(this,te,{name:'draw',iconStyle:oe,menuBarPosition:ne,templateHtml:K.default}));return ie._els={lineSelectButton:ie.selector('#tie-draw-line-select-button'),drawColorpicker:new U.default(ie.selector('#tie-draw-color'),'#00a9ff',ie.toggleDirection),drawRange:new V.default(ie.selector('#tie-draw-range'),J.defaultDrawRangeValus),drawRangeValue:ie.selector('#tie-draw-range-value')},ie.type=null,ie.color=ie._els.drawColorpicker.color,ie.width=ie._els.drawRange.value,ie}return R(ee,$),L(ee,[{key:'addEvent',value:function(ae){this.actions=ae,this._els.lineSelectButton.addEventListener('click',this._changeDrawType.bind(this)),this._els.drawColorpicker.on('change',this._changeDrawColor.bind(this)),this._els.drawRange.on('change',this._changeDrawRange.bind(this)),this._els.drawRangeValue.value=this._els.drawRange.value,this._els.drawRangeValue.setAttribute('readonly',!0)}},{key:'setDrawMode',value:function(){this.actions.setDrawMode(this.type,{width:this.width,color:H.default.getRgb(this.color,0.7)})}},{key:'changeStandbyMode',value:function(){this.type=null,this.actions.stopDrawingMode(),this.actions.changeSelectableAll(!0),this._els.lineSelectButton.classList.remove('free'),this._els.lineSelectButton.classList.remove('line')}},{key:'changeStartMode',value:function(){this.type='free',this._els.lineSelectButton.classList.add('free'),this.setDrawMode()}},{key:'_changeDrawType',value:function(ae){var oe=ae.target.closest('.tui-image-editor-button');if(oe){var ne=this.getButtonType(oe,['free','line']);if(this.actions.discardSelection(),this.type===ne)return void this.changeStandbyMode();this.changeStandbyMode(),this.type=ne,this._els.lineSelectButton.classList.add(ne),this.setDrawMode()}}},{key:'_changeDrawColor',value:function(ae){this.color=ae||'transparent',this.type?this.setDrawMode():this.changeStartMode()}},{key:'_changeDrawRange',value:function(ae){ae=H.default.toInteger(ae),this._els.drawRangeValue.value=ae,this.width=ae,this.type?this.setDrawMode():this.changeStartMode()}}]),ee}(X.default);_.default=Q},function(m,_){'use strict';Object.defineProperty(_,'__esModule',{value:!0}),_.default=function(E){var M=E.iconStyle,A=M.normal,I=M.active;return'\n    <ul class="tui-image-editor-submenu-item">\n        <li id="tie-draw-line-select-button">\n            <div class="tui-image-editor-button free">\n                <div>\n                    <svg class="svg_ic-submenu">\n                        <use xlink:href="'+A.path+'#'+A.name+'-ic-draw-free" class="normal"/>\n                        <use xlink:href="'+I.path+'#'+I.name+'-ic-draw-free" class="active"/>\n                    </svg>\n                </div>\n                <label>\n                    Free\n                </label>\n            </div>\n            <div class="tui-image-editor-button line">\n                <div>\n                    <svg class="svg_ic-submenu">\n                        <use xlink:href="'+A.path+'#'+A.name+'-ic-draw-line" class="normal"/>\n                        <use xlink:href="'+I.path+'#'+I.name+'-ic-draw-line" class="active"/>\n                    </svg>\n                </div>\n                <label>\n                    Straight\n                </label>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition">\n            <div></div>\n        </li>\n        <li>\n            <div id="tie-draw-color" title="Color"></div>\n        </li>\n        <li class="tui-image-editor-partition only-left-right">\n            <div></div>\n        </li>\n        <li class="tui-image-editor-newline tui-image-editor-range-wrap">\n            <label class="range">Range</label>\n            <div id="tie-draw-range"></div>\n            <input id="tie-draw-range-value" class="tui-image-editor-range-value" value="0" />\n        </li>\n    </ul>\n'}},function(m,_,E){'use strict';function M(ae){return ae&&ae.__esModule?ae:{default:ae}}function A(ae,oe){if(!(ae instanceof oe))throw new TypeError('Cannot call a class as a function')}function I(ae,oe){if(!ae)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return oe&&('object'==typeof oe||'function'==typeof oe)?oe:ae}function R(ae,oe){if('function'!=typeof oe&&null!==oe)throw new TypeError('Super expression must either be null or a function, not '+typeof oe);ae.prototype=Object.create(oe&&oe.prototype,{constructor:{value:ae,enumerable:!1,writable:!0,configurable:!0}}),oe&&(Object.setPrototypeOf?Object.setPrototypeOf(ae,oe):ae.__proto__=oe)}Object.defineProperty(_,'__esModule',{value:!0});var L=function(){function ae(oe,ne){for(var ie=0,le;ie<ne.length;ie++)le=ne[ie],le.enumerable=le.enumerable||!1,le.configurable=!0,'value'in le&&(le.writable=!0),Object.defineProperty(oe,le.key,le)}return function(oe,ne,ie){return ne&&ae(oe.prototype,ne),ie&&ae(oe,ie),oe}}(),N=E(3),H=M(N),z=E(81),U=M(z),W=E(83),V=M(W),G=E(84),X=M(G),Y=E(101),K=M(Y),J=E(72),Z=E(73),Q='130px',$=['add','diff','subtract','multiply','screen','lighten','darken'],ee=['grayscale','invert','sepia','sepia2','blur','sharpen','emboss','remove-white','gradient-transparency','brightness','noise','pixelate','color-filter','tint','multiply','blend'],te=function(ae){function oe(ne,ie){var le=ie.iconStyle,se=ie.menuBarPosition;A(this,oe);var ce=I(this,(oe.__proto__||Object.getPrototypeOf(oe)).call(this,ne,{name:'filter',iconStyle:le,menuBarPosition:se,templateHtml:K.default}));return ce.selectBoxShow=!1,ce.checkedMap={},ce._makeControlElement(),ce}return R(oe,ae),L(oe,[{key:'addEvent',value:function(ie){var le=this,se=ie.applyFilter,ce=this._changeRangeValue.bind(this,se);H.default.forEach(ee,function(de){var ue=le.selector('#tie-'+de),pe=(0,J.toCamelCase)(de);le.checkedMap[pe]=ue,ue.addEventListener('change',function(){return ce(pe)})}),this._els.removewhiteThresholdRange.on('change',function(){return ce('removeWhite')}),this._els.removewhiteDistanceRange.on('change',function(){return ce('removeWhite')}),this._els.gradientTransparencyRange.on('change',function(){return ce('gradientTransparency')}),this._els.colorfilterThresholeRange.on('change',function(){return ce('colorFilter')}),this._els.pixelateRange.on('change',function(){return ce('pixelate')}),this._els.noiseRange.on('change',function(){return ce('noise')}),this._els.brightnessRange.on('change',function(){return ce('brightness')}),this._els.blendType.addEventListener('change',function(){return ce('blend')}),this._els.filterBlendColor.on('change',function(){return ce('blend')}),this._els.filterMultiplyColor.on('change',function(){return ce('multiply')}),this._els.tintOpacity.on('change',function(){return ce('tint')}),this._els.filterTintColor.on('change',function(){return ce('tint')}),this._els.blendType.addEventListener('click',function(de){return de.stopPropagation()}),this._els.filterMultiplyColor.on('changeShow',this.colorPickerChangeShow.bind(this)),this._els.filterTintColor.on('changeShow',this.colorPickerChangeShow.bind(this)),this._els.filterBlendColor.on('changeShow',this.colorPickerChangeShow.bind(this))}},{key:'_changeRangeValue',value:function(ie,le){var se=this.checkedMap[le].checked,ce=le,de=this.checkedMap[le].closest('.tui-image-editor-checkbox-group');de&&(se?de.classList.remove('tui-image-editor-disabled'):de.classList.add('tui-image-editor-disabled')),ie(se,ce,this._getFilterOption(ce))}},{key:'_getFilterOption',value:function(ie){var le={};switch(ie){case'removeWhite':le.threshold=(0,J.toInteger)(this._els.removewhiteThresholdRange.value),le.distance=(0,J.toInteger)(this._els.removewhiteDistanceRange.value);break;case'gradientTransparency':le.threshold=(0,J.toInteger)(this._els.gradientTransparencyRange.value);break;case'colorFilter':le.color='#FFFFFF',le.threshold=this._els.colorfilterThresholeRange.value;break;case'pixelate':le.blocksize=(0,J.toInteger)(this._els.pixelateRange.value);break;case'noise':le.noise=(0,J.toInteger)(this._els.noiseRange.value);break;case'brightness':le.brightness=(0,J.toInteger)(this._els.brightnessRange.value);break;case'blend':le.color=this._els.filterBlendColor.color,le.mode=this._els.blendType.value;break;case'multiply':le.color=this._els.filterMultiplyColor.color;break;case'tint':le.color=this._els.filterTintColor.color,le.opacity=this._els.tintOpacity.value;break;default:}return le}},{key:'_makeControlElement',value:function(){var ie=this.selector;this._els={removewhiteThresholdRange:new V.default(ie('#tie-removewhite-threshold-range'),Z.defaultFilterRangeValus.removewhiteThresholdRange),removewhiteDistanceRange:new V.default(ie('#tie-removewhite-distance-range'),Z.defaultFilterRangeValus.removewhiteDistanceRange),gradientTransparencyRange:new V.default(ie('#tie-gradient-transparency-range'),Z.defaultFilterRangeValus.gradientTransparencyRange),brightnessRange:new V.default(ie('#tie-brightness-range'),Z.defaultFilterRangeValus.brightnessRange),noiseRange:new V.default(ie('#tie-noise-range'),Z.defaultFilterRangeValus.noiseRange),pixelateRange:new V.default(ie('#tie-pixelate-range'),Z.defaultFilterRangeValus.pixelateRange),colorfilterThresholeRange:new V.default(ie('#tie-colorfilter-threshole-range'),Z.defaultFilterRangeValus.colorfilterThresholeRange),filterTintColor:new U.default(ie('#tie-filter-tint-color'),'#03bd9e',this.toggleDirection),filterMultiplyColor:new U.default(ie('#tie-filter-multiply-color'),'#515ce6',this.toggleDirection),filterBlendColor:new U.default(ie('#tie-filter-blend-color'),'#ffbb3b',this.toggleDirection)},this._els.tintOpacity=this._pickerWithRange(this._els.filterTintColor.pickerControl),this._els.blendType=this._pickerWithSelectbox(this._els.filterBlendColor.pickerControl),this.colorPickerControls.push(this._els.filterTintColor),this.colorPickerControls.push(this._els.filterMultiplyColor),this.colorPickerControls.push(this._els.filterBlendColor)}},{key:'_pickerWithRange',value:function(ie){var le=document.createElement('div'),se=document.createElement('label'),ce=document.createElement('div');return ce.id='tie-filter-tint-opacity',se.innerHTML='Opacity',le.appendChild(se),le.appendChild(ce),ie.appendChild(le),ie.style.height=Q,new V.default(ce,Z.defaultFilterRangeValus.tintOpacityRange)}},{key:'_pickerWithSelectbox',value:function(ie){var le=document.createElement('div'),se=document.createElement('select'),ce=document.createElement('ul');return le.className='tui-image-editor-selectlist-wrap',ce.className='tui-image-editor-selectlist',le.appendChild(se),le.appendChild(ce),this._makeSelectOptionList(se),ie.appendChild(le),ie.style.height=Q,this._drawSelectOptionList(se,ce),this._pickerWithSelectboxForAddEvent(se,ce),se}},{key:'_drawSelectOptionList',value:function(ie,le){var se=ie.querySelectorAll('option');H.default.forEach(se,function(ce){var de=document.createElement('li');de.innerHTML=ce.innerHTML,de.setAttribute('data-item',ce.value),le.appendChild(de)})}},{key:'_pickerWithSelectboxForAddEvent',value:function(ie,le){var se=this;le.addEventListener('click',function(ce){var de=ce.target.getAttribute('data-item'),ue=document.createEvent('HTMLEvents');ie.querySelector('[value="'+de+'"]').selected=!0,ue.initEvent('change',!0,!0),ie.dispatchEvent(ue),se.selectBoxShow=!1,le.style.display='none'}),ie.addEventListener('mousedown',function(ce){ce.preventDefault(),se.selectBoxShow=!se.selectBoxShow,le.style.display=se.selectBoxShow?'block':'none',le.setAttribute('data-selectitem',ie.value),le.querySelector('[data-item=\''+ie.value+'\']').classList.add('active')})}},{key:'_makeSelectOptionList',value:function(ie){H.default.forEach($,function(le){var se=document.createElement('option');se.setAttribute('value',le),se.innerHTML=le.replace(/^[a-z]/,function(ce){return ce.toUpperCase()}),ie.appendChild(se)})}}]),oe}(X.default);_.default=te},function(m,_){'use strict';Object.defineProperty(_,'__esModule',{value:!0}),_.default=function(){return'\n    <ul class="tui-image-editor-submenu-item">\n        <li class="tui-image-editor-submenu-align">\n            <div class="tui-image-editor-checkbox-wrap fixed-width">\n                <div class="tui-image-editor-checkbox">\n                    <input type="checkbox" id="tie-grayscale">\n                    <label for="tie-grayscale">Grayscale</label>\n                </div>\n                <div class="tui-image-editor-checkbox">\n                    <input type="checkbox" id="tie-invert">\n                    <label for="tie-invert">Invert</label>\n                </div>\n                <div class="tui-image-editor-checkbox">\n                    <input type="checkbox" id="tie-sepia">\n                    <label for="tie-sepia">Sepia</label>\n                </div>\n                <div class="tui-image-editor-checkbox">\n                    <input type="checkbox" id="tie-sepia2">\n                    <label for="tie-sepia2">Sepia2</label>\n                </div>\n                <div class="tui-image-editor-checkbox">\n                    <input type="checkbox" id="tie-blur">\n                    <label for="tie-blur">Blur</label>\n                </div>\n                <div class="tui-image-editor-checkbox">\n                    <input type="checkbox" id="tie-sharpen">\n                    <label for="tie-sharpen">Sharpen</label>\n                </div>\n                <div class="tui-image-editor-checkbox">\n                    <input type="checkbox" id="tie-emboss">\n                    <label for="tie-emboss">Emboss</label>\n                </div>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition">\n            <div></div>\n        </li>\n        <li class="tui-image-editor-submenu-align">\n            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled" style="margin-bottom: 7px;">\n                <div class="tui-image-editor-checkbox-wrap">\n                    <div class="tui-image-editor-checkbox">\n                        <input type="checkbox" id="tie-remove-white">\n                        <label for="tie-remove-white">Remove White</label>\n                    </div>\n                </div>\n                <div class="tui-image-editor-newline tui-image-editor-range-wrap short">\n                    <label>Threshold</label>\n                    <div id="tie-removewhite-threshold-range"></div>\n                </div>\n                <div class="tui-image-editor-newline tui-image-editor-range-wrap short">\n                    <label>Distance</label>\n                    <div id="tie-removewhite-distance-range"></div>\n                </div>\n            </div>\n            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled">\n                <div class="tui-image-editor-newline tui-image-editor-checkbox-wrap">\n                    <div class="tui-image-editor-checkbox">\n                        <input type="checkbox" id="tie-gradient-transparency">\n                        <label for="tie-gradient-transparency">Grayscale</label>\n                    </div>\n                </div>\n                <div class="tui-image-editor-newline tui-image-editor-range-wrap short">\n                    <label>Value</label>\n                    <div id="tie-gradient-transparency-range"></div>\n                </div>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition only-left-right">\n            <div></div>\n        </li>\n        <li class="tui-image-editor-submenu-align">\n            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled">\n                <div class="tui-image-editor-checkbox">\n                    <input type="checkbox" id="tie-brightness">\n                    <label for="tie-brightness">Brightness</label>\n                </div>\n                <div class="tui-image-editor-range-wrap short">\n                    <div id="tie-brightness-range"></div>\n                </div>\n            </div>\n            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled">\n                <div class="tui-image-editor-checkbox">\n                    <input type="checkbox" id="tie-noise">\n                    <label for="tie-noise">Noise</label>\n                </div>\n                <div class="tui-image-editor-range-wrap short">\n                    <div id="tie-noise-range"></div>\n                </div>\n            </div>\n\n            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled">\n                <div class="tui-image-editor-checkbox">\n                    <input type="checkbox" id="tie-pixelate">\n                    <label for="tie-pixelate">Pixelate</label>\n                </div>\n                <div class="tui-image-editor-range-wrap short">\n                    <div id="tie-pixelate-range"></div>\n                </div>\n            </div>\n            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled">\n                <div class="tui-image-editor-newline tui-image-editor-checkbox-wrap">\n                    <div class="tui-image-editor-checkbox">\n                        <input type="checkbox" id="tie-color-filter">\n                        <label for="tie-color-filter">Color Filter</label>\n                    </div>\n                </div>\n                <div class="tui-image-editor-newline tui-image-editor-range-wrap short">\n                    <label>Threshold</label>\n                    <div id="tie-colorfilter-threshole-range"></div>\n                </div>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition">\n            <div></div>\n        </li>\n        <li>\n            <div class="filter-color-item">\n                <div id="tie-filter-tint-color" title="Tint"></div>\n                <div class="tui-image-editor-checkbox">\n                    <input type="checkbox" id="tie-tint">\n                    <label for="tie-tint"></label>\n                </div>\n            </div>\n            <div class="filter-color-item">\n                <div id="tie-filter-multiply-color" title="Multiply"></div>\n                <div class="tui-image-editor-checkbox">\n                    <input type="checkbox" id="tie-multiply">\n                    <label for="tie-multiply"></label>\n                </div>\n            </div>\n            <div class="filter-color-item">\n                <div id="tie-filter-blend-color" title="Blend"></div>\n                <div class="tui-image-editor-checkbox">\n                    <input type="checkbox" id="tie-blend">\n                    <label for="tie-blend"></label>\n                </div>\n            </div>\n        </li>\n    </ul>\n'}},function(m,_,E){'use strict';function M(H){return H&&H.__esModule?H:{default:H}}Object.defineProperty(_,'__esModule',{value:!0});var A=E(3),I=E(72),R=M(I),L=E(103),N=M(L);_.default={getActions:function(){return{main:this._mainAction(),shape:this._shapeAction(),crop:this._cropAction(),flip:this._flipAction(),rotate:this._rotateAction(),text:this._textAction(),mask:this._maskAction(),draw:this._drawAction(),icon:this._iconAction(),filter:this._filterAction()}},_mainAction:function(){var z=this,U=function(){'crop'===z.ui.submenu&&(z.stopDrawingMode(),z.ui.changeMenu('crop'))};return(0,A.extend)({initLoadImage:function(V,G){return z.loadImageFromURL(V,G).then(function(X){U(),z.ui.initializeImgUrl=V,z.ui.resizeEditor({imageSize:X}),z.clearUndoStack()})},undo:function(){z.isEmptyUndoStack()||(U(),z.undo())},redo:function(){z.isEmptyRedoStack()||(U(),z.redo())},reset:function(){U(),z.loadImageFromURL(z.ui.initializeImgUrl,'resetImage').then(function(V){U(),z.ui.resizeEditor({imageSize:V}),z.clearUndoStack()})},delete:function(){z.ui.changeDeleteButtonEnabled(!1),U(),z.removeActiveObject(),z.activeObjectId=null},deleteAll:function(){U(),z.clearObjects(),z.ui.changeDeleteButtonEnabled(!1),z.ui.changeDeleteAllButtonEnabled(!1)},load:function(V){R.default.isSupportFileApi()||alert('This browser does not support file-api'),z.ui.initializeImgUrl=URL.createObjectURL(V),z.loadImageFromFile(V).then(function(G){U(),z.clearUndoStack(),z.ui.activeMenuEvent(),z.ui.resizeEditor({imageSize:G})})['catch'](function(G){return Promise.reject(G)})},download:function(){var V=z.toDataURL(),G=z.getImageName(),X,Y,K;R.default.isSupportFileApi()&&window.saveAs?(X=R.default.base64ToBlob(V),Y=X.type.split('/')[1],G.split('.').pop()!==Y&&(G+='.'+Y),saveAs(X,G)):(K=window.open(),K.document.body.innerHTML='<img src=\''+V+'\'>')}},this._commonAction())},_iconAction:function(){var z=this,U,W,V,G,X,Y,K;this.on({iconCreateResize:function(Q){var $=Q.moveOriginPointer,ee=($.x-V)/X,te=($.y-G)/Y;z.setObjectPropertiesQuietly(K,{scaleX:Math.abs(2*ee),scaleY:Math.abs(2*te)})},iconCreateEnd:function(){z.ui.icon.clearIconType(),z.changeSelectableAll(!0)}});var J=function(Q,$){V=$.x,G=$.y,z.addIcon(U,{left:$.x,top:$.y,fill:W}).then(function(ee){K=ee.id,X=ee.width,Y=ee.height})};return(0,A.extend)({changeColor:function(Q){z.activeObjectId&&z.changeIconColor(z.activeObjectId,Q)},addIcon:function(Q,$){U=Q,W=$,z.changeCursor('crosshair'),z.off('mousedown'),z.once('mousedown',J.bind(z))},cancelAddIcon:function(){z.off('mousedown'),z.ui.icon.clearIconType(),z.changeSelectableAll(!0),z.changeCursor('default')},registDefalutIcons:function(Q,$){var ee={};ee[Q]=$,z.registerIcons(ee)},registCustomIcon:function(Q,$){var ee=new N.default;ee.imageToSVG(Q,function(te){var ae=te.match(/path[^>]*d="([^"]*)"/),oe=ae[1],ne={};ne[$.name]=oe,z.registerIcons(ne),z.addIcon($.name,{left:100,top:100})},N.default.tracerDefaultOption())}},this._commonAction())},_drawAction:function(){var z=this;return(0,A.extend)({setDrawMode:function(W,V){z.stopDrawingMode(),'free'===W?z.startDrawingMode('FREE_DRAWING',V):z.startDrawingMode('LINE_DRAWING',V)},setColor:function(W){z.setBrush({color:W})}},this._commonAction())},_maskAction:function(){var z=this;return(0,A.extend)({loadImageFromURL:function(W,V){return z.loadImageFromURL(z.toDataURL(),'FilterImage').then(function(){z.addImageObject(W).then(function(){URL.revokeObjectURL(V)})})},applyFilter:function(){z.applyFilter('mask',{maskObjId:z.activeObjectId})}},this._commonAction())},_textAction:function(){var z=this;return(0,A.extend)({changeTextStyle:function(W){z.activeObjectId&&z.changeTextStyle(z.activeObjectId,W)}},this._commonAction())},_rotateAction:function(){var z=this;return(0,A.extend)({rotate:function(W){z.rotate(W),z.ui.resizeEditor()},setAngle:function(W){z.setAngle(W),z.ui.resizeEditor()}},this._commonAction())},_shapeAction:function(){var z=this;return(0,A.extend)({changeShape:function(W){z.activeObjectId&&z.changeShape(z.activeObjectId,W)},setDrawingShape:function(W){z.setDrawingShape(W)}},this._commonAction())},_cropAction:function(){var z=this;return(0,A.extend)({crop:function(){var W=z.getCropzoneRect();W&&z.crop(W).then(function(){z.stopDrawingMode(),z.ui.resizeEditor(),z.ui.changeMenu('crop')})['catch'](function(V){return Promise.reject(V)})},cancel:function(){z.stopDrawingMode(),z.ui.changeMenu('crop')},preset:function(W){switch(W){case'preset-square':z.setCropzoneRect(1);break;case'preset-3-2':z.setCropzoneRect(3/2);break;case'preset-4-3':z.setCropzoneRect(4/3);break;case'preset-5-4':z.setCropzoneRect(5/4);break;case'preset-7-5':z.setCropzoneRect(7/5);break;case'preset-16-9':z.setCropzoneRect(16/9);break;default:z.setCropzoneRect(),z.ui.crop.changeApplyButtonStatus(!1);}}},this._commonAction())},_flipAction:function(){var z=this;return(0,A.extend)({flip:function(W){return z[W]()}},this._commonAction())},_filterAction:function(){var z=this;return(0,A.extend)({applyFilter:function(W,V,G){W?z.applyFilter(V,G):z.hasFilter(V)&&z.removeFilter(V)}},this._commonAction())},setReAction:function(){var z=this;this.on({undoStackChanged:function(W){W?(z.ui.changeUndoButtonStatus(!0),z.ui.changeResetButtonStatus(!0)):(z.ui.changeUndoButtonStatus(!1),z.ui.changeResetButtonStatus(!1)),z.ui.resizeEditor()},redoStackChanged:function(W){W?z.ui.changeRedoButtonStatus(!0):z.ui.changeRedoButtonStatus(!1),z.ui.resizeEditor()},objectActivated:function(W){z.activeObjectId=W.id,z.ui.changeDeleteButtonEnabled(!0),z.ui.changeDeleteAllButtonEnabled(!0),'cropzone'===W.type?z.ui.crop.changeApplyButtonStatus(!0):-1<['rect','circle','triangle'].indexOf(W.type)?(z.stopDrawingMode(),'shape'!==z.ui.submenu&&z.ui.changeMenu('shape',!1,!1),z.ui.shape.setShapeStatus({strokeColor:W.stroke,strokeWidth:W.strokeWidth,fillColor:W.fill}),z.ui.shape.setMaxStrokeValue(Math.min(W.width,W.height))):'path'===W.type||'line'===W.type?'draw'!==z.ui.submenu&&(z.ui.changeMenu('draw',!1,!1),z.ui.draw.changeStandbyMode()):-1<['i-text','text'].indexOf(W.type)?'text'!==z.ui.submenu&&z.ui.changeMenu('text',!1,!1):'icon'===W.type&&(z.stopDrawingMode(),'icon'!==z.ui.submenu&&z.ui.changeMenu('icon',!1,!1),z.ui.icon.setIconPickerColor(W.fill))},addText:function(W){z.addText('Double Click',{position:W.originPosition,styles:{fill:z.ui.text.textColor,fontSize:R.default.toInteger(z.ui.text.fontSize),fontFamily:'Noto Sans'}}).then(function(){z.changeCursor('default')})},addObjectAfter:function(W){-1<['rect','circle','triangle'].indexOf(W.type)&&(z.ui.shape.setMaxStrokeValue(Math.min(W.width,W.height)),z.ui.shape.changeStandbyMode())},objectScaled:function(W){if(-1<['i-text','text'].indexOf(W.type))z.ui.text.fontSize=R.default.toInteger(W.fontSize);else if(0<=['rect','circle','triangle'].indexOf(W.type)){var V=W.width,G=W.height,X=z.ui.shape.getStrokeValue();V<X&&z.ui.shape.setStrokeValue(V),G<X&&z.ui.shape.setStrokeValue(G)}},selectionCleared:function(){z.activeObjectId=null,'text'===z.ui.submenu?z.changeCursor('text'):'draw'!==z.ui.submenu&&'crop'!==z.ui.submenu&&z.stopDrawingMode()}})},_commonAction:function(){var z=this;return{modeChange:function(W){switch(W){case'text':z._changeActivateMode('TEXT');break;case'crop':z.startDrawingMode('CROPPER');break;case'shape':z._changeActivateMode('SHAPE'),z.setDrawingShape(z.ui.shape.type,z.ui.shape.options);break;default:}},deactivateAll:this.deactivateAll.bind(this),changeSelectableAll:this.changeSelectableAll.bind(this),discardSelection:this.discardSelection.bind(this),stopDrawingMode:this.stopDrawingMode.bind(this)}},mixin:function(z){(0,A.extend)(z.prototype,this)}}},function(m,_){'use strict';function E(I,R){if(!(I instanceof R))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(_,'__esModule',{value:!0});var M=function(){function I(R,L){for(var N=0,H;N<L.length;N++)H=L[N],H.enumerable=H.enumerable||!1,H.configurable=!0,'value'in H&&(H.writable=!0),Object.defineProperty(R,H.key,H)}return function(R,L,N){return L&&I(R.prototype,L),N&&I(R,N),R}}(),A=function(){function I(){E(this,I),this.versionnumber='1.2.4',this.optionpresets={default:{corsenabled:!1,ltres:1,qtres:1,pathomit:8,rightangleenhance:!0,colorsampling:2,numberofcolors:16,mincolorratio:0,colorquantcycles:3,layering:0,strokewidth:1,linefilter:!1,scale:1,roundcoords:1,viewbox:!1,desc:!1,lcpr:0,qcpr:0,blurradius:0,blurdelta:20},posterized1:{colorsampling:0,numberofcolors:2},posterized2:{numberofcolors:4,blurradius:5},curvy:{ltres:0.01,linefilter:!0,rightangleenhance:!1},sharp:{qtres:0.01,linefilter:!1},detailed:{pathomit:0,roundcoords:2,ltres:0.5,qtres:0.5,numberofcolors:64},smoothed:{blurradius:5,blurdelta:64},grayscale:{colorsampling:0,colorquantcycles:1,numberofcolors:7},fixedpalette:{colorsampling:0,colorquantcycles:1,numberofcolors:27},randomsampling1:{colorsampling:1,numberofcolors:8},randomsampling2:{colorsampling:1,numberofcolors:64},artistic1:{colorsampling:0,colorquantcycles:1,pathomit:0,blurradius:5,blurdelta:64,ltres:0.01,linefilter:!0,numberofcolors:16,strokewidth:2},artistic2:{qtres:0.01,colorsampling:0,colorquantcycles:1,numberofcolors:4,strokewidth:0},artistic3:{qtres:10,ltres:10,numberofcolors:8},artistic4:{qtres:10,ltres:10,numberofcolors:64,blurradius:5,blurdelta:256,strokewidth:2},posterized3:{ltres:1,qtres:1,pathomit:20,rightangleenhance:!0,colorsampling:0,numberofcolors:3,mincolorratio:0,colorquantcycles:3,blurradius:3,blurdelta:20,strokewidth:0,linefilter:!1,roundcoords:1,pal:[{r:0,g:0,b:100,a:255},{r:255,g:255,b:255,a:255}]}},this.pathscan_combined_lookup=[[[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1]],[[0,1,0,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[0,2,-1,0]],[[-1,-1,-1,-1],[-1,-1,-1,-1],[0,1,0,-1],[0,0,1,0]],[[0,0,1,0],[-1,-1,-1,-1],[0,2,-1,0],[-1,-1,-1,-1]],[[-1,-1,-1,-1],[0,0,1,0],[0,3,0,1],[-1,-1,-1,-1]],[[13,3,0,1],[13,2,-1,0],[7,1,0,-1],[7,0,1,0]],[[-1,-1,-1,-1],[0,1,0,-1],[-1,-1,-1,-1],[0,3,0,1]],[[0,3,0,1],[0,2,-1,0],[-1,-1,-1,-1],[-1,-1,-1,-1]],[[0,3,0,1],[0,2,-1,0],[-1,-1,-1,-1],[-1,-1,-1,-1]],[[-1,-1,-1,-1],[0,1,0,-1],[-1,-1,-1,-1],[0,3,0,1]],[[11,1,0,-1],[14,0,1,0],[14,3,0,1],[11,2,-1,0]],[[-1,-1,-1,-1],[0,0,1,0],[0,3,0,1],[-1,-1,-1,-1]],[[0,0,1,0],[-1,-1,-1,-1],[0,2,-1,0],[-1,-1,-1,-1]],[[-1,-1,-1,-1],[-1,-1,-1,-1],[0,1,0,-1],[0,0,1,0]],[[0,1,0,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[0,2,-1,0]],[[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1]]],this.gks=[[0.27901,0.44198,0.27901],[0.135336,0.228569,0.272192,0.228569,0.135336],[0.086776,0.136394,0.178908,0.195843,0.178908,0.136394,0.086776],[0.063327,0.093095,0.122589,0.144599,0.152781,0.144599,0.122589,0.093095,0.063327],[0.049692,0.069304,0.089767,0.107988,0.120651,0.125194,0.120651,0.107988,0.089767,0.069304,0.049692]],this.specpalette=[{r:0,g:0,b:0,a:255},{r:128,g:128,b:128,a:255},{r:0,g:0,b:128,a:255},{r:64,g:64,b:128,a:255},{r:192,g:192,b:192,a:255},{r:255,g:255,b:255,a:255},{r:128,g:128,b:192,a:255},{r:0,g:0,b:192,a:255},{r:128,g:0,b:0,a:255},{r:128,g:64,b:64,a:255},{r:128,g:0,b:128,a:255},{r:168,g:168,b:168,a:255},{r:192,g:128,b:128,a:255},{r:192,g:0,b:0,a:255},{r:255,g:255,b:255,a:255},{r:0,g:128,b:0,a:255}]}return M(I,null,[{key:'tracerDefaultOption',value:function(){return{pathomit:100,ltres:0.1,qtres:1,scale:1,strokewidth:5,viewbox:!1,linefilter:!0,desc:!1,rightangleenhance:!1,pal:[{r:0,g:0,b:0,a:255},{r:255,g:255,b:255,a:255}]}}}]),M(I,[{key:'imageToSVG',value:function(L,N,H){var z=this;H=this.checkoptions(H),this.loadImage(L,function(U){N(z.imagedataToSVG(z.getImgdata(U),H))},H)}},{key:'imagedataToSVG',value:function(L,N){N=this.checkoptions(N);var H=this.imagedataToTracedata(L,N);return this.getsvgstring(H,N)}},{key:'imageToTracedata',value:function(L,N,H){var z=this;H=this.checkoptions(H),this.loadImage(L,function(U){N(z.imagedataToTracedata(z.getImgdata(U),H))},H)}},{key:'imagedataToTracedata',value:function(L,N){N=this.checkoptions(N);var H=this.colorquantization(L,N),z;if(0===N.layering){z={layers:[],palette:H.palette,width:H.array[0].length-2,height:H.array.length-2};for(var U=0,W;U<H.palette.length;U+=1)W=this.batchtracepaths(this.internodes(this.pathscan(this.layeringstep(H,U),N.pathomit),N),N.ltres,N.qtres),z.layers.push(W)}else{var V=this.layering(H);N.layercontainerid&&this.drawLayers(V,this.specpalette,N.scale,N.layercontainerid);var G=this.batchpathscan(V,N.pathomit),X=this.batchinternodes(G,N);z={layers:this.batchtracelayers(X,N.ltres,N.qtres),palette:H.palette,width:L.width,height:L.height}}return z}},{key:'checkoptions',value:function(L){L=L||{},'string'==typeof L&&(L=L.toLowerCase(),L=this.optionpresets[L]?this.optionpresets[L]:{});for(var N=Object.keys(this.optionpresets['default']),H=0;H<N.length;H+=1)L.hasOwnProperty(N[H])||(L[N[H]]=this.optionpresets['default'][N[H]]);return L}},{key:'colorquantization',value:function(L,N){var H=[],z=0,G=[],X=L.width*L.height,U,W,V,Y,K,J,Z,Q;for(K=0;K<L.height+2;K+=1)for(H[K]=[],Y=0;Y<L.width+2;Y+=1)H[K][Y]=-1;for(Q=N.pal?N.pal:0===N.colorsampling?this.generatepalette(N.numberofcolors):1===N.colorsampling?this.samplepalette(N.numberofcolors,L):this.samplepalette2(N.numberofcolors,L),0<N.blurradius&&(L=this.blur(L,N.blurradius,N.blurdelta)),Z=0;Z<N.colorquantcycles;Z+=1){if(0<Z)for(J=0;J<Q.length;J+=1)0<G[J].n&&(Q[J]={r:Math.floor(G[J].r/G[J].n),g:Math.floor(G[J].g/G[J].n),b:Math.floor(G[J].b/G[J].n),a:Math.floor(G[J].a/G[J].n)}),G[J].n/X<N.mincolorratio&&Z<N.colorquantcycles-1&&(Q[J]={r:Math.floor(255*Math.random()),g:Math.floor(255*Math.random()),b:Math.floor(255*Math.random()),a:Math.floor(255*Math.random())});for(Y=0;Y<Q.length;Y+=1)G[Y]={r:0,g:0,b:0,a:0,n:0};for(K=0;K<L.height;K+=1)for(Y=0;Y<L.width;Y+=1){for(z=4*(K*L.width+Y),V=0,W=1024,J=0;J<Q.length;J+=1)U=Math.abs(Q[J].r-L.data[z])+Math.abs(Q[J].g-L.data[z+1])+Math.abs(Q[J].b-L.data[z+2])+Math.abs(Q[J].a-L.data[z+3]),U<W&&(W=U,V=J);G[V].r+=L.data[z],G[V].g+=L.data[z+1],G[V].b+=L.data[z+2],G[V].a+=L.data[z+3],G[V].n+=1,H[K+1][Y+1]=V}}return{array:H,palette:Q}}},{key:'samplepalette',value:function(L,N){for(var H=void 0,z=[],U=0;U<L;U+=1)H=4*Math.floor(Math.random()*N.data.length/4),z.push({r:N.data[H],g:N.data[H+1],b:N.data[H+2],a:N.data[H+3]});return z}},{key:'samplepalette2',value:function(L,N){for(var H=void 0,z=[],U=Math.ceil(Math.sqrt(L)),W=Math.ceil(L/U),V=N.width/(U+1),G=N.height/(W+1),X=0;X<W;X+=1)for(var Y=0;Y<U&&z.length!==L;Y+=1)H=4*Math.floor((X+1)*G*N.width+(Y+1)*V),z.push({r:N.data[H],g:N.data[H+1],b:N.data[H+2],a:N.data[H+3]});return z}},{key:'generatepalette',value:function(L){var N=[],H,z,U;if(8>L)for(var W=Math.floor(255/(L-1)),V=0;V<L;V+=1)N.push({r:V*W,g:V*W,b:V*W,a:255});else{var G=Math.floor(Math.pow(L,1/3)),X=Math.floor(255/(G-1));for(H=0;H<G;H+=1)for(z=0;z<G;z+=1)for(U=0;U<G;U+=1)N.push({r:H*X,g:z*X,b:U*X,a:255});for(H=0;H<L-G*G*G;H+=1)N.push({r:Math.floor(255*Math.random()),g:Math.floor(255*Math.random()),b:Math.floor(255*Math.random()),a:Math.floor(255*Math.random())})}return N}},{key:'layering',value:function(L){var N=[],H=0,z=L.array.length,U=L.array[0].length,W,V,G,X,Y,K,J,Z,Q,$,ee;for(ee=0;ee<L.palette.length;ee+=1)for(N[ee]=[],$=0;$<z;$+=1)for(N[ee][$]=[],Q=0;Q<U;Q+=1)N[ee][$][Q]=0;for($=1;$<z-1;$+=1)for(Q=1;Q<U-1;Q+=1)H=L.array[$][Q],W=L.array[$-1][Q-1]===H?1:0,V=L.array[$-1][Q]===H?1:0,G=L.array[$-1][Q+1]===H?1:0,X=L.array[$][Q-1]===H?1:0,Y=L.array[$][Q+1]===H?1:0,K=L.array[$+1][Q-1]===H?1:0,J=L.array[$+1][Q]===H?1:0,Z=L.array[$+1][Q+1]===H?1:0,N[H][$+1][Q+1]=1+2*Y+4*Z+8*J,X||(N[H][$+1][Q]=2+4*J+8*K),V||(N[H][$][Q+1]=0+2*G+4*Y+8),W||(N[H][$][Q]=0+2*V+4+8*X);return N}},{key:'layeringstep',value:function(L,N){var H=[],z=L.array.length,U=L.array[0].length,W,V;for(V=0;V<z;V+=1)for(H[V]=[],W=0;W<U;W+=1)H[V][W]=0;for(V=1;V<z;V+=1)for(W=1;W<U;W+=1)H[V][W]=(L.array[V-1][W-1]===N?1:0)+(L.array[V-1][W]===N?2:0)+(L.array[V][W-1]===N?8:0)+(L.array[V][W]===N?4:0);return H}},{key:'pathscan',value:function(L,N){for(var H=[],z=0,U=0,W=0,V=0,G=L[0].length,X=L.length,Y=0,K=!0,J=!1,Z=void 0,Q=0;Q<X;Q+=1)for(var $=0;$<G;$+=1)if(4===L[Q][$]||11===L[Q][$])for(W=$,V=Q,H[z]={},H[z].points=[],H[z].boundingbox=[W,V,W,V],H[z].holechildren=[],K=!1,U=0,J=11===L[Q][$],Y=1;!K;){if(H[z].points[U]={},H[z].points[U].x=W-1,H[z].points[U].y=V-1,H[z].points[U].t=L[V][W],W-1<H[z].boundingbox[0]&&(H[z].boundingbox[0]=W-1),W-1>H[z].boundingbox[2]&&(H[z].boundingbox[2]=W-1),V-1<H[z].boundingbox[1]&&(H[z].boundingbox[1]=V-1),V-1>H[z].boundingbox[3]&&(H[z].boundingbox[3]=V-1),Z=this.pathscan_combined_lookup[L[V][W]][Y],L[V][W]=Z[0],Y=Z[1],W+=Z[2],V+=Z[3],W-1===H[z].points[0].x&&V-1===H[z].points[0].y)if(K=!0,H[z].points.length<N)H.pop();else{if(H[z].isholepath=!!J,J){for(var ee=0,te=[-1,-1,G+1,X+1],ae=0;ae<z;ae++)!H[ae].isholepath&&this.boundingboxincludes(H[ae].boundingbox,H[z].boundingbox)&&this.boundingboxincludes(te,H[ae].boundingbox)&&(ee=ae,te=H[ae].boundingbox);H[ee].holechildren.push(z)}z+=1}U+=1}return H}},{key:'boundingboxincludes',value:function(L,N){return L[0]<N[0]&&L[1]<N[1]&&L[2]>N[2]&&L[3]>N[3]}},{key:'batchpathscan',value:function(L,N){var H=[];for(var z in L)L.hasOwnProperty(z)&&(H[z]=this.pathscan(L[z],N));return H}},{key:'internodes',value:function(L,N){var H=[],z=0,U=0,W=0,V=0,G=0,X,Y;for(X=0;X<L.length;X+=1)for(H[X]={},H[X].points=[],H[X].boundingbox=L[X].boundingbox,H[X].holechildren=L[X].holechildren,H[X].isholepath=L[X].isholepath,z=L[X].points.length,Y=0;Y<z;Y+=1)U=(Y+1)%z,W=(Y+2)%z,V=(Y-1+z)%z,G=(Y-2+z)%z,N.rightangleenhance&&this.testrightangle(L[X],G,V,Y,U,W)&&(0<H[X].points.length&&(H[X].points[H[X].points.length-1].linesegment=this.getdirection(H[X].points[H[X].points.length-1].x,H[X].points[H[X].points.length-1].y,L[X].points[Y].x,L[X].points[Y].y)),H[X].points.push({x:L[X].points[Y].x,y:L[X].points[Y].y,linesegment:this.getdirection(L[X].points[Y].x,L[X].points[Y].y,(L[X].points[Y].x+L[X].points[U].x)/2,(L[X].points[Y].y+L[X].points[U].y)/2)})),H[X].points.push({x:(L[X].points[Y].x+L[X].points[U].x)/2,y:(L[X].points[Y].y+L[X].points[U].y)/2,linesegment:this.getdirection((L[X].points[Y].x+L[X].points[U].x)/2,(L[X].points[Y].y+L[X].points[U].y)/2,(L[X].points[U].x+L[X].points[W].x)/2,(L[X].points[U].y+L[X].points[W].y)/2)});return H}},{key:'testrightangle',value:function(L,N,H,z,U,W){return L.points[z].x===L.points[N].x&&L.points[z].x===L.points[H].x&&L.points[z].y===L.points[U].y&&L.points[z].y===L.points[W].y||L.points[z].y===L.points[N].y&&L.points[z].y===L.points[H].y&&L.points[z].x===L.points[U].x&&L.points[z].x===L.points[W].x}},{key:'getdirection',value:function(L,N,H,z){var U=8;return U=L<H?N<z?1:N>z?7:0:L>H?N<z?3:N>z?5:4:N<z?2:N>z?6:8,U}},{key:'batchinternodes',value:function(L,N){var H=[];for(var z in L)L.hasOwnProperty(z)&&(H[z]=this.internodes(L[z],N));return H}},{key:'tracepath',value:function(L,N,H){var z=0,G={},U,W,V;for(G.segments=[],G.boundingbox=L.boundingbox,G.holechildren=L.holechildren,G.isholepath=L.isholepath;z<L.points.length;){for(U=L.points[z].linesegment,W=-1,V=z+1;(L.points[V].linesegment===U||L.points[V].linesegment===W||-1===W)&&V<L.points.length-1;)L.points[V].linesegment!==U&&-1===W&&(W=L.points[V].linesegment),V+=1;V===L.points.length-1&&(V=0),G.segments=G.segments.concat(this.fitseq(L,N,H,z,V)),z=0<V?V:L.points.length}return G}},{key:'fitseq',value:function(L,N,H,z,U){if(U>L.points.length||0>U)return[];var W=z,V=0,G=!0,J=U-z,X,Y,K;0>J&&(J+=L.points.length);for(var Z=(L.points[U].x-L.points[z].x)/J,Q=(L.points[U].y-L.points[z].y)/J,$=(z+1)%L.points.length,ee;$!=U;)ee=$-z,0>ee&&(ee+=L.points.length),X=L.points[z].x+Z*ee,Y=L.points[z].y+Q*ee,K=(L.points[$].x-X)*(L.points[$].x-X)+(L.points[$].y-Y)*(L.points[$].y-Y),K>N&&(G=!1),K>V&&(W=$,V=K),$=($+1)%L.points.length;if(G)return[{type:'L',x1:L.points[z].x,y1:L.points[z].y,x2:L.points[U].x,y2:L.points[U].y}];var te=W;G=!0,V=0;var ae=(te-z)/J,oe=(1-ae)*(1-ae),ne=2*(1-ae)*ae,ie=ae*ae,le=(oe*L.points[z].x+ie*L.points[U].x-L.points[te].x)/-ne,se=(oe*L.points[z].y+ie*L.points[U].y-L.points[te].y)/-ne;for($=z+1;$!=U;)ae=($-z)/J,oe=(1-ae)*(1-ae),ne=2*(1-ae)*ae,ie=ae*ae,X=oe*L.points[z].x+ne*le+ie*L.points[U].x,Y=oe*L.points[z].y+ne*se+ie*L.points[U].y,K=(L.points[$].x-X)*(L.points[$].x-X)+(L.points[$].y-Y)*(L.points[$].y-Y),K>H&&(G=!1),K>V&&(W=$,V=K),$=($+1)%L.points.length;if(G)return[{type:'Q',x1:L.points[z].x,y1:L.points[z].y,x2:le,y2:se,x3:L.points[U].x,y3:L.points[U].y}];var ce=te;return this.fitseq(L,N,H,z,ce).concat(this.fitseq(L,N,H,ce,U))}},{key:'batchtracepaths',value:function(L,N,H){var z=[];for(var U in L)L.hasOwnProperty(U)&&z.push(this.tracepath(L[U],N,H));return z}},{key:'batchtracelayers',value:function(L,N,H){var z=[];for(var U in L)L.hasOwnProperty(U)&&(z[U]=this.batchtracepaths(L[U],N,H));return z}},{key:'roundtodec',value:function(L,N){return+L.toFixed(N)}},{key:'svgpathstring',value:function(L,N,H,z){var U=L.layers[N],W=U[H],V='',G;if(z.linefilter&&3>W.segments.length)return V;if(V='<path '+(z.desc?'desc="l '+N+' p '+H+'" ':'')+this.tosvgcolorstr(L.palette[N],z)+'d="',-1===z.roundcoords){for(V+='M '+W.segments[0].x1*z.scale+' '+W.segments[0].y1*z.scale+' ',G=0;G<W.segments.length;G++)V+=W.segments[G].type+' '+W.segments[G].x2*z.scale+' '+W.segments[G].y2*z.scale+' ',W.segments[G].hasOwnProperty('x3')&&(V+=W.segments[G].x3*z.scale+' '+W.segments[G].y3*z.scale+' ');V+='Z '}else{for(V+='M '+this.roundtodec(W.segments[0].x1*z.scale,z.roundcoords)+' '+this.roundtodec(W.segments[0].y1*z.scale,z.roundcoords)+' ',G=0;G<W.segments.length;G++)V+=W.segments[G].type+' '+this.roundtodec(W.segments[G].x2*z.scale,z.roundcoords)+' '+this.roundtodec(W.segments[G].y2*z.scale,z.roundcoords)+' ',W.segments[G].hasOwnProperty('x3')&&(V+=this.roundtodec(W.segments[G].x3*z.scale,z.roundcoords)+' '+this.roundtodec(W.segments[G].y3*z.scale,z.roundcoords)+' ');V+='Z '}for(var X=0,Y;X<W.holechildren.length;X++){if(Y=U[W.holechildren[X]],-1===z.roundcoords)for(V+=Y.segments[Y.segments.length-1].hasOwnProperty('x3')?'M '+Y.segments[Y.segments.length-1].x3*z.scale+' '+Y.segments[Y.segments.length-1].y3*z.scale+' ':'M '+Y.segments[Y.segments.length-1].x2*z.scale+' '+Y.segments[Y.segments.length-1].y2*z.scale+' ',G=Y.segments.length-1;0<=G;G--)V+=Y.segments[G].type+' ',Y.segments[G].hasOwnProperty('x3')&&(V+=Y.segments[G].x2*z.scale+' '+Y.segments[G].y2*z.scale+' '),V+=Y.segments[G].x1*z.scale+' '+Y.segments[G].y1*z.scale+' ';else for(V+=Y.segments[Y.segments.length-1].hasOwnProperty('x3')?'M '+this.roundtodec(Y.segments[Y.segments.length-1].x3*z.scale)+' '+this.roundtodec(Y.segments[Y.segments.length-1].y3*z.scale)+' ':'M '+this.roundtodec(Y.segments[Y.segments.length-1].x2*z.scale)+' '+this.roundtodec(Y.segments[Y.segments.length-1].y2*z.scale)+' ',G=Y.segments.length-1;0<=G;G--)V+=Y.segments[G].type+' ',Y.segments[G].hasOwnProperty('x3')&&(V+=this.roundtodec(Y.segments[G].x2*z.scale)+' '+this.roundtodec(Y.segments[G].y2*z.scale)+' '),V+=this.roundtodec(Y.segments[G].x1*z.scale)+' '+this.roundtodec(Y.segments[G].y1*z.scale)+' ';V+='Z '}if(V+='" />',z.lcpr||z.qcpr){for(G=0;G<W.segments.length;G++)W.segments[G].hasOwnProperty('x3')&&z.qcpr&&(V+='<circle cx="'+W.segments[G].x2*z.scale+'" cy="'+W.segments[G].y2*z.scale+'" r="'+z.qcpr+'" fill="cyan" stroke-width="'+0.2*z.qcpr+'" stroke="black" />',V+='<circle cx="'+W.segments[G].x3*z.scale+'" cy="'+W.segments[G].y3*z.scale+'" r="'+z.qcpr+'" fill="white" stroke-width="'+0.2*z.qcpr+'" stroke="black" />',V+='<line x1="'+W.segments[G].x1*z.scale+'" y1="'+W.segments[G].y1*z.scale+'" x2="'+W.segments[G].x2*z.scale+'" y2="'+W.segments[G].y2*z.scale+'" stroke-width="'+0.2*z.qcpr+'" stroke="cyan" />',V+='<line x1="'+W.segments[G].x2*z.scale+'" y1="'+W.segments[G].y2*z.scale+'" x2="'+W.segments[G].x3*z.scale+'" y2="'+W.segments[G].y3*z.scale+'" stroke-width="'+0.2*z.qcpr+'" stroke="cyan" />'),!W.segments[G].hasOwnProperty('x3')&&z.lcpr&&(V+='<circle cx="'+W.segments[G].x2*z.scale+'" cy="'+W.segments[G].y2*z.scale+'" r="'+z.lcpr+'" fill="white" stroke-width="'+0.2*z.lcpr+'" stroke="black" />');for(var X=0,Y;X<W.holechildren.length;X++)for(Y=U[W.holechildren[X]],G=0;G<Y.segments.length;G++)Y.segments[G].hasOwnProperty('x3')&&z.qcpr&&(V+='<circle cx="'+Y.segments[G].x2*z.scale+'" cy="'+Y.segments[G].y2*z.scale+'" r="'+z.qcpr+'" fill="cyan" stroke-width="'+0.2*z.qcpr+'" stroke="black" />',V+='<circle cx="'+Y.segments[G].x3*z.scale+'" cy="'+Y.segments[G].y3*z.scale+'" r="'+z.qcpr+'" fill="white" stroke-width="'+0.2*z.qcpr+'" stroke="black" />',V+='<line x1="'+Y.segments[G].x1*z.scale+'" y1="'+Y.segments[G].y1*z.scale+'" x2="'+Y.segments[G].x2*z.scale+'" y2="'+Y.segments[G].y2*z.scale+'" stroke-width="'+0.2*z.qcpr+'" stroke="cyan" />',V+='<line x1="'+Y.segments[G].x2*z.scale+'" y1="'+Y.segments[G].y2*z.scale+'" x2="'+Y.segments[G].x3*z.scale+'" y2="'+Y.segments[G].y3*z.scale+'" stroke-width="'+0.2*z.qcpr+'" stroke="cyan" />'),!Y.segments[G].hasOwnProperty('x3')&&z.lcpr&&(V+='<circle cx="'+Y.segments[G].x2*z.scale+'" cy="'+Y.segments[G].y2*z.scale+'" r="'+z.lcpr+'" fill="white" stroke-width="'+0.2*z.lcpr+'" stroke="black" />')}return V}},{key:'getsvgstring',value:function(L,N){N=this.checkoptions(N);for(var H=L.width*N.scale,z=L.height*N.scale,U='<svg '+(N.viewbox?'viewBox="0 0 '+H+' '+z+'" ':'width="'+H+'" height="'+z+'" ')+'version="1.1" xmlns="http://www.w3.org/2000/svg" desc="Created with imagetracer.js version '+this.versionnumber+'" >',W=0;W<L.layers.length;W+=1)for(var V=0;V<L.layers[W].length;V+=1)L.layers[W][V].isholepath||(U+=this.svgpathstring(L,W,V,N));return U+='</svg>',U}},{key:'compareNumbers',value:function(L,N){return L-N}},{key:'torgbastr',value:function(L){return'rgba('+L.r+','+L.g+','+L.b+','+L.a+')'}},{key:'tosvgcolorstr',value:function(L,N){return'fill="rgb('+L.r+','+L.g+','+L.b+')" stroke="rgb('+L.r+','+L.g+','+L.b+')" stroke-width="'+N.strokewidth+'" opacity="'+L.a/255+'" '}},{key:'appendSVGString',value:function(L,N){var H;N?(H=document.getElementById(N),!H&&(H=document.createElement('div'),H.id=N,document.body.appendChild(H))):(H=document.createElement('div'),document.body.appendChild(H)),H.innerHTML+=L}},{key:'blur',value:function(L,N,H){var Q={width:L.width,height:L.height,data:[]},z,U,W,V,G,X,Y,K,J,Z;if(N=Math.floor(N),1>N)return L;5<N&&(N=5),H=Math.abs(H),1024<H&&(H=1024);var $=this.gks[N-1];for(U=0;U<L.height;U++)for(z=0;z<L.width;z++){for(X=0,Y=0,K=0,J=0,Z=0,W=-N;W<N+1;W++)0<z+W&&z+W<L.width&&(G=4*(U*L.width+z+W),X+=L.data[G]*$[W+N],Y+=L.data[G+1]*$[W+N],K+=L.data[G+2]*$[W+N],J+=L.data[G+3]*$[W+N],Z+=$[W+N]);G=4*(U*L.width+z),Q.data[G]=Math.floor(X/Z),Q.data[G+1]=Math.floor(Y/Z),Q.data[G+2]=Math.floor(K/Z),Q.data[G+3]=Math.floor(J/Z)}var ee=new Uint8ClampedArray(Q.data);for(U=0;U<L.height;U++)for(z=0;z<L.width;z++){for(X=0,Y=0,K=0,J=0,Z=0,W=-N;W<N+1;W++)0<U+W&&U+W<L.height&&(G=4*((U+W)*L.width+z),X+=ee[G]*$[W+N],Y+=ee[G+1]*$[W+N],K+=ee[G+2]*$[W+N],J+=ee[G+3]*$[W+N],Z+=$[W+N]);G=4*(U*L.width+z),Q.data[G]=Math.floor(X/Z),Q.data[G+1]=Math.floor(Y/Z),Q.data[G+2]=Math.floor(K/Z),Q.data[G+3]=Math.floor(J/Z)}for(U=0;U<L.height;U++)for(z=0;z<L.width;z++)G=4*(U*L.width+z),V=Math.abs(Q.data[G]-L.data[G])+Math.abs(Q.data[G+1]-L.data[G+1])+Math.abs(Q.data[G+2]-L.data[G+2])+Math.abs(Q.data[G+3]-L.data[G+3]),V>H&&(Q.data[G]=L.data[G],Q.data[G+1]=L.data[G+1],Q.data[G+2]=L.data[G+2],Q.data[G+3]=L.data[G+3]);return Q}},{key:'loadImage',value:function(L,N,H){var z=new Image;H&&H.corsenabled&&(z.crossOrigin='Anonymous'),z.src=L,z.onload=function(){var U=document.createElement('canvas');U.width=z.width,U.height=z.height;var W=U.getContext('2d');W.drawImage(z,0,0),N(U)}}},{key:'getImgdata',value:function(L){var N=L.getContext('2d');return N.getImageData(0,0,L.width,L.height)}},{key:'drawLayers',value:function(L,N,H,z){H=H||1;var U,W,V,G,X,Y;for(X in z?(Y=document.getElementById(z),!Y&&(Y=document.createElement('div'),Y.id=z,document.body.appendChild(Y))):(Y=document.createElement('div'),document.body.appendChild(Y)),L)if(L.hasOwnProperty(X)){U=L[X][0].length,W=L[X].length;var K=document.createElement('canvas');K.width=U*H,K.height=W*H;var J=K.getContext('2d');for(G=0;G<W;G+=1)for(V=0;V<U;V+=1)J.fillStyle=this.torgbastr(N[L[X][G][V]%N.length]),J.fillRect(V*H,G*H,H,H);Y.appendChild(K)}}}]),I}();_.default=A},function(m,_,E){'use strict';function M(ze){return ze&&ze.__esModule?ze:{default:ze}}function A(ze,Ue){if(!(ze instanceof Ue))throw new TypeError('Cannot call a class as a function')}var I=function(){function ze(Ue,We){for(var Ve=0,Ge;Ve<We.length;Ve++)Ge=We[Ve],Ge.enumerable=Ge.enumerable||!1,Ge.configurable=!0,'value'in Ge&&(Ge.writable=!0),Object.defineProperty(Ue,Ge.key,Ge)}return function(Ue,We,Ve){return We&&ze(Ue.prototype,We),Ve&&ze(Ue,Ve),Ue}}(),R=E(3),L=M(R),N=E(4),H=M(N),z=E(105),U=M(z),W=E(106),V=M(W),G=E(108),X=M(G),Y=E(110),K=M(Y),J=E(111),Z=M(J),Q=E(112),$=M(Q),ee=E(113),te=M(ee),ae=E(114),oe=M(ae),ne=E(115),ie=M(ne),le=E(116),se=M(le),ce=E(122),de=M(ce),ue=E(124),pe=M(ue),ge=E(126),me=M(ge),fe=E(127),he=M(fe),ve=E(128),be=M(ve),ye=E(129),_e=M(ye),ke=E(73),xe=M(ke),Ce=E(72),Ee=M(Ce),Se=xe.default.componentNames,we=xe.default.eventNames,Oe=xe.default.drawingModes,Pe=xe.default.fObjectOptions,Te=L.default.extend,Me=L.default.stamp,Ae=L.default.isArray,Ie=L.default.isString,De=L.default.forEachArray,je=L.default.forEachOwnProperties,Re=L.default.CustomEvents,Be={cssOnly:!0},Fe={backstoreOnly:!0},He=function(){function ze(Ue){var We=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},Ve=We.cssMaxWidth,Ge=We.cssMaxHeight,qe=We.useItext,Ye=We.useDragAddIcon;A(this,ze),this.canvasImage=null,this.cssMaxWidth=Ve||1e3,this.cssMaxHeight=Ge||800,this.useItext=void 0!==qe&&qe,this.useDragAddIcon=void 0!==Ye&&Ye,this.cropSelectionStyle={},this.imageName='',this._objects={},this._canvas=null,this._drawingMode=Oe.NORMAL,this._drawingModeMap={},this._componentMap={},this._handler={onMouseDown:this._onMouseDown.bind(this),onObjectAdded:this._onObjectAdded.bind(this),onObjectRemoved:this._onObjectRemoved.bind(this),onObjectMoved:this._onObjectMoved.bind(this),onObjectScaled:this._onObjectScaled.bind(this),onObjectSelected:this._onObjectSelected.bind(this),onPathCreated:this._onPathCreated.bind(this),onSelectionCleared:this._onSelectionCleared.bind(this),onSelectionCreated:this._onSelectionCreated.bind(this)},this._setCanvasElement(Ue),this._createDrawingModeInstances(),this._createComponents(),this._attachCanvasEvents()}return I(ze,[{key:'destroy',value:function(){var We=this._canvas.wrapperEl;this._canvas.clear(),We.parentNode.removeChild(We)}},{key:'deactivateAll',value:function(){return this._canvas.deactivateAll(),this}},{key:'renderAll',value:function(){return this._canvas.renderAll(),this}},{key:'add',value:function(We){var Ge=[],Ve;Ae(We)?Ge=We:Ge.push(We),(Ve=this._canvas).add.apply(Ve,Ge)}},{key:'contains',value:function(We){return this._canvas.contains(We)}},{key:'getObjects',value:function(){return this._canvas.getObjects().slice()}},{key:'getObject',value:function(We){return this._objects[We]}},{key:'remove',value:function(We){this._canvas.remove(We)}},{key:'removeAll',value:function(We){var Ve=this._canvas,Ge=Ve.getObjects().slice();return Ve.remove.apply(Ve,this._canvas.getObjects()),We&&Ve.clear(),Ge}},{key:'removeObjectById',value:function(We){var Ve=[],Ge=this._canvas,qe=this.getObject(We),Xe=qe&&qe.isType('group')&&!qe.isEmpty();return Xe?(Ge.discardActiveGroup(),qe.forEachObject(function(Ye){Ve.push(Ye),Ye.remove()})):Ge.contains(qe)&&(Ve.push(qe),qe.remove()),Ve}},{key:'getObjectId',value:function(We){var Ve=null;for(Ve in this._objects)if(this._objects.hasOwnProperty(Ve)&&We===this._objects[Ve])return Ve;return null}},{key:'getActiveObject',value:function(){return this._canvas.getActiveObject()}},{key:'getActiveGroupObject',value:function(){return this._canvas.getActiveGroup()}},{key:'setActiveObject',value:function(We){this._canvas.setActiveObject(We)}},{key:'setCropSelectionStyle',value:function(We){this.cropSelectionStyle=We}},{key:'getComponent',value:function(We){return this._componentMap[We]}},{key:'getDrawingMode',value:function(){return this._drawingMode}},{key:'startDrawingMode',value:function(We,Ve){if(this._isSameDrawingMode(We))return!0;this.stopDrawingMode();var Ge=this._getDrawingModeInstance(We);return Ge&&Ge.start&&(Ge.start(this,Ve),this._drawingMode=We),!!Ge}},{key:'stopDrawingMode',value:function(){if(!this._isSameDrawingMode(Oe.NORMAL)){var We=this._getDrawingModeInstance(this.getDrawingMode());We&&We.end&&We.end(this),this._drawingMode=Oe.NORMAL}}},{key:'toDataURL',value:function(We){return this._canvas&&this._canvas.toDataURL(We)}},{key:'setCanvasImage',value:function(We,Ve){Ve&&Me(Ve),this.imageName=We,this.canvasImage=Ve}},{key:'setCssMaxDimension',value:function(We){this.cssMaxWidth=We.width||this.cssMaxWidth,this.cssMaxHeight=We.height||this.cssMaxHeight}},{key:'adjustCanvasDimension',value:function(){var We=this.canvasImage.scale(1),Ve=We.getBoundingRect(),Ge=Ve.width,qe=Ve.height,Xe=this._calcMaxDimension(Ge,qe);this.setCanvasCssDimension({width:'100%',height:'100%','max-width':Xe.width+'px','max-height':Xe.height+'px'}),this.setCanvasBackstoreDimension({width:Ge,height:qe}),this._canvas.centerObject(We)}},{key:'setCanvasCssDimension',value:function(We){this._canvas.setDimensions(We,Be)}},{key:'setCanvasBackstoreDimension',value:function(We){this._canvas.setDimensions(We,Fe)}},{key:'setImageProperties',value:function(We,Ve){var Ge=this.canvasImage;Ge&&(Ge.set(We).setCoords(),Ve&&this._canvas.renderAll())}},{key:'getCanvasElement',value:function(){return this._canvas.getElement()}},{key:'getCanvas',value:function(){return this._canvas}},{key:'getCanvasImage',value:function(){return this.canvasImage}},{key:'getImageName',value:function(){return this.imageName}},{key:'addImageObject',value:function(We){var Ve=this,Ge=this._callbackAfterLoadingImageObject.bind(this);return new H.default(function(qe){U.default.Image.fromURL(We,function(Xe){Ge(Xe),qe(Ve.createObjectProperties(Xe))},{crossOrigin:'Anonymous'})})}},{key:'getCenter',value:function(){return this._canvas.getCenter()}},{key:'getCropzoneRect',value:function(){return this.getComponent(Se.CROPPER).getCropzoneRect()}},{key:'setCropzoneRect',value:function(We){return this.getComponent(Se.CROPPER).setCropzoneRect(We)}},{key:'getCroppedImageData',value:function(We){return this.getComponent(Se.CROPPER).getCroppedImageData(We)}},{key:'setBrush',value:function(We){var Ve=this._drawingMode,Ge=Se.FREE_DRAWING;Ve===Oe.LINE&&(Ge=Oe.LINE),this.getComponent(Ge).setBrush(We)}},{key:'setDrawingShape',value:function(We,Ve){this.getComponent(Se.SHAPE).setStates(We,Ve)}},{key:'registerPaths',value:function(We){this.getComponent(Se.ICON).registerPaths(We)}},{key:'changeCursor',value:function(We){var Ve=this.getCanvas();Ve.defaultCursor=We,Ve.renderAll()}},{key:'hasFilter',value:function(We){return this.getComponent(Se.FILTER).hasFilter(We)}},{key:'setSelectionStyle',value:function(We){Te(Pe.SELECTION_STYLE,We)}},{key:'setObjectProperties',value:function(We,Ve){var Ge=this.getObject(We),qe=Te({},Ve);return Ge.set(qe),Ge.setCoords(),this.getCanvas().renderAll(),qe}},{key:'getObjectProperties',value:function(We,Ve){var Ge=this.getObject(We),qe={};return Ie(Ve)?qe[Ve]=Ge[Ve]:Ae(Ve)?De(Ve,function(Xe){qe[Xe]=Ge[Xe]}):je(Ve,function(Xe,Ye){qe[Ye]=Ge[Ye]}),qe}},{key:'getObjectPosition',value:function(We,Ve,Ge){var qe=this.getObject(We);return qe?qe.getPointByOrigin(Ve,Ge):null}},{key:'setObjectPosition',value:function(We,Ve){var Ge=this.getObject(We),qe=Ve.x,Xe=Ve.y,Ye=Ve.originX,Ke=Ve.originY;if(!Ge)return!1;var Je=Ge.getPointByOrigin(Ye,Ke),Ze=Ge.getPointByOrigin('center','center'),Qe=Ze.x-Je.x,$e=Ze.y-Je.y;return Ge.set({left:qe+Qe,top:Xe+$e}),Ge.setCoords(),!0}},{key:'getCanvasSize',value:function(){var We=this.getCanvasImage();return{width:We?We.width:0,height:We?We.height:0}}},{key:'_getDrawingModeInstance',value:function(We){return this._drawingModeMap[We]}},{key:'_setCanvasElement',value:function(We){var Ve,Ge;Ve=We.jquery?We[0]:We.nodeType?We:document.querySelector(We),'CANVAS'!==Ve.nodeName.toUpperCase()&&(Ge=document.createElement('canvas'),Ve.appendChild(Ge)),this._canvas=new U.default.Canvas(Ge,{containerClass:'tui-image-editor-canvas-container',enableRetinaScaling:!1})}},{key:'_createDrawingModeInstances',value:function(){this._register(this._drawingModeMap,new pe.default),this._register(this._drawingModeMap,new me.default),this._register(this._drawingModeMap,new he.default),this._register(this._drawingModeMap,new be.default),this._register(this._drawingModeMap,new _e.default)}},{key:'_createComponents',value:function(){this._register(this._componentMap,new V.default(this)),this._register(this._componentMap,new X.default(this)),this._register(this._componentMap,new K.default(this)),this._register(this._componentMap,new Z.default(this)),this._register(this._componentMap,new $.default(this)),this._register(this._componentMap,new te.default(this)),this._register(this._componentMap,new oe.default(this)),this._register(this._componentMap,new ie.default(this)),this._register(this._componentMap,new se.default(this)),this._register(this._componentMap,new de.default(this))}},{key:'_register',value:function(We,Ve){We[Ve.getName()]=Ve}},{key:'_isSameDrawingMode',value:function(We){return this.getDrawingMode()===We}},{key:'_calcMaxDimension',value:function(We,Ve){var Ge=this.cssMaxWidth/We,qe=this.cssMaxHeight/Ve,Xe=Math.min(We,this.cssMaxWidth),Ye=Math.min(Ve,this.cssMaxHeight);return 1>Ge&&Ge<qe?(Xe=We*Ge,Ye=Ve*Ge):1>qe&&qe<Ge&&(Xe=We*qe,Ye=Ve*qe),{width:Math.floor(Xe),height:Math.floor(Ye)}}},{key:'_callbackAfterLoadingImageObject',value:function(We){var Ve=this.getCanvasImage().getCenterPoint();We.set(xe.default.fObjectOptions.SELECTION_STYLE),We.set({left:Ve.x,top:Ve.y,crossOrigin:'Anonymous'}),this.getCanvas().add(We).setActiveObject(We)}},{key:'_attachCanvasEvents',value:function(){var We=this._canvas,Ve=this._handler;We.on({'mouse:down':Ve.onMouseDown,'object:added':Ve.onObjectAdded,'object:removed':Ve.onObjectRemoved,'object:moving':Ve.onObjectMoved,'object:scaling':Ve.onObjectScaled,'object:selected':Ve.onObjectSelected,'path:created':Ve.onPathCreated,'selection:cleared':Ve.onSelectionCleared,'selection:created':Ve.onSelectionCreated})}},{key:'_onMouseDown',value:function(We){var Ve=this._canvas.getPointer(We.e);this.fire(we.MOUSE_DOWN,We.e,Ve)}},{key:'_onObjectAdded',value:function(We){var Ve=We.target;Ve.isType('cropzone')||this._addFabricObject(Ve)}},{key:'_onObjectRemoved',value:function(We){var Ve=We.target;this._removeFabricObject(Me(Ve))}},{key:'_onObjectMoved',value:function(We){var Ve=We.target,Ge=this.createObjectProperties(Ve);this.fire(we.OBJECT_MOVED,Ge)}},{key:'_onObjectScaled',value:function(We){var Ve=We.target,Ge=this.createObjectProperties(Ve);this.fire(we.OBJECT_SCALED,Ge)}},{key:'_onObjectSelected',value:function(We){var Ve=We.target,Ge=this.createObjectProperties(Ve);this.fire(we.OBJECT_ACTIVATED,Ge)}},{key:'_onPathCreated',value:function(We){We.path.set(xe.default.fObjectOptions.SELECTION_STYLE);var Ve=this.createObjectProperties(We.path);this.fire(we.ADD_OBJECT,Ve)}},{key:'_onSelectionCleared',value:function(){this.fire(we.SELECTION_CLEARED)}},{key:'_onSelectionCreated',value:function(We){this.fire(we.SELECTION_CREATED,We.target)}},{key:'discardSelection',value:function(){this._canvas.discardActiveGroup(),this._canvas.discardActiveObject(),this._canvas.renderAll()}},{key:'changeSelectableAll',value:function(We){this._canvas.forEachObject(function(Ve){Ve.selectable=We,Ve.hoverCursor=We?'move':'crosshair'})}},{key:'createObjectProperties',value:function(We){var Ge={id:Me(We),type:We.type};return Te(Ge,Ee.default.getProperties(We,['left','top','width','height','fill','stroke','strokeWidth','opacity'])),-1<['i-text','text'].indexOf(We.type)&&Te(Ge,this._createTextProperties(We,Ge)),Ge}},{key:'_createTextProperties',value:function(We){var Ge={};return Te(Ge,Ee.default.getProperties(We,['text','fontFamily','fontSize','fontStyle','textAlign','textDecoration'])),Ge}},{key:'_addFabricObject',value:function(We){var Ve=Me(We);return this._objects[Ve]=We,Ve}},{key:'_removeFabricObject',value:function(We){delete this._objects[We]}}]),ze}();Re.mixin(He),m.exports=He},function(m){m.exports=u},function(m,_,E){'use strict';function M(J){return J&&J.__esModule?J:{default:J}}function A(J,Z){if(!(J instanceof Z))throw new TypeError('Cannot call a class as a function')}function I(J,Z){if(!J)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return Z&&('object'==typeof Z||'function'==typeof Z)?Z:J}function R(J,Z){if('function'!=typeof Z&&null!==Z)throw new TypeError('Super expression must either be null or a function, not '+typeof Z);J.prototype=Object.create(Z&&Z.prototype,{constructor:{value:J,enumerable:!1,writable:!0,configurable:!0}}),Z&&(Object.setPrototypeOf?Object.setPrototypeOf(J,Z):J.__proto__=Z)}var L=function(){function J(Z,Q){for(var $=0,ee;$<Q.length;$++)ee=Q[$],ee.enumerable=ee.enumerable||!1,ee.configurable=!0,'value'in ee&&(ee.writable=!0),Object.defineProperty(Z,ee.key,ee)}return function(Z,Q,$){return Q&&J(Z.prototype,Q),$&&J(Z,$),Z}}(),N=E(4),H=M(N),z=E(107),U=M(z),W=E(73),V=M(W),G=V.default.componentNames,X=V.default.rejectMessages,Y={padding:0,crossOrigin:'Anonymous'},K=function(J){function Z(Q){return A(this,Z),I(this,(Z.__proto__||Object.getPrototypeOf(Z)).call(this,G.IMAGE_LOADER,Q))}return R(Z,J),L(Z,[{key:'load',value:function($,ee){var te=this,ae;if(!$&&!ee){var oe=this.getCanvas();oe.backgroundImage=null,oe.renderAll(),ae=new H.default(function(ne){te.setCanvasImage('',null),ne()})}else ae=this._setBackgroundImage(ee).then(function(ne){return te.setCanvasImage($,ne),te.adjustCanvasDimension(),ne});return ae}},{key:'_setBackgroundImage',value:function($){var ee=this;return $?new H.default(function(te,ae){var oe=ee.getCanvas();oe.setBackgroundImage($,function(){var ne=oe.backgroundImage;ne.getElement()?te(ne):ae(X.loadingImageFailed)},Y)}):H.default.reject(X.loadImage)}}]),Z}(U.default);m.exports=K},function(m){'use strict';function E(I,R){if(!(I instanceof R))throw new TypeError('Cannot call a class as a function')}var M=function(){function I(R,L){for(var N=0,H;N<L.length;N++)H=L[N],H.enumerable=H.enumerable||!1,H.configurable=!0,'value'in H&&(H.writable=!0),Object.defineProperty(R,H.key,H)}return function(R,L,N){return L&&I(R.prototype,L),N&&I(R,N),R}}(),A=function(){function I(R,L){E(this,I),this.name=R,this.graphics=L}return M(I,[{key:'fire',value:function(){for(var L=this.graphics,N=arguments.length,H=Array(N),z=0;z<N;z++)H[z]=arguments[z];return this.graphics.fire.apply(L,H)}},{key:'setCanvasImage',value:function(L,N){this.graphics.setCanvasImage(L,N)}},{key:'getCanvasElement',value:function(){return this.graphics.getCanvasElement()}},{key:'getCanvas',value:function(){return this.graphics.getCanvas()}},{key:'getCanvasImage',value:function(){return this.graphics.getCanvasImage()}},{key:'getImageName',value:function(){return this.graphics.getImageName()}},{key:'getEditor',value:function(){return this.graphics.getEditor()}},{key:'getName',value:function(){return this.name}},{key:'setImageProperties',value:function(L,N){this.graphics.setImageProperties(L,N)}},{key:'setCanvasCssDimension',value:function(L){this.graphics.setCanvasCssDimension(L)}},{key:'setCanvasBackstoreDimension',value:function(L){this.graphics.setCanvasBackstoreDimension(L)}},{key:'adjustCanvasDimension',value:function(){this.graphics.adjustCanvasDimension()}}]),I}();m.exports=A},function(m,_,E){'use strict';function M($){return $&&$.__esModule?$:{default:$}}function A($,ee){if(!($ instanceof ee))throw new TypeError('Cannot call a class as a function')}function I($,ee){if(!$)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return ee&&('object'==typeof ee||'function'==typeof ee)?ee:$}function R($,ee){if('function'!=typeof ee&&null!==ee)throw new TypeError('Super expression must either be null or a function, not '+typeof ee);$.prototype=Object.create(ee&&ee.prototype,{constructor:{value:$,enumerable:!1,writable:!0,configurable:!0}}),ee&&(Object.setPrototypeOf?Object.setPrototypeOf($,ee):$.__proto__=ee)}var L=function(){function $(ee,te){for(var ae=0,oe;ae<te.length;ae++)oe=te[ae],oe.enumerable=oe.enumerable||!1,oe.configurable=!0,'value'in oe&&(oe.writable=!0),Object.defineProperty(ee,oe.key,oe)}return function(ee,te,ae){return te&&$(ee.prototype,te),ae&&$(ee,ae),ee}}(),N=E(3),H=M(N),z=E(105),U=M(z),W=E(107),V=M(W),G=E(109),X=M(G),Y=E(73),K=E(72),Z={top:-10,left:-10,height:1,width:1},Q=function($){function ee(te){A(this,ee);var ae=I(this,(ee.__proto__||Object.getPrototypeOf(ee)).call(this,Y.componentNames.CROPPER,te));return ae._cropzone=null,ae._startX=null,ae._startY=null,ae._withShiftKey=!1,ae._listeners={keydown:ae._onKeyDown.bind(ae),keyup:ae._onKeyUp.bind(ae),mousedown:ae._onFabricMouseDown.bind(ae),mousemove:ae._onFabricMouseMove.bind(ae),mouseup:ae._onFabricMouseUp.bind(ae)},ae}return R(ee,$),L(ee,[{key:'start',value:function(){if(!this._cropzone){var ae=this.getCanvas();ae.forEachObject(function(oe){oe.evented=!1}),this._cropzone=new X.default({left:-10,top:-10,width:1,height:1,strokeWidth:0,cornerSize:10,cornerColor:'black',fill:'transparent',hasRotatingPoint:!1,hasBorders:!1,lockScalingFlip:!0,lockRotation:!0},this.graphics.cropSelectionStyle),ae.deactivateAll(),ae.add(this._cropzone),ae.on('mouse:down',this._listeners.mousedown),ae.selection=!1,ae.defaultCursor='crosshair',U.default.util.addListener(document,'keydown',this._listeners.keydown),U.default.util.addListener(document,'keyup',this._listeners.keyup)}}},{key:'end',value:function(){var ae=this.getCanvas(),oe=this._cropzone;oe&&(oe.remove(),ae.selection=!0,ae.defaultCursor='default',ae.off('mouse:down',this._listeners.mousedown),ae.forEachObject(function(ne){ne.evented=!0}),this._cropzone=null,U.default.util.removeListener(document,'keydown',this._listeners.keydown),U.default.util.removeListener(document,'keyup',this._listeners.keyup))}},{key:'_onFabricMouseDown',value:function(ae){var oe=this.getCanvas();if(!ae.target){oe.selection=!1;var ne=oe.getPointer(ae.e);this._startX=ne.x,this._startY=ne.y,oe.on({'mouse:move':this._listeners.mousemove,'mouse:up':this._listeners.mouseup})}}},{key:'_onFabricMouseMove',value:function(ae){var oe=this.getCanvas(),ne=oe.getPointer(ae.e),ie=ne.x,le=ne.y,se=this._cropzone;Math.abs(ie-this._startX)+Math.abs(le-this._startY)>10&&(se.remove(),se.set(this._calcRectDimensionFromPoint(ie,le)),oe.add(se))}},{key:'_calcRectDimensionFromPoint',value:function(ae,oe){var ne=this.getCanvas(),ie=ne.getWidth(),le=ne.getHeight(),se=this._startX,ce=this._startY,de=(0,K.clamp)(ae,0,se),ue=(0,K.clamp)(oe,0,ce),pe=(0,K.clamp)(ae,se,ie)-de,ge=(0,K.clamp)(oe,ce,le)-ue;return this._withShiftKey&&(pe>ge?ge=pe:ge>pe&&(pe=ge),se>=ae&&(de=se-pe),ce>=oe&&(ue=ce-ge)),{left:de,top:ue,width:pe,height:ge}}},{key:'_onFabricMouseUp',value:function(){var ae=this._cropzone,oe=this._listeners,ne=this.getCanvas();ne.setActiveObject(ae),ne.off({'mouse:move':oe.mousemove,'mouse:up':oe.mouseup})}},{key:'getCroppedImageData',value:function(ae){var oe=this.getCanvas(),ne=oe.contains(this._cropzone);if(!ae)return null;ne&&this._cropzone.remove();var ie={imageName:this.getImageName(),url:oe.toDataURL(ae)};return ne&&oe.add(this._cropzone),ie}},{key:'getCropzoneRect',value:function(){var ae=this._cropzone;return ae.isValid()?{left:ae.getLeft(),top:ae.getTop(),width:ae.getWidth(),height:ae.getHeight()}:null}},{key:'setCropzoneRect',value:function(ae){var oe=this.getCanvas(),ne=this._cropzone;oe.deactivateAll(),oe.selection=!1,ne.remove(),ne.set(ae?this._getPresetCropSizePosition(ae):Z),oe.add(ne),oe.selection=!0,ae&&oe.setActiveObject(ne)}},{key:'_getPresetCropSizePosition',value:function(ae){var oe=this.getCanvas(),ne=oe.getWidth(),ie=oe.getHeight(),le=ne>=ie?ne:ie,se=function(he,ve){return he>ve?ve/he:1},ce=le*ae,de=le,ue=se(ce,ne),pe=H.default.map([ce,de],function(fe){return fe*ue});ce=pe[0],de=pe[1];var ge=se(de,ie),me=H.default.map([ce,de],function(fe){return fe*ge});return ce=me[0],de=me[1],{top:(ie-de)/2,left:(ne-ce)/2,width:ce,height:de}}},{key:'_onKeyDown',value:function(ae){ae.keyCode===Y.keyCodes.SHIFT&&(this._withShiftKey=!0)}},{key:'_onKeyUp',value:function(ae){ae.keyCode===Y.keyCodes.SHIFT&&(this._withShiftKey=!1)}}]),ee}(V.default);m.exports=Q},function(m,_,E){'use strict';function M(J){return J&&J.__esModule?J:{default:J}}var A=E(3),I=M(A),R=E(105),L=M(R),N=E(72),K=L.default.util.createClass(L.default.Rect,{initialize:function(Z,Q){Z=I.default.extend(Z,Q),Z.type='cropzone',this.callSuper('initialize',Z),this.options=Z,this.on({moving:this._onMoving,scaling:this._onScaling})},_render:function(Z){var Q=7;this.callSuper('_render',Z);var ee=this.flipX?-1:1,te=this.flipY?-1:1,ae=ee/this.scaleX,oe=te/this.scaleY;Z.scale(ae,oe),this._fillOuterRect(Z,'rgba(0, 0, 0, 0.55)'),this.options.lineWidth?(this._fillInnerRect(Z),this._strokeBorder(Z,'rgb(255, 255, 255)',{lineWidth:this.options.lineWidth})):(this._strokeBorder(Z,'rgb(0, 0, 0)',{lineDashWidth:Q}),this._strokeBorder(Z,'rgb(255, 255, 255)',{lineDashWidth:Q,lineDashOffset:7})),Z.scale(1/ae,1/oe)},_fillOuterRect:function(Z,Q){var $=this._getCoordinates(Z),ee=$.x,te=$.y;Z.save(),Z.fillStyle=Q,Z.beginPath(),Z.moveTo(ee[0]-1,te[0]-1),Z.lineTo(ee[3]+1,te[0]-1),Z.lineTo(ee[3]+1,te[3]+1),Z.lineTo(ee[0]-1,te[3]+1),Z.lineTo(ee[0]-1,te[0]-1),Z.closePath(),Z.moveTo(ee[1],te[1]),Z.lineTo(ee[1],te[2]),Z.lineTo(ee[2],te[2]),Z.lineTo(ee[2],te[1]),Z.lineTo(ee[1],te[1]),Z.closePath(),Z.fill(),Z.restore()},_fillInnerRect:function(Z){var Q=this._getCoordinates(Z),$=Q.x,ee=Q.y,te=this._caculateInnerPosition($,($[2]-$[1])/3),ae=this._caculateInnerPosition(ee,(ee[2]-ee[1])/3);Z.save(),Z.strokeStyle='rgba(255, 255, 255, 0.7)',Z.lineWidth=this.options.lineWidth,Z.beginPath(),Z.moveTo(te[0],ae[1]),Z.lineTo(te[3],ae[1]),Z.moveTo(te[0],ae[2]),Z.lineTo(te[3],ae[2]),Z.moveTo(te[1],ae[0]),Z.lineTo(te[1],ae[3]),Z.moveTo(te[2],ae[0]),Z.lineTo(te[2],ae[3]),Z.stroke(),Z.closePath(),Z.restore()},_caculateInnerPosition:function(Z,Q){var $=[];return $[0]=Z[1],$[1]=Z[1]+Q,$[2]=Z[1]+2*Q,$[3]=Z[2],$},_getCoordinates:function(Z){var Q=this.getWidth(),$=this.getHeight(),ee=Q/2,te=$/2,ae=this.getLeft(),oe=this.getTop(),ne=Z.canvas;return{x:I.default.map([-(ee+ae),-ee,ee,ee+(ne.width-ae-Q)],Math.ceil),y:I.default.map([-(te+oe),-te,te,te+(ne.height-oe-$)],Math.ceil)}},_strokeBorder:function(Z,Q,$){var ee=$.lineDashWidth,te=$.lineDashOffset,ae=$.lineWidth,oe=this.getWidth()/2,ne=this.getHeight()/2;Z.save(),Z.strokeStyle=Q,Z.setLineDash&&Z.setLineDash([ee,ee]),te&&(Z.lineDashOffset=te),ae&&(Z.lineWidth=ae),Z.beginPath(),Z.moveTo(-oe,-ne),Z.lineTo(oe,-ne),Z.lineTo(oe,ne),Z.lineTo(-oe,ne),Z.lineTo(-oe,-ne),Z.stroke(),Z.restore()},_onMoving:function(){var Z=this.getLeft(),Q=this.getTop(),$=this.getWidth(),ee=this.getHeight(),te=this.canvas.getWidth()-$,ae=this.canvas.getHeight()-ee;this.setLeft((0,N.clamp)(Z,0,te)),this.setTop((0,N.clamp)(Q,0,ae))},_onScaling:function(Z){var Q=this.canvas.getPointer(Z.e),$=this._calcScalingSizeFromPointer(Q);this.scale(1).set($)},_calcScalingSizeFromPointer:function(Z){var Q=Z.x,$=Z.y,ee=this._calcTopLeftScalingSizeFromPointer(Q,$),te=this._calcBottomRightScalingSizeFromPointer(Q,$);return this._makeScalingSettings(ee,te)},_calcTopLeftScalingSizeFromPointer:function(Z,Q){var $=this.getHeight()+this.top,ee=this.getWidth()+this.left,te=(0,N.clamp)(Q,0,$-1),ae=(0,N.clamp)(Z,0,ee-1);return{top:te,left:ae,width:ee-ae,height:$-te}},_calcBottomRightScalingSizeFromPointer:function(Z,Q){var $=this.canvas,ee=$.width,te=$.height,ae=this.left,oe=this.top;return{width:(0,N.clamp)(Z,ae+1,ee)-ae,height:(0,N.clamp)(Q,oe+1,te)-oe}},_makeScalingSettings:function(Z,Q){var $=Z.width,ee=Z.height,te=Q.height,ae=Q.width,oe=Z.left,ne=Z.top,ie;switch(this.__corner){case'tl':ie=Z;break;case'tr':ie={width:ae,height:ee,top:ne};break;case'bl':ie={width:$,height:te,left:oe};break;case'br':ie=Q;break;case'ml':ie={width:$,left:oe};break;case'mt':ie={height:ee,top:ne};break;case'mr':ie={width:ae};break;case'mb':ie={height:te};break;default:}return ie},isValid:function(){return 0<=this.left&&0<=this.top&&0<this.width&&0<this.height}});m.exports=K},function(m,_,E){'use strict';function M(Z){return Z&&Z.__esModule?Z:{default:Z}}function A(Z,Q){if(!(Z instanceof Q))throw new TypeError('Cannot call a class as a function')}function I(Z,Q){if(!Z)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return Q&&('object'==typeof Q||'function'==typeof Q)?Q:Z}function R(Z,Q){if('function'!=typeof Q&&null!==Q)throw new TypeError('Super expression must either be null or a function, not '+typeof Q);Z.prototype=Object.create(Q&&Q.prototype,{constructor:{value:Z,enumerable:!1,writable:!0,configurable:!0}}),Q&&(Object.setPrototypeOf?Object.setPrototypeOf(Z,Q):Z.__proto__=Q)}var L=function(){function Z(Q,$){for(var ee=0,te;ee<$.length;ee++)te=$[ee],te.enumerable=te.enumerable||!1,te.configurable=!0,'value'in te&&(te.writable=!0),Object.defineProperty(Q,te.key,te)}return function(Q,$,ee){return $&&Z(Q.prototype,$),ee&&Z(Q,ee),Q}}(),N=E(3),H=M(N),z=E(4),U=M(z),W=E(107),V=M(W),G=E(73),X=M(G),Y=X.default.componentNames,K=X.default.rejectMessages,J=function(Z){function Q($){return A(this,Q),I(this,(Q.__proto__||Object.getPrototypeOf(Q)).call(this,Y.FLIP,$))}return R(Q,Z),L(Q,[{key:'getCurrentSetting',value:function(){var ee=this.getCanvasImage();return{flipX:ee.flipX,flipY:ee.flipY}}},{key:'set',value:function(ee){var te=this.getCurrentSetting(),ae=te.flipX!==ee.flipX,oe=te.flipY!==ee.flipY;return ae||oe?(H.default.extend(te,ee),this.setImageProperties(te,!0),this._invertAngle(ae,oe),this._flipObjects(ae,oe),U.default.resolve({flipX:te.flipX,flipY:te.flipY,angle:this.getCanvasImage().angle})):U.default.reject(K.flip)}},{key:'_invertAngle',value:function(ee,te){var ae=this.getCanvasImage(),oe=ae.angle;ee&&(oe*=-1),te&&(oe*=-1),ae.setAngle(parseFloat(oe)).setCoords()}},{key:'_flipObjects',value:function(ee,te){var ae=this.getCanvas();ee&&ae.forEachObject(function(oe){oe.set({angle:parseFloat(-1*oe.angle),flipX:!oe.flipX,left:ae.width-oe.left}).setCoords()}),te&&ae.forEachObject(function(oe){oe.set({angle:parseFloat(-1*oe.angle),flipY:!oe.flipY,top:ae.height-oe.top}).setCoords()}),ae.renderAll()}},{key:'reset',value:function(){return this.set({flipX:!1,flipY:!1})}},{key:'flipX',value:function(){var ee=this.getCurrentSetting();return this.set({flipX:!ee.flipX,flipY:ee.flipY})}},{key:'flipY',value:function(){var ee=this.getCurrentSetting();return this.set({flipX:ee.flipX,flipY:!ee.flipY})}}]),Q}(V.default);m.exports=J},function(m,_,E){'use strict';function M(J){return J&&J.__esModule?J:{default:J}}function A(J,Z){if(!(J instanceof Z))throw new TypeError('Cannot call a class as a function')}function I(J,Z){if(!J)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return Z&&('object'==typeof Z||'function'==typeof Z)?Z:J}function R(J,Z){if('function'!=typeof Z&&null!==Z)throw new TypeError('Super expression must either be null or a function, not '+typeof Z);J.prototype=Object.create(Z&&Z.prototype,{constructor:{value:J,enumerable:!1,writable:!0,configurable:!0}}),Z&&(Object.setPrototypeOf?Object.setPrototypeOf(J,Z):J.__proto__=Z)}var L=function(){function J(Z,Q){for(var $=0,ee;$<Q.length;$++)ee=Q[$],ee.enumerable=ee.enumerable||!1,ee.configurable=!0,'value'in ee&&(ee.writable=!0),Object.defineProperty(Z,ee.key,ee)}return function(Z,Q,$){return Q&&J(Z.prototype,Q),$&&J(Z,$),Z}}(),N=E(105),H=M(N),z=E(4),U=M(z),W=E(107),V=M(W),G=E(73),X=M(G),Y=X.default.componentNames,K=function(J){function Z(Q){return A(this,Z),I(this,(Z.__proto__||Object.getPrototypeOf(Z)).call(this,Y.ROTATION,Q))}return R(Z,J),L(Z,[{key:'getCurrentAngle',value:function(){return this.getCanvasImage().angle}},{key:'setAngle',value:function($){var ee=this.getCurrentAngle()%360;$%=360;var te=this.getCanvasImage(),ae=te.getCenterPoint();te.setAngle($).setCoords(),this.adjustCanvasDimension();var oe=te.getCenterPoint();return this._rotateForEachObject(ae,oe,$-ee),U.default.resolve($)}},{key:'_rotateForEachObject',value:function($,ee,te){var ae=this.getCanvas(),oe={x:$.x-ee.x,y:$.y-ee.y};ae.forEachObject(function(ne){var ie=ne.getCenterPoint(),le=H.default.util.degreesToRadians(te),se=H.default.util.rotatePoint(ie,$,le);ne.set({left:se.x-oe.x,top:se.y-oe.y,angle:(ne.angle+te)%360}),ne.setCoords()}),ae.renderAll()}},{key:'rotate',value:function($){var ee=this.getCurrentAngle();return this.setAngle(ee+$)}}]),Z}(V.default);m.exports=K},function(m,_,E){'use strict';function M(X){return X&&X.__esModule?X:{default:X}}function A(X,Y){if(!(X instanceof Y))throw new TypeError('Cannot call a class as a function')}function I(X,Y){if(!X)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return Y&&('object'==typeof Y||'function'==typeof Y)?Y:X}function R(X,Y){if('function'!=typeof Y&&null!==Y)throw new TypeError('Super expression must either be null or a function, not '+typeof Y);X.prototype=Object.create(Y&&Y.prototype,{constructor:{value:X,enumerable:!1,writable:!0,configurable:!0}}),Y&&(Object.setPrototypeOf?Object.setPrototypeOf(X,Y):X.__proto__=Y)}var L=function(){function X(Y,K){for(var J=0,Z;J<K.length;J++)Z=K[J],Z.enumerable=Z.enumerable||!1,Z.configurable=!0,'value'in Z&&(Z.writable=!0),Object.defineProperty(Y,Z.key,Z)}return function(Y,K,J){return K&&X(Y.prototype,K),J&&X(Y,J),Y}}(),N=E(105),H=M(N),z=E(107),U=M(z),W=E(73),V=M(W),G=function(X){function Y(K){A(this,Y);var J=I(this,(Y.__proto__||Object.getPrototypeOf(Y)).call(this,V.default.componentNames.FREE_DRAWING,K));return J.width=12,J.oColor=new H.default.Color('rgba(0, 0, 0, 0.5)'),J}return R(Y,X),L(Y,[{key:'start',value:function(J){var Z=this.getCanvas();Z.isDrawingMode=!0,this.setBrush(J)}},{key:'setBrush',value:function(J){var Z=this.getCanvas().freeDrawingBrush;J=J||{},this.width=J.width||this.width,J.color&&(this.oColor=new H.default.Color(J.color)),Z.width=this.width,Z.color=this.oColor.toRgba()}},{key:'end',value:function(){var J=this.getCanvas();J.isDrawingMode=!1}}]),Y}(U.default);m.exports=G},function(m,_,E){'use strict';function M(Y){return Y&&Y.__esModule?Y:{default:Y}}function A(Y,K){if(!(Y instanceof K))throw new TypeError('Cannot call a class as a function')}function I(Y,K){if(!Y)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return K&&('object'==typeof K||'function'==typeof K)?K:Y}function R(Y,K){if('function'!=typeof K&&null!==K)throw new TypeError('Super expression must either be null or a function, not '+typeof K);Y.prototype=Object.create(K&&K.prototype,{constructor:{value:Y,enumerable:!1,writable:!0,configurable:!0}}),K&&(Object.setPrototypeOf?Object.setPrototypeOf(Y,K):Y.__proto__=K)}var L=function(){function Y(K,J){for(var Z=0,Q;Z<J.length;Z++)Q=J[Z],Q.enumerable=Q.enumerable||!1,Q.configurable=!0,'value'in Q&&(Q.writable=!0),Object.defineProperty(K,Q.key,Q)}return function(K,J,Z){return J&&Y(K.prototype,J),Z&&Y(K,Z),K}}(),N=E(105),H=M(N),z=E(107),U=M(z),W=E(73),V=M(W),G=V.default.eventNames,X=function(Y){function K(J){A(this,K);var Z=I(this,(K.__proto__||Object.getPrototypeOf(K)).call(this,V.default.componentNames.LINE,J));return Z._width=12,Z._oColor=new H.default.Color('rgba(0, 0, 0, 0.5)'),Z._listeners={mousedown:Z._onFabricMouseDown.bind(Z),mousemove:Z._onFabricMouseMove.bind(Z),mouseup:Z._onFabricMouseUp.bind(Z)},Z}return R(K,Y),L(K,[{key:'start',value:function(Z){var Q=this.getCanvas();Q.defaultCursor='crosshair',Q.selection=!1,this.setBrush(Z),Q.forEachObject(function($){$.set({evented:!1})}),Q.on({'mouse:down':this._listeners.mousedown})}},{key:'setBrush',value:function(Z){var Q=this.getCanvas().freeDrawingBrush;Z=Z||{},this._width=Z.width||this._width,Z.color&&(this._oColor=new H.default.Color(Z.color)),Q.width=this._width,Q.color=this._oColor.toRgba()}},{key:'end',value:function(){var Z=this.getCanvas();Z.defaultCursor='default',Z.selection=!0,Z.forEachObject(function(Q){Q.set({evented:!0})}),Z.off('mouse:down',this._listeners.mousedown)}},{key:'_onFabricMouseDown',value:function(Z){var Q=this.getCanvas(),$=Q.getPointer(Z.e),ee=[$.x,$.y,$.x,$.y];this._line=new H.default.Line(ee,{stroke:this._oColor.toRgba(),strokeWidth:this._width,evented:!1}),this._line.set(V.default.fObjectOptions.SELECTION_STYLE),Q.add(this._line),Q.on({'mouse:move':this._listeners.mousemove,'mouse:up':this._listeners.mouseup})}},{key:'_onFabricMouseMove',value:function(Z){var Q=this.getCanvas(),$=Q.getPointer(Z.e);this._line.set({x2:$.x,y2:$.y}),this._line.setCoords(),Q.renderAll()}},{key:'_onFabricMouseUp',value:function(){var Z=this.getCanvas(),Q=this.graphics.createObjectProperties(this._line);this.fire(G.ADD_OBJECT,Q),this._line=null,Z.off({'mouse:move':this._listeners.mousemove,'mouse:up':this._listeners.mouseup})}}]),K}(U.default);m.exports=X},function(m,_,E){'use strict';function M(se){return se&&se.__esModule?se:{default:se}}function A(se,ce){if(!(se instanceof ce))throw new TypeError('Cannot call a class as a function')}function I(se,ce){if(!se)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return ce&&('object'==typeof ce||'function'==typeof ce)?ce:se}function R(se,ce){if('function'!=typeof ce&&null!==ce)throw new TypeError('Super expression must either be null or a function, not '+typeof ce);se.prototype=Object.create(ce&&ce.prototype,{constructor:{value:se,enumerable:!1,writable:!0,configurable:!0}}),ce&&(Object.setPrototypeOf?Object.setPrototypeOf(se,ce):se.__proto__=ce)}var L=function(){function se(ce,de){for(var ue=0,pe;ue<de.length;ue++)pe=de[ue],pe.enumerable=pe.enumerable||!1,pe.configurable=!0,'value'in pe&&(pe.writable=!0),Object.defineProperty(ce,pe.key,pe)}return function(ce,de,ue){return de&&se(ce.prototype,de),ue&&se(ce,ue),ce}}(),N=E(105),H=M(N),z=E(3),U=M(z),W=E(4),V=M(W),G=E(107),X=M(G),Y=E(73),K=M(Y),J=E(72),Z=M(J),Q=K.default.eventNames,$={fill:'#000000',left:0,top:0},ee={fill:'#000000',fontStyle:'normal',fontWeight:'normal',textAlign:'left',textDecoraiton:''},te=U.default.browser,oe=Z.default.makeStyleText({position:'absolute',padding:0,display:'none',border:'1px dotted red',overflow:'hidden',resize:'none',outline:'none','border-radius':0,'background-color':'transparent','-webkit-appearance':'none','z-index':9999,'white-space':'pre'}),le=function(se){function ce(de){A(this,ce);var ue=I(this,(ce.__proto__||Object.getPrototypeOf(ce)).call(this,K.default.componentNames.TEXT,de));return ue._defaultStyles=$,ue._isSelected=!1,ue._selectedObj={},ue._editingObj={},ue._listeners={mousedown:ue._onFabricMouseDown.bind(ue),select:ue._onFabricSelect.bind(ue),selectClear:ue._onFabricSelectClear.bind(ue),scaling:ue._onFabricScaling.bind(ue)},ue._textarea=null,ue._ratio=1,ue._lastClickTime=new Date().getTime(),ue._editingObjInfos={},ue.isPrevEditing=!1,ue.useItext=de.useItext,ue}return R(ce,se),L(ce,[{key:'start',value:function(){var ue=this.getCanvas();ue.selection=!1,ue.defaultCursor='text',ue.on({'mouse:down':this._listeners.mousedown,'object:selected':this._listeners.select,'before:selection:cleared':this._listeners.selectClear,'object:scaling':this._listeners.scaling,'text:editing':this._listeners.modify}),this.useItext?ue.forEachObject(function(pe){'i-text'===pe.type&&pe.set({left:pe.left-pe.width/2,top:pe.top-pe.height/2,originX:'left',originY:'top'})}):this._createTextarea(),this.setCanvasRatio()}},{key:'end',value:function(){var ue=this.getCanvas();ue.selection=!0,ue.defaultCursor='default',this.useItext?ue.forEachObject(function(pe){'i-text'===pe.type&&(''===pe.text?pe.remove():pe.set({left:pe.left+pe.width/2,top:pe.top+pe.height/2,originX:'center',originY:'center'}))}):(ue.deactivateAllWithDispatch(),this._removeTextarea()),ue.off({'mouse:down':this._listeners.mousedown,'object:selected':this._listeners.select,'before:selection:cleared':this._listeners.selectClear,'object:scaling':this._listeners.scaling,'text:editing':this._listeners.modify})}},{key:'add',value:function(ue,pe){var ge=this;return new V.default(function(me){var fe=ge.getCanvas(),he=null,ve=K.default.fObjectOptions.SELECTION_STYLE,be=ge._defaultStyles;ge._setInitPos(pe.position),pe.styles&&(be=U.default.extend(be,pe.styles)),ge.useItext?(he=new H.default.IText(ue,be),ve=U.default.extend({},ve,{originX:'left',originY:'top'})):he=new H.default.Text(ue,be),he.set(ve),he.on({mouseup:ge._onFabricMouseUp.bind(ge)}),fe.add(he),fe.getActiveObject()||fe.setActiveObject(he),ge.isPrevEditing=!0,me(ge.graphics.createObjectProperties(he))})}},{key:'change',value:function(ue,pe){var ge=this;return new V.default(function(me){ue.set('text',pe),ge.getCanvas().renderAll(),me()})}},{key:'setStyle',value:function(ue,pe){var ge=this;return new V.default(function(me){U.default.forEach(pe,function(fe,he){ue[he]===fe&&(pe[he]=ee[he]||'')},ge),ue.set(pe),ge.getCanvas().renderAll(),me()})}},{key:'getText',value:function(ue){return ue.getText()}},{key:'setSelectedInfo',value:function(ue,pe){this._selectedObj=ue,this._isSelected=pe}},{key:'isSelected',value:function(){return this._isSelected}},{key:'getSelectedObj',value:function(){return this._selectedObj}},{key:'setCanvasRatio',value:function(){var ue=this.getCanvasElement(),pe=parseInt(ue.style.maxWidth,10),ge=ue.width;this._ratio=ge/pe}},{key:'getCanvasRatio',value:function(){return this._ratio}},{key:'_setInitPos',value:function(ue){ue=ue||this.getCanvasImage().getCenterPoint(),this._defaultStyles.left=ue.x,this._defaultStyles.top=ue.y}},{key:'_createTextarea',value:function(){var ue=this.getCanvasElement().parentNode,pe=document.createElement('textarea');pe.className='tui-image-eidtor-textarea',pe.setAttribute('style',oe),pe.setAttribute('wrap','off'),ue.appendChild(pe),this._textarea=pe,this._listeners=U.default.extend(this._listeners,{input:this._onInput.bind(this),keydown:this._onKeyDown.bind(this),blur:this._onBlur.bind(this),scroll:this._onScroll.bind(this)}),te.msie&&9===te.version?H.default.util.addListener(pe,'keydown',this._listeners.keydown):H.default.util.addListener(pe,'input',this._listeners.input),H.default.util.addListener(pe,'blur',this._listeners.blur),H.default.util.addListener(pe,'scroll',this._listeners.scroll)}},{key:'_removeTextarea',value:function(){var ue=this.getCanvasElement().parentNode,pe=ue.querySelector('textarea');ue.removeChild(pe),this._textarea=null,te.msie&&10>te.version?H.default.util.removeListener(pe,'keydown',this._listeners.keydown):H.default.util.removeListener(pe,'input',this._listeners.input),H.default.util.removeListener(pe,'blur',this._listeners.blur),H.default.util.removeListener(pe,'scroll',this._listeners.scroll)}},{key:'_onInput',value:function(){var ue=this.getCanvasRatio(),pe=this._editingObj,ge=this._textarea.style;ge.width=Math.ceil(pe.getWidth()/ue)+'px',ge.height=Math.ceil(pe.getHeight()/ue)+'px'}},{key:'_onKeyDown',value:function(){var ue=this,pe=this.getCanvasRatio(),ge=this._editingObj,me=this._textarea.style;setTimeout(function(){ge.setText(ue._textarea.value),me.width=Math.ceil(ge.getWidth()/pe)+'px',me.height=Math.ceil(ge.getHeight()/pe)+'px'},0)}},{key:'_onBlur',value:function(){var ue=this.getCanvasRatio(),pe=this._editingObj,ge=this._editingObjInfos,me=this._textarea.value,fe=pe.getWidth()/ue-ge.width/ue,he=pe.getHeight()/ue-ge.height/ue;if(1===ue&&(fe/=2,he/=2),this._textarea.style.display='none',pe.set({left:ge.left+fe,top:ge.top+he}),me.length){this.getCanvas().add(pe);var ve={id:U.default.stamp(pe),type:pe.type,text:me};this.fire(Q.TEXT_CHANGED,ve)}}},{key:'_onScroll',value:function(){this._textarea.scrollLeft=0,this._textarea.scrollTop=0}},{key:'_onFabricScaling',value:function(ue){var pe=ue.target,ge=pe.getFontSize()*pe.getScaleY();pe.setFontSize(ge),pe.setScaleX(1),pe.setScaleY(1)}},{key:'_onFabricSelectClear',value:function(ue){var pe=this.getSelectedObj();this.isPrevEditing=!0,this.setSelectedInfo(ue.target,!1),pe&&''===pe.text&&pe.remove()}},{key:'_onFabricSelect',value:function(ue){this.isPrevEditing=!0,this.setSelectedInfo(ue.target,!0)}},{key:'_onFabricMouseDown',value:function(ue){var pe=ue.target;return pe&&!pe.isType('text')?void 0:this.isPrevEditing?void(this.isPrevEditing=!1):void this._fireAddText(ue)}},{key:'_fireAddText',value:function(ue){var pe=ue.target,ge=ue.e||{},me=this.getCanvas().getPointer(ge);pe||this.fire(Q.ADD_TEXT,{originPosition:{x:me.x,y:me.y},clientPosition:{x:ge.clientX||0,y:ge.clientY||0}})}},{key:'_onFabricMouseUp',value:function(ue){var pe=new Date().getTime();this._isDoubleClick(pe)&&(!this.useItext&&this._changeToEditingMode(ue.target),this.fire(Q.TEXT_EDITING)),this._lastClickTime=pe}},{key:'_isDoubleClick',value:function(ue){return ue-this._lastClickTime<500}},{key:'_changeToEditingMode',value:function(ue){var pe=this.getCanvasRatio(),ge=this._textarea.style;this.isPrevEditing=!0,ue.remove(),this._editingObj=ue,this._textarea.value=ue.getText(),this._editingObjInfos={left:this._editingObj.getLeft(),top:this._editingObj.getTop(),width:this._editingObj.getWidth(),height:this._editingObj.getHeight()},ge.display='block',ge.left=ue.oCoords.tl.x/pe+'px',ge.top=ue.oCoords.tl.y/pe+'px',ge.width=Math.ceil(ue.getWidth()/pe)+'px',ge.height=Math.ceil(ue.getHeight()/pe)+'px',ge.transform='rotate('+ue.getAngle()+'deg)',ge.color=ue.getFill(),ge['font-size']=ue.getFontSize()/pe+'px',ge['font-family']=ue.getFontFamily(),ge['font-style']=ue.getFontStyle(),ge['font-weight']=ue.getFontWeight(),ge['text-align']=ue.getTextAlign(),ge['line-height']=ue.getLineHeight()+0.1,ge['transform-origin']='left top',this._textarea.focus()}}]),ce}(X.default);m.exports=le},function(m,_,E){'use strict';function M(ee){return ee&&ee.__esModule?ee:{default:ee}}function A(ee,te){if(!(ee instanceof te))throw new TypeError('Cannot call a class as a function')}function I(ee,te){if(!ee)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return te&&('object'==typeof te||'function'==typeof te)?te:ee}function R(ee,te){if('function'!=typeof te&&null!==te)throw new TypeError('Super expression must either be null or a function, not '+typeof te);ee.prototype=Object.create(te&&te.prototype,{constructor:{value:ee,enumerable:!1,writable:!0,configurable:!0}}),te&&(Object.setPrototypeOf?Object.setPrototypeOf(ee,te):ee.__proto__=te)}var L=function(){function ee(te,ae){for(var oe=0,ne;oe<ae.length;oe++)ne=ae[oe],ne.enumerable=ne.enumerable||!1,ne.configurable=!0,'value'in ne&&(ne.writable=!0),Object.defineProperty(te,ne.key,ne)}return function(te,ae,oe){return ae&&ee(te.prototype,ae),oe&&ee(te,oe),te}}(),N=E(105),H=M(N),z=E(3),U=M(z),W=E(4),V=M(W),G=E(107),X=M(G),Y=E(73),K=M(Y),J=K.default.eventNames,Z=K.default.rejectMessages,Q={arrow:'M 0 90 H 105 V 120 L 160 60 L 105 0 V 30 H 0 Z',cancel:'M 0 30 L 30 60 L 0 90 L 30 120 L 60 90 L 90 120 L 120 90 L 90 60 L 120 30 L 90 0 L 60 30 L 30 0 Z'},$=function(ee){function te(ae){A(this,te);var oe=I(this,(te.__proto__||Object.getPrototypeOf(te)).call(this,K.default.componentNames.ICON,ae));return oe._oColor='#000000',oe._pathMap=Q,oe.useDragAddIcon=ae.useDragAddIcon,oe}return R(te,ee),L(te,[{key:'add',value:function(oe,ne){var ie=this;return new V.default(function(le,se){var ce=ie.getCanvas(),de=ie._pathMap[oe],ue=K.default.fObjectOptions.SELECTION_STYLE,pe=0<=Object.keys(K.default.defaultIconPath).indexOf(oe),ge=ie.useDragAddIcon&&pe,me=de?ie._createIcon(de):null;me||se(Z.invalidParameters),me.set(U.default.extend({type:'icon',fill:ie._oColor},ue,ne,ie.graphics.controlStyle)),ce.add(me).setActiveObject(me),ge&&ie._addWithDragEvent(ce),le(ie.graphics.createObjectProperties(me))})}},{key:'_addWithDragEvent',value:function(oe){var ne=this;oe.on({'mouse:move':function(le){oe.selection=!1,ne.fire(J.ICON_CREATE_RESIZE,{moveOriginPointer:oe.getPointer(le.e)})},'mouse:up':function(le){ne.fire(J.ICON_CREATE_END,{moveOriginPointer:oe.getPointer(le.e)}),oe.defaultCursor='default',oe.off('mouse:up'),oe.off('mouse:move'),oe.selection=!0}})}},{key:'registerPaths',value:function(oe){var ne=this;U.default.forEach(oe,function(ie,le){ne._pathMap[le]=ie},this)}},{key:'setColor',value:function(oe,ne){this._oColor=oe,ne&&'icon'===ne.get('type')&&(ne.setFill(this._oColor),this.getCanvas().renderAll())}},{key:'getColor',value:function(oe){return oe.fill}},{key:'_createIcon',value:function(oe){return new H.default.Path(oe)}}]),te}(X.default);m.exports=$},function(m,_,E){'use strict';function M(ce){return ce&&ce.__esModule?ce:{default:ce}}function A(ce,de){if(!(ce instanceof de))throw new TypeError('Cannot call a class as a function')}function I(ce,de){if(!ce)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return de&&('object'==typeof de||'function'==typeof de)?de:ce}function R(ce,de){if('function'!=typeof de&&null!==de)throw new TypeError('Super expression must either be null or a function, not '+typeof de);ce.prototype=Object.create(de&&de.prototype,{constructor:{value:ce,enumerable:!1,writable:!0,configurable:!0}}),de&&(Object.setPrototypeOf?Object.setPrototypeOf(ce,de):ce.__proto__=de)}var L=function(){function ce(de,ue){for(var pe=0,ge;pe<ue.length;pe++)ge=ue[pe],ge.enumerable=ge.enumerable||!1,ge.configurable=!0,'value'in ge&&(ge.writable=!0),Object.defineProperty(de,ge.key,ge)}return function(de,ue,pe){return ue&&ce(de.prototype,ue),pe&&ce(de,pe),de}}(),N=E(3),H=E(4),z=M(H),U=E(105),W=M(U),V=E(107),G=M(V),X=E(117),Y=M(X),K=E(73),J=M(K),Z=E(118),Q=M(Z),$=E(119),ee=M($),te=E(120),ae=M(te),oe=E(121),ne=M(oe),ie=J.default.rejectMessages,le=W.default.Image.filters;le.Mask=Y.default,le.Blur=Q.default,le.Sharpen=ee.default,le.Emboss=ae.default,le.ColorFilter=ne.default;var se=function(ce){function de(ue){return A(this,de),I(this,(de.__proto__||Object.getPrototypeOf(de)).call(this,J.default.componentNames.FILTER,ue))}return R(de,ce),L(de,[{key:'add',value:function(pe,ge){var me=this;return new z.default(function(fe,he){var ve=me._getSourceImage(),be=me.getCanvas(),ye=me._getFilter(ve,pe);ye||(ye=me._createFilter(ve,pe,ge)),ye||he(ie.invalidParameters),me._changeFilterValues(ye,ge),me._apply(ve,function(){be.renderAll(),fe({type:pe,action:'add'})})})}},{key:'remove',value:function(pe){var ge=this;return new z.default(function(me,fe){var he=ge._getSourceImage(),ve=ge.getCanvas();he.filters.length||fe(ie.unsupportedOperation),ge._removeFilter(he,pe),ge._apply(he,function(){ve.renderAll(),me({type:pe,action:'remove'})})})}},{key:'hasFilter',value:function(pe){return!!this._getFilter(this._getSourceImage(),pe)}},{key:'getOptions',value:function(pe){var ge=this._getSourceImage(),me=this._getFilter(ge,pe);return me?(0,N.extend)({},me.options):null}},{key:'_changeFilterValues',value:function(pe,ge){(0,N.forEach)(ge,function(me,fe){(0,N.isUndefined)(pe[fe])||(pe[fe]=me)}),(0,N.forEach)(pe.options,function(me,fe){(0,N.isUndefined)(ge[fe])||(pe.options[fe]=ge[fe])})}},{key:'_apply',value:function(pe,ge){pe.applyFilters(ge)}},{key:'_getSourceImage',value:function(){return this.getCanvasImage()}},{key:'_createFilter',value:function(pe,ge,me){var he=this._getFabricFilterType(ge),ve=W.default.Image.filters[he],fe;return ve&&(fe=new ve(me),fe.options=me,pe.filters.push(fe)),fe}},{key:'_getFilter',value:function(pe,ge){var me=null;if(pe){var fe=this._getFabricFilterType(ge),he=pe.filters.length,ve,be;for(be=0;be<he;be+=1)if(ve=pe.filters[be],ve.type===fe){me=ve;break}}return me}},{key:'_removeFilter',value:function(pe,ge){var me=this._getFabricFilterType(ge);pe.filters=(0,N.filter)(pe.filters,function(fe){return fe.type!==me})}},{key:'_getFabricFilterType',value:function(pe){return pe.charAt(0).toUpperCase()+pe.slice(1)}}]),de}(G.default);m.exports=se},function(m,_,E){'use strict';var A=E(105),I=function(L){return L&&L.__esModule?L:{default:L}}(A),R=I.default.util.createClass(I.default.Image.filters.Mask,{applyTo:function(N){if(this.mask){var H=N.width,z=N.height,U=this._createCanvasOfMask(H,z),W=N.getContext('2d'),V=U.getContext('2d'),G=W.getImageData(0,0,H,z);this._drawMask(V,N,W),this._mapData(V,G,H,z),W.putImageData(G,0,0)}},_createCanvasOfMask:function(N,H){var z=I.default.util.createCanvasElement();return z.width=N,z.height=H,z},_drawMask:function(N){var H=this.mask,z=H.getElement(),U=H.getLeft(),W=H.getTop(),V=H.getAngle();N.save(),N.translate(U,W),N.rotate(V*Math.PI/180),N.scale(H.scaleX,H.scaleY),N.drawImage(z,-z.width/2,-z.height/2),N.restore()},_mapData:function(N,H,z,U){for(var W=H.data,V=N.getImageData(0,0,z,U).data,G=this.channel,X=4*(H.width*H.height),Y=0;Y<X;Y+=4)W[Y+3]=V[Y+G]}});m.exports=R},function(m,_,E){'use strict';var A=E(105),I=function(L){return L&&L.__esModule?L:{default:L}}(A),R=I.default.util.createClass(I.default.Image.filters.Convolute,{type:'Blur',initialize:function(){this.matrix=[0.1111111111111111,0.1111111111111111,0.1111111111111111,0.1111111111111111,0.1111111111111111,0.1111111111111111,0.1111111111111111,0.1111111111111111,0.1111111111111111]}});m.exports=R},function(m,_,E){'use strict';var A=E(105),I=function(L){return L&&L.__esModule?L:{default:L}}(A),R=I.default.util.createClass(I.default.Image.filters.Convolute,{type:'Sharpen',initialize:function(){this.matrix=[0,-1,0,-1,5,-1,0,-1,0]}});m.exports=R},function(m,_,E){'use strict';var A=E(105),I=function(L){return L&&L.__esModule?L:{default:L}}(A),R=I.default.util.createClass(I.default.Image.filters.Convolute,{type:'Emboss',initialize:function(){this.matrix=[1,1,1,1,0.7,-1,-1,-1,-1]}});m.exports=R},function(m,_,E){'use strict';var A=E(105),I=function(L){return L&&L.__esModule?L:{default:L}}(A),R=I.default.util.createClass(I.default.Image.filters.BaseFilter,{type:'ColorFilter',initialize:function(N){N||(N={}),this.color=N.color||'#FFFFFF',this.threshold=N.threshold||45,this.x=N.x||null,this.y=N.y||null},applyTo:function(N){var H=N.getContext('2d'),z=H.getImageData(0,0,N.width,N.height),U=z.data,W=this.threshold,V=I.default.Color.sourceFromHex(this.color),G,X;for(this.x&&this.y&&(V=this._getColor(z,this.x,this.y)),G=0,X=U.length;G<X;G+=4)this._isOutsideThreshold(U[G],V[0],W)||this._isOutsideThreshold(U[G+1],V[1],W)||this._isOutsideThreshold(U[G+2],V[2],W)||(U[G]=U[G+1]=U[G+2]=U[G+3]=0);H.putImageData(z,0,0)},_isOutsideThreshold:function(N,H,z){return Math.abs(N-H)>z},_getColor:function(N,H,z){var U=[0,0,0,0],W=N.data,V=N.width,X=(V*z+H)*4;return U[0]=W[X],U[1]=W[X+1],U[2]=W[X+2],U[3]=W[X+3],U}});m.exports=R},function(m,_,E){'use strict';function M(ne){return ne&&ne.__esModule?ne:{default:ne}}function A(ne,ie){if(!(ne instanceof ie))throw new TypeError('Cannot call a class as a function')}function I(ne,ie){if(!ne)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return ie&&('object'==typeof ie||'function'==typeof ie)?ie:ne}function R(ne,ie){if('function'!=typeof ie&&null!==ie)throw new TypeError('Super expression must either be null or a function, not '+typeof ie);ne.prototype=Object.create(ie&&ie.prototype,{constructor:{value:ne,enumerable:!1,writable:!0,configurable:!0}}),ie&&(Object.setPrototypeOf?Object.setPrototypeOf(ne,ie):ne.__proto__=ie)}var L=function(){function ne(ie,le){for(var se=0,ce;se<le.length;se++)ce=le[se],ce.enumerable=ce.enumerable||!1,ce.configurable=!0,'value'in ce&&(ce.writable=!0),Object.defineProperty(ie,ce.key,ce)}return function(ie,le,se){return le&&ne(ie.prototype,le),se&&ne(ie,se),ie}}(),N=E(105),H=M(N),z=E(4),U=M(z),W=E(107),V=M(W),G=E(73),X=M(G),Y=E(123),K=M(Y),J=E(3),Z=X.default.rejectMessages,Q=X.default.eventNames,$=X.default.keyCodes,te={strokeWidth:1,stroke:'#000000',fill:'#ffffff',width:1,height:1,rx:0,ry:0,lockSkewingX:!0,lockSkewingY:!0,lockUniScaling:!1,bringForward:!0,isRegular:!1},ae=['rect','circle','triangle'],oe=function(ne){function ie(le){A(this,ie);var se=I(this,(ie.__proto__||Object.getPrototypeOf(ie)).call(this,X.default.componentNames.SHAPE,le));return se._shapeObj=null,se._type='rect',se._options=(0,J.extend)({},te),se._isSelected=!1,se._startPoint={},se._withShiftKey=!1,se._handlers={mousedown:se._onFabricMouseDown.bind(se),mousemove:se._onFabricMouseMove.bind(se),mouseup:se._onFabricMouseUp.bind(se),keydown:se._onKeyDown.bind(se),keyup:se._onKeyUp.bind(se)},se}return R(ie,ne),L(ie,[{key:'start',value:function(){var se=this.getCanvas();this._isSelected=!1,se.defaultCursor='crosshair',se.selection=!1,se.uniScaleTransform=!0,se.on({'mouse:down':this._handlers.mousedown}),H.default.util.addListener(document,'keydown',this._handlers.keydown),H.default.util.addListener(document,'keyup',this._handlers.keyup)}},{key:'end',value:function(){var se=this.getCanvas();this._isSelected=!1,se.defaultCursor='default',se.selection=!0,se.uniScaleTransform=!1,se.off({'mouse:down':this._handlers.mousedown}),H.default.util.removeListener(document,'keydown',this._handlers.keydown),H.default.util.removeListener(document,'keyup',this._handlers.keyup)}},{key:'setStates',value:function(se,ce){this._type=se,ce&&(this._options=(0,J.extend)(this._options,ce))}},{key:'add',value:function(se,ce){var de=this;return new U.default(function(ue){var pe=de.getCanvas();ce=de._createOptions(ce);var ge=de._createInstance(se,ce);de._bindEventOnShape(ge),pe.add(ge).setActiveObject(ge),ue(de.graphics.createObjectProperties(ge))})}},{key:'change',value:function(se,ce){var de=this;return new U.default(function(ue,pe){0>(0,J.inArray)(se.get('type'),ae)&&pe(Z.unsupportedType),se.set(ce),de.getCanvas().renderAll(),ue()})}},{key:'_createInstance',value:function(se,ce){var de;return de='rect'===se?new H.default.Rect(ce):'circle'===se?new H.default.Ellipse((0,J.extend)({type:'circle'},ce)):'triangle'===se?new H.default.Triangle(ce):{},de}},{key:'_createOptions',value:function(se){var ce=X.default.fObjectOptions.SELECTION_STYLE;return se=(0,J.extend)({},te,this._options,ce,se),se.isRegular&&(se.lockUniScaling=!0),se}},{key:'_bindEventOnShape',value:function(se){var ce=this,de=this.getCanvas();se.on({added:function(){ce._shapeObj=this,K.default.setOrigins(ce._shapeObj)},selected:function(){ce._isSelected=!0,ce._shapeObj=this,de.uniScaleTransform=!0,de.defaultCursor='default',K.default.setOrigins(ce._shapeObj)},deselected:function(){ce._isSelected=!1,ce._shapeObj=null,de.defaultCursor='crosshair',de.uniScaleTransform=!1},modified:function(){var pe=ce._shapeObj;K.default.adjustOriginToCenter(pe),K.default.setOrigins(pe)},scaling:function(pe){var ge=de.getPointer(pe.e),me=ce._shapeObj;de.setCursor('crosshair'),K.default.resize(me,ge,!0)}})}},{key:'_onFabricMouseDown',value:function(se){if(se.target||(this._isSelected=!1,this._shapeObj=!1),!this._isSelected&&!this._shapeObj){var ce=this.getCanvas();this._startPoint=ce.getPointer(se.e),ce.on({'mouse:move':this._handlers.mousemove,'mouse:up':this._handlers.mouseup})}}},{key:'_onFabricMouseMove',value:function(se){var ce=this,de=this.getCanvas(),ue=de.getPointer(se.e),pe=this._startPoint.x,ge=this._startPoint.y,me=pe-ue.x,fe=ge-ue.y,he=this._shapeObj;he?(this._shapeObj.set({isRegular:this._withShiftKey}),K.default.resize(he,ue),de.renderAll()):this.add(this._type,{left:pe,top:ge,width:me,height:fe}).then(function(ve){ce.fire(Q.ADD_OBJECT,ve)})}},{key:'_onFabricMouseUp',value:function(){var se=this.getCanvas(),ce=this._shapeObj;ce&&K.default.adjustOriginToCenter(ce),this.fire(Q.ADD_OBJECT_AFTER,this.graphics.createObjectProperties(ce)),se.off({'mouse:move':this._handlers.mousemove,'mouse:up':this._handlers.mouseup})}},{key:'_onKeyDown',value:function(se){se.keyCode===$.SHIFT&&(this._withShiftKey=!0,this._shapeObj&&(this._shapeObj.isRegular=!0))}},{key:'_onKeyUp',value:function(se){se.keyCode===$.SHIFT&&(this._withShiftKey=!1,this._shapeObj&&(this._shapeObj.isRegular=!1))}}]),ie}(V.default);m.exports=oe},function(m){'use strict';function E(U){var W=U.getOriginX(),V=U.getOriginY(),G=W.substring(0,1)+V.substring(0,1);U.startPoint=U.origins[G]}function M(U,W,V){var G=U.x,X=U.y,Y=W.x,K=W.y,J=V*Math.PI/180,Z=(Y-G)*Math.cos(J)-(K-X)*Math.sin(J)+G,Q=(Y-G)*Math.sin(J)+(K-X)*Math.cos(J)+X;return{originX:G>Z?'right':'left',originY:X>Q?'bottom':'top'}}function A(U){return'center'===U.getOriginX()&&'center'===U.getOriginY()}function I(U,W){var V=W.getPointByOrigin('center','center'),G=-W.getAngle(),X=M(V,U,G),Y=X.originX,K=X.originY,J=W.getPointByOrigin(Y,K),Z=W.getLeft()-(V.x-J.x),Q=W.getTop()-(V.x-J.y);W.set({originX:Y,originY:K,left:Z,top:Q}),W.setCoords()}function R(U,W){var V=W.startPoint,G=-W.getAngle(),X=M(V,U,G),Y=X.originX,K=X.originY;W.setPositionByOrigin(V,Y,K)}function L(U){var W=U.type,V=U.scaleX,G=U.scaleY,X=z[W],Y=U[X.w]*V,K=U[X.h]*G;if(U.isRegular){var J=Math.max(V,G);Y=U[X.w]*J,K=U[X.h]*J}var Z={hasControls:!1,hasBorders:!1,scaleX:1,scaleY:1};Z[X.w]=Y,Z[X.h]=K,U.set(Z)}function N(U,W){var V=W.type,G=W.strokeWidth,X=W.startPoint,Y=H[V],K=z[V],J=!('triangle'!==W.type),Z={},Q=Math.abs(X.x-U.x)/Y,$=Math.abs(X.y-U.y)/Y;Q>G&&(Q-=G/Y),$>G&&($-=G/Y),W.isRegular&&(Q=$=Math.max(Q,$),J&&($=Math.sqrt(3)/2*Q)),Z[K.w]=Q,Z[K.h]=$,W.set(Z)}var H={rect:1,circle:2,triangle:1},z={rect:{w:'width',h:'height'},circle:{w:'rx',h:'ry'},triangle:{w:'width',h:'height'}};m.exports={setOrigins:function(W){var V=W.getPointByOrigin('left','top'),G=W.getPointByOrigin('right','top'),X=W.getPointByOrigin('right','bottom'),Y=W.getPointByOrigin('left','bottom');W.origins={lt:V,rt:G,rb:X,lb:Y}},resize:function(W,V,G){A(W)&&(I(V,W),E(W)),G?L(W,V):N(V,W),R(V,W)},adjustOriginToCenter:function(W){var V=W.getPointByOrigin('center','center'),G=W.getOriginX(),X=W.getOriginY(),Y=W.getPointByOrigin(G,X),K=W.getLeft()+(V.x-Y.x),J=W.getTop()+(V.y-Y.y);W.set({hasControls:!0,hasBorders:!0,originX:'center',originY:'center',left:K,top:J}),W.setCoords()}}},function(m,_,E){'use strict';function M(X){return X&&X.__esModule?X:{default:X}}function A(X,Y){if(!(X instanceof Y))throw new TypeError('Cannot call a class as a function')}function I(X,Y){if(!X)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return Y&&('object'==typeof Y||'function'==typeof Y)?Y:X}function R(X,Y){if('function'!=typeof Y&&null!==Y)throw new TypeError('Super expression must either be null or a function, not '+typeof Y);X.prototype=Object.create(Y&&Y.prototype,{constructor:{value:X,enumerable:!1,writable:!0,configurable:!0}}),Y&&(Object.setPrototypeOf?Object.setPrototypeOf(X,Y):X.__proto__=Y)}var L=function(){function X(Y,K){for(var J=0,Z;J<K.length;J++)Z=K[J],Z.enumerable=Z.enumerable||!1,Z.configurable=!0,'value'in Z&&(Z.writable=!0),Object.defineProperty(Y,Z.key,Z)}return function(Y,K,J){return K&&X(Y.prototype,K),J&&X(Y,J),Y}}(),N=E(125),H=M(N),z=E(73),U=M(z),W=U.default.drawingModes,V=U.default.componentNames,G=function(X){function Y(){return A(this,Y),I(this,(Y.__proto__||Object.getPrototypeOf(Y)).call(this,W.CROPPER))}return R(Y,X),L(Y,[{key:'start',value:function(J){var Z=J.getComponent(V.CROPPER);Z.start()}},{key:'end',value:function(J){var Z=J.getComponent(V.CROPPER);Z.end()}}]),Y}(H.default);m.exports=G},function(m,_,E){'use strict';function A(U,W){if(!(U instanceof W))throw new TypeError('Cannot call a class as a function')}var I=function(){function U(W,V){for(var G=0,X;G<V.length;G++)X=V[G],X.enumerable=X.enumerable||!1,X.configurable=!0,'value'in X&&(X.writable=!0),Object.defineProperty(W,X.key,X)}return function(W,V,G){return V&&U(W.prototype,V),G&&U(W,G),W}}(),R=E(71),L=function(U){return U&&U.__esModule?U:{default:U}}(R),N=L.default.create,H=L.default.types,z=function(){function U(W){A(this,U),this.name=W}return I(U,[{key:'getName',value:function(){return this.name}},{key:'start',value:function(){throw new Error(N(H.UN_IMPLEMENTATION,'start'))}},{key:'stop',value:function(){throw new Error(N(H.UN_IMPLEMENTATION,'stop'))}}]),U}();m.exports=z},function(m,_,E){'use strict';function M(X){return X&&X.__esModule?X:{default:X}}function A(X,Y){if(!(X instanceof Y))throw new TypeError('Cannot call a class as a function')}function I(X,Y){if(!X)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return Y&&('object'==typeof Y||'function'==typeof Y)?Y:X}function R(X,Y){if('function'!=typeof Y&&null!==Y)throw new TypeError('Super expression must either be null or a function, not '+typeof Y);X.prototype=Object.create(Y&&Y.prototype,{constructor:{value:X,enumerable:!1,writable:!0,configurable:!0}}),Y&&(Object.setPrototypeOf?Object.setPrototypeOf(X,Y):X.__proto__=Y)}var L=function(){function X(Y,K){for(var J=0,Z;J<K.length;J++)Z=K[J],Z.enumerable=Z.enumerable||!1,Z.configurable=!0,'value'in Z&&(Z.writable=!0),Object.defineProperty(Y,Z.key,Z)}return function(Y,K,J){return K&&X(Y.prototype,K),J&&X(Y,J),Y}}(),N=E(125),H=M(N),z=E(73),U=M(z),W=U.default.drawingModes,V=U.default.componentNames,G=function(X){function Y(){return A(this,Y),I(this,(Y.__proto__||Object.getPrototypeOf(Y)).call(this,W.FREE_DRAWING))}return R(Y,X),L(Y,[{key:'start',value:function(J,Z){var Q=J.getComponent(V.FREE_DRAWING);Q.start(Z)}},{key:'end',value:function(J){var Z=J.getComponent(V.FREE_DRAWING);Z.end()}}]),Y}(H.default);m.exports=G},function(m,_,E){'use strict';function M(X){return X&&X.__esModule?X:{default:X}}function A(X,Y){if(!(X instanceof Y))throw new TypeError('Cannot call a class as a function')}function I(X,Y){if(!X)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return Y&&('object'==typeof Y||'function'==typeof Y)?Y:X}function R(X,Y){if('function'!=typeof Y&&null!==Y)throw new TypeError('Super expression must either be null or a function, not '+typeof Y);X.prototype=Object.create(Y&&Y.prototype,{constructor:{value:X,enumerable:!1,writable:!0,configurable:!0}}),Y&&(Object.setPrototypeOf?Object.setPrototypeOf(X,Y):X.__proto__=Y)}var L=function(){function X(Y,K){for(var J=0,Z;J<K.length;J++)Z=K[J],Z.enumerable=Z.enumerable||!1,Z.configurable=!0,'value'in Z&&(Z.writable=!0),Object.defineProperty(Y,Z.key,Z)}return function(Y,K,J){return K&&X(Y.prototype,K),J&&X(Y,J),Y}}(),N=E(125),H=M(N),z=E(73),U=M(z),W=U.default.drawingModes,V=U.default.componentNames,G=function(X){function Y(){return A(this,Y),I(this,(Y.__proto__||Object.getPrototypeOf(Y)).call(this,W.LINE_DRAWING))}return R(Y,X),L(Y,[{key:'start',value:function(J,Z){var Q=J.getComponent(V.LINE);Q.start(Z)}},{key:'end',value:function(J){var Z=J.getComponent(V.LINE);Z.end()}}]),Y}(H.default);m.exports=G},function(m,_,E){'use strict';function M(X){return X&&X.__esModule?X:{default:X}}function A(X,Y){if(!(X instanceof Y))throw new TypeError('Cannot call a class as a function')}function I(X,Y){if(!X)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return Y&&('object'==typeof Y||'function'==typeof Y)?Y:X}function R(X,Y){if('function'!=typeof Y&&null!==Y)throw new TypeError('Super expression must either be null or a function, not '+typeof Y);X.prototype=Object.create(Y&&Y.prototype,{constructor:{value:X,enumerable:!1,writable:!0,configurable:!0}}),Y&&(Object.setPrototypeOf?Object.setPrototypeOf(X,Y):X.__proto__=Y)}var L=function(){function X(Y,K){for(var J=0,Z;J<K.length;J++)Z=K[J],Z.enumerable=Z.enumerable||!1,Z.configurable=!0,'value'in Z&&(Z.writable=!0),Object.defineProperty(Y,Z.key,Z)}return function(Y,K,J){return K&&X(Y.prototype,K),J&&X(Y,J),Y}}(),N=E(125),H=M(N),z=E(73),U=M(z),W=U.default.drawingModes,V=U.default.componentNames,G=function(X){function Y(){return A(this,Y),I(this,(Y.__proto__||Object.getPrototypeOf(Y)).call(this,W.SHAPE))}return R(Y,X),L(Y,[{key:'start',value:function(J){var Z=J.getComponent(V.SHAPE);Z.start()}},{key:'end',value:function(J){var Z=J.getComponent(V.SHAPE);Z.end()}}]),Y}(H.default);m.exports=G},function(m,_,E){'use strict';function M(X){return X&&X.__esModule?X:{default:X}}function A(X,Y){if(!(X instanceof Y))throw new TypeError('Cannot call a class as a function')}function I(X,Y){if(!X)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return Y&&('object'==typeof Y||'function'==typeof Y)?Y:X}function R(X,Y){if('function'!=typeof Y&&null!==Y)throw new TypeError('Super expression must either be null or a function, not '+typeof Y);X.prototype=Object.create(Y&&Y.prototype,{constructor:{value:X,enumerable:!1,writable:!0,configurable:!0}}),Y&&(Object.setPrototypeOf?Object.setPrototypeOf(X,Y):X.__proto__=Y)}var L=function(){function X(Y,K){for(var J=0,Z;J<K.length;J++)Z=K[J],Z.enumerable=Z.enumerable||!1,Z.configurable=!0,'value'in Z&&(Z.writable=!0),Object.defineProperty(Y,Z.key,Z)}return function(Y,K,J){return K&&X(Y.prototype,K),J&&X(Y,J),Y}}(),N=E(125),H=M(N),z=E(73),U=M(z),W=U.default.drawingModes,V=U.default.componentNames,G=function(X){function Y(){return A(this,Y),I(this,(Y.__proto__||Object.getPrototypeOf(Y)).call(this,W.TEXT))}return R(Y,X),L(Y,[{key:'start',value:function(J){var Z=J.getComponent(V.TEXT);Z.start()}},{key:'end',value:function(J){var Z=J.getComponent(V.TEXT);Z.end()}}]),Y}(H.default);m.exports=G},function(){},,function(m,_,E){'use strict';function M(G){return G&&G.__esModule?G:{default:G}}var A=E(69),I=M(A),R=E(4),L=M(R),N=E(73),H=M(N),z=H.default.componentNames,U=H.default.commandNames,W=z.ICON,V={name:U.ADD_ICON,execute:function(X,Y,K){var J=this,Z=X.getComponent(W);return Z.add(Y,K).then(function(Q){return J.undoData.object=X.getObject(Q.id),Q})},undo:function(X){return X.remove(this.undoData.object),L.default.resolve()}};I.default.register(V),m.exports=V},function(m,_,E){'use strict';function M(W){return W&&W.__esModule?W:{default:W}}var A=E(69),I=M(A),R=E(4),L=M(R),N=E(73),H=M(N),z=H.default.commandNames,U={name:z.ADD_IMAGE_OBJECT,execute:function(V,G){var X=this;return V.addImageObject(G).then(function(Y){return X.undoData.object=V.getObject(Y.id),Y})},undo:function(V){return V.remove(this.undoData.object),L.default.resolve()}};I.default.register(U),m.exports=U},function(m,_,E){'use strict';function M(V){return V&&V.__esModule?V:{default:V}}var A=E(69),I=M(A),R=E(4),L=M(R),N=E(73),H=M(N),z=H.default.commandNames,U=H.default.rejectMessages,W={name:z.ADD_OBJECT,execute:function(G,X){return new L.default(function(Y,K){G.contains(X)?K(U.addedObject):(G.add(X),Y(X))})},undo:function(G,X){return new L.default(function(Y,K){G.contains(X)?(G.remove(X),Y(X)):K(U.noObject)})}};I.default.register(W),m.exports=W},function(m,_,E){'use strict';function M(G){return G&&G.__esModule?G:{default:G}}var A=E(69),I=M(A),R=E(4),L=M(R),N=E(73),H=M(N),z=H.default.componentNames,U=H.default.commandNames,W=z.SHAPE,V={name:U.ADD_SHAPE,execute:function(X,Y,K){var J=this,Z=X.getComponent(W);return Z.add(Y,K).then(function(Q){return J.undoData.object=X.getObject(Q.id),Q})},undo:function(X){return X.remove(this.undoData.object),L.default.resolve()}};I.default.register(V),m.exports=V},function(m,_,E){'use strict';function M(G){return G&&G.__esModule?G:{default:G}}var A=E(69),I=M(A),R=E(4),L=M(R),N=E(73),H=M(N),z=H.default.componentNames,U=H.default.commandNames,W=z.TEXT,V={name:U.ADD_TEXT,execute:function(X,Y,K){var J=this,Z=X.getComponent(W);return Z.add(Y,K).then(function(Q){return J.undoData.object=X.getObject(Q.id),Q})},undo:function(X){return X.remove(this.undoData.object),L.default.resolve()}};I.default.register(V),m.exports=V},function(m,_,E){'use strict';function M(V){return V&&V.__esModule?V:{default:V}}var A=E(69),I=M(A),R=E(73),L=M(R),N=L.default.componentNames,H=L.default.rejectMessages,z=L.default.commandNames,U=N.FILTER,W={name:z.APPLY_FILTER,execute:function(G,X,Y){var K=G.getComponent(U);if('mask'===X){var J=G.getObject(Y.maskObjId);if(!(J&&J.isType('image')))return Promise.reject(H.invalidParameters);Y={mask:J}}return'mask'===X?(this.undoData.object=Y.mask,G.remove(Y.mask)):this.undoData.options=K.getOptions(X),K.add(X,Y)},undo:function(G,X){var Y=G.getComponent(U);if('mask'===X){var K=this.undoData.object;return G.add(K),G.setActiveObject(K),Y.remove(X)}return this.undoData.options?Y.add(X,this.undoData.options):Y.remove(X)}};I.default.register(W),m.exports=W},function(m,_,E){'use strict';function M(X){return X&&X.__esModule?X:{default:X}}var A=E(69),I=M(A),R=E(4),L=M(R),N=E(73),H=M(N),z=H.default.componentNames,U=H.default.rejectMessages,W=H.default.commandNames,V=z.ICON,G={name:W.CHANGE_ICON_COLOR,execute:function(Y,K,J){var Z=this;return new L.default(function(Q,$){var ee=Y.getComponent(V),te=Y.getObject(K);te||$(U.noObject),Z.undoData.object=te,Z.undoData.color=ee.getColor(te),ee.setColor(J,te),Q()})},undo:function(Y){var K=Y.getComponent(V),J=this.undoData.object,Z=J.object,Q=J.color;return K.setColor(Q,Z),L.default.resolve()}};I.default.register(G),m.exports=G},function(m,_,E){'use strict';function M(K){return K&&K.__esModule?K:{default:K}}var A=E(3),I=M(A),R=E(69),L=M(R),N=E(4),H=M(N),z=E(73),U=M(z),W=U.default.componentNames,V=U.default.rejectMessages,G=U.default.commandNames,X=W.SHAPE,Y={name:G.CHANGE_SHAPE,execute:function(J,Z,Q){var $=this,ee=J.getComponent(X),te=J.getObject(Z);return te?(this.undoData.object=te,this.undoData.options={},I.default.forEachOwnProperties(Q,function(ae,oe){$.undoData.options[oe]=te[oe]}),ee.change(te,Q)):H.default.reject(V.noObject)},undo:function(J){var Z=J.getComponent(X),Q=this.undoData,$=Q.object,ee=Q.options;return Z.change($,ee)}};L.default.register(Y),m.exports=Y},function(m,_,E){'use strict';function M(X){return X&&X.__esModule?X:{default:X}}var A=E(69),I=M(A),R=E(4),L=M(R),N=E(73),H=M(N),z=H.default.componentNames,U=H.default.rejectMessages,W=H.default.commandNames,V=z.TEXT,G={name:W.CHANGE_TEXT,execute:function(Y,K,J){var Z=Y.getComponent(V),Q=Y.getObject(K);return Q?(this.undoData.object=Q,this.undoData.text=Z.getText(Q),Z.change(Q,J)):L.default.reject(U.noObject)},undo:function(Y){var K=Y.getComponent(V),J=this.undoData,Z=J.object,Q=J.text;return K.change(Z,Q)}};I.default.register(G),m.exports=G},function(m,_,E){'use strict';function M(K){return K&&K.__esModule?K:{default:K}}var A=E(3),I=M(A),R=E(69),L=M(R),N=E(4),H=M(N),z=E(73),U=M(z),W=U.default.componentNames,V=U.default.rejectMessages,G=U.default.commandNames,X=W.TEXT,Y={name:G.CHANGE_TEXT_STYLE,execute:function(J,Z,Q){var $=this,ee=J.getComponent(X),te=J.getObject(Z);return te?(this.undoData.object=te,this.undoData.styles={},I.default.forEachOwnProperties(Q,function(ae,oe){$.undoData.styles[oe]=te[oe]}),ee.setStyle(te,Q)):H.default.reject(V.noObject)},undo:function(J){var Z=J.getComponent(X),Q=this.undoData,$=Q.object,ee=Q.styles;return Z.setStyle($,ee)}};L.default.register(Y),m.exports=Y},function(m,_,E){'use strict';function M(W){return W&&W.__esModule?W:{default:W}}var A=E(69),I=M(A),R=E(4),L=M(R),N=E(73),H=M(N),z=H.default.commandNames,U={name:z.CLEAR_OBJECTS,execute:function(V){var G=this;return new L.default(function(X){G.undoData.objects=V.removeAll(),X()})},undo:function(V){return V.add(this.undoData.objects),L.default.resolve()}};I.default.register(U),m.exports=U},function(m,_,E){'use strict';function M(W){return W&&W.__esModule?W:{default:W}}var A=E(69),I=M(A),R=E(73),L=M(R),N=L.default.componentNames,H=L.default.commandNames,z=N.FLIP,U={name:H.FLIP_IMAGE,execute:function(V,G){var X=V.getComponent(z);return this.undoData.setting=X.getCurrentSetting(),X[G]()},undo:function(V){var G=V.getComponent(z);return G.set(this.undoData.setting)}};I.default.register(U),m.exports=U},function(m,_,E){'use strict';function M(W){return W&&W.__esModule?W:{default:W}}var A=E(69),I=M(A),R=E(73),L=M(R),N=L.default.componentNames,H=L.default.commandNames,z=N.IMAGE_LOADER,U={name:H.LOAD_IMAGE,execute:function(V,G,X){var Y=V.getComponent(z),K=Y.getCanvasImage(),J=K?K.width:0,Z=K?K.height:0,Q=V.removeAll(!0).filter(function($){return'cropzone'!==$.type});return Q.forEach(function($){$.evented=!0}),this.undoData={name:Y.getImageName(),image:K,objects:Q},Y.load(G,X).then(function($){return{oldWidth:J,oldHeight:Z,newWidth:$.width,newHeight:$.height}})},undo:function(V){var G=V.getComponent(z),X=this.undoData,Y=X.objects,K=X.name,J=X.image;return V.removeAll(!0),V.add(Y),G.load(K,J)}};I.default.register(U),m.exports=U},function(m,_,E){'use strict';function M(W){return W&&W.__esModule?W:{default:W}}var A=E(69),I=M(A),R=E(73),L=M(R),N=L.default.componentNames,H=L.default.commandNames,z=N.FILTER,U={name:H.REMOVE_FILTER,execute:function(V,G){var X=V.getComponent(z);return this.undoData.options=X.getOptions(G),X.remove(G)},undo:function(V,G){var X=V.getComponent(z),Y=this.undoData.options;return X.add(G,Y)}};I.default.register(U),m.exports=U},function(m,_,E){'use strict';function M(V){return V&&V.__esModule?V:{default:V}}var A=E(69),I=M(A),R=E(4),L=M(R),N=E(73),H=M(N),z=H.default.commandNames,U=H.default.rejectMessages,W={name:z.REMOVE_OBJECT,execute:function(G,X){var Y=this;return new L.default(function(K,J){Y.undoData.objects=G.removeObjectById(X),Y.undoData.objects.length?K():J(U.noObject)})},undo:function(G){return G.add(this.undoData.objects),L.default.resolve()}};I.default.register(W),m.exports=W},function(m,_,E){'use strict';function M(W){return W&&W.__esModule?W:{default:W}}var A=E(69),I=M(A),R=E(4),L=M(R),N=E(73),H=M(N),z=H.default.commandNames,U={name:z.RESIZE_CANVAS_DIMENSION,execute:function(V,G){var X=this;return new L.default(function(Y){X.undoData.size={width:V.cssMaxWidth,height:V.cssMaxHeight},V.setCssMaxDimension(G),V.adjustCanvasDimension(),Y()})},undo:function(V){return V.setCssMaxDimension(this.undoData.size),V.adjustCanvasDimension(),L.default.resolve()}};I.default.register(U),m.exports=U},function(m,_,E){'use strict';function M(W){return W&&W.__esModule?W:{default:W}}var A=E(69),I=M(A),R=E(73),L=M(R),N=L.default.componentNames,H=L.default.commandNames,z=N.ROTATION,U={name:H.ROTATE_IMAGE,execute:function(V,G,X){var Y=V.getComponent(z);return this.undoData.angle=Y.getCurrentAngle(),Y[G](X)},undo:function(V){var G=V.getComponent(z),X=this.undoData.angle;return G.setAngle(X)}};I.default.register(U),m.exports=U},function(m,_,E){'use strict';function M(X){return X&&X.__esModule?X:{default:X}}var A=E(3),I=M(A),R=E(69),L=M(R),N=E(4),H=M(N),z=E(73),U=M(z),W=U.default.commandNames,V=U.default.rejectMessages,G={name:W.SET_OBJECT_PROPERTIES,execute:function(Y,K,J){var Z=this,Q=Y.getObject(K);return Q?(this.undoData.props={},I.default.forEachOwnProperties(J,function($,ee){Z.undoData.props[ee]=Q[ee]}),Y.setObjectProperties(K,J),H.default.resolve()):H.default.reject(V.noObject)},undo:function(Y,K){var J=this.undoData.props;return Y.setObjectProperties(K,J),H.default.resolve()}};L.default.register(G),m.exports=G},function(m,_,E){'use strict';function M(V){return V&&V.__esModule?V:{default:V}}var A=E(69),I=M(A),R=E(4),L=M(R),N=E(73),H=M(N),z=H.default.commandNames,U=H.default.rejectMessages,W={name:z.SET_OBJECT_POSITION,execute:function(G,X,Y){var K=G.getObject(X);return K?(this.undoData.objectId=X,this.undoData.props=G.getObjectProperties(X,['left','top']),G.setObjectPosition(X,Y),G.renderAll(),L.default.resolve()):L.default.reject(U.noObject)},undo:function(G){var X=this.undoData,Y=X.objectId,K=X.props;return G.setObjectProperties(Y,K),G.renderAll(),L.default.resolve()}};I.default.register(W),m.exports=W}])});